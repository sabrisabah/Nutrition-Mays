# عرض السعرات الحرارية المحسوبة تلقائياً

## المشكلة
كانت السعرات الحرارية تظهر "غير محدد" في صفحة ملف المريض حتى لو كانت البيانات متوفرة لحسابها تلقائياً.

## الحل المطبق

### 1. تحديث صفحة ملف المريض
**الملف**: `src/pages/doctor/PatientProfile.jsx`

**التغييرات**:
- عرض السعرات المحسوبة تلقائياً عندما لا تكون هناك سعرات مخصصة
- إضافة كلمة "(محسوبة)" للتمييز بين السعرات المخصصة والمحسوبة
- تحديث الرسالة التوضيحية لتوضح أن السعرات محسوبة تلقائياً

**قبل التعديل**:
```
السعرات الحرارية اليومية: غير محدد
يمكن للطبيب تحديد السعرات الحرارية المخصصة من خلال النقر على "تعديل"
```

**بعد التعديل**:
```
السعرات الحرارية اليومية: 2,150 سعرة حرارية (محسوبة)
محسوبة تلقائياً حسب الوزن والطول والنشاط والهدف
```

### 2. تحديث واجهة اختيار المريض
**الملف**: `src/components/DailyMealPlanner.jsx`

**التغييرات**:
- عرض رسالة توضيحية عندما لا تكون هناك سعرات مخصصة
- إزالة الشرط الذي يخفي السعرات تماماً

**قبل التعديل**:
```
السعرات الحرارية اليومية: 2,150 سعرة حرارية (مخصصة)
(يظهر فقط إذا كانت مخصصة)
```

**بعد التعديل**:
```
السعرات الحرارية اليومية: 2,150 سعرة حرارية (مخصصة)
أو
السعرات الحرارية اليومية: محسوبة تلقائياً حسب بيانات المريض
```

## النتيجة النهائية

### في صفحة ملف المريض:
- **مع سعرات مخصصة**: يظهر العدد مع كلمة "(مخصصة)"
- **بدون سعرات مخصصة**: يظهر العدد المحسوب تلقائياً مع كلمة "(محسوبة)"

### في واجهة اختيار المريض:
- **مع سعرات مخصصة**: يظهر العدد مع كلمة "(مخصصة)"
- **بدون سعرات مخصصة**: يظهر رسالة "محسوبة تلقائياً حسب بيانات المريض"

### في وضع التعديل:
- يظهر حقل إدخال للسعرات المخصصة
- يظهر السعرات المحسوبة كمرجع

## الملفات المعدلة

1. `src/pages/doctor/PatientProfile.jsx` - عرض السعرات المحسوبة تلقائياً
2. `src/components/DailyMealPlanner.jsx` - تحسين عرض السعرات في اختيار المريض

## الاختبار

لاختبار التحديث:
1. انتقل إلى ملف مريض لم يتم تحديد سعرات حرارية مخصصة له
2. تأكد من ظهور السعرات المحسوبة تلقائياً مع كلمة "(محسوبة)"
3. في واجهة اختيار المريض، تأكد من ظهور الرسالة التوضيحية
4. قم بتحديد سعرات مخصصة وتأكد من ظهورها مع كلمة "(مخصصة)"
