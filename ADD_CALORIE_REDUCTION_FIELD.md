# إضافة حقل السعرات المطلوبة مع تخفيض 500

## المطلوب
إضافة حقل جديد في مخطط الوجبات اليومية يظهر السعرات الحرارية المحسوبة للمريض مع طرح 500 سعرة حرارية.

## التحديث المطبق

### 1. إضافة حقل السعرات المطلوبة (مع تخفيض 500)
**الملف**: `src/components/DailyMealPlanner.jsx`

**التغييرات**:
- إضافة حقل جديد يظهر السعرات المحسوبة مع طرح 500
- إضافة شرح يوضح العملية الحسابية
- تنسيق مميز باللون الأحمر للرقم النهائي

### 2. المواقع المحدثة

#### أ. قسم اختيار المريض (للطبيب):
```
✅ المريض المختار: Mohammed Sabari Sabah
البريد الإلكتروني: 
الهاتف: 07740892893
معرف المريض: 109
السعرات الحرارية اليومية: محسوبة تلقائياً حسب بيانات المريض
السعرات المطلوبة (مع تخفيض 500): 1,650 سعرة حرارية
(السعرات المحسوبة: 2,150 - 500)
يمكنك الآن اختيار قالب الوجبة المناسب
```

#### ب. قسم معلومات المريض (للمريض):
```
✅ مرحباً Mohammed Sabari Sabah
البريد الإلكتروني: 
الهاتف: 07740892893
السعرات المطلوبة (مع تخفيض 500): 1,650 سعرة حرارية
(السعرات المحسوبة: 2,150 - 500)
يمكنك الآن اختيار قالب الوجبة المناسب لك
```

### 3. الميزات الجديدة

#### أ. عرض السعرات المطلوبة:
- **الرقم النهائي**: يظهر باللون الأحمر وبخط عريض
- **الشرح**: يوضح العملية الحسابية (السعرات المحسوبة - 500)
- **الشرط**: يظهر فقط عندما تكون بيانات التغذية متوفرة

#### ب. التنسيق المرئي:
- لون أحمر للرقم النهائي (`#e74c3c`)
- خط عريض للرقم النهائي
- نص صغير رمادي للشرح
- مسافة مناسبة بين العناصر

### 4. مثال على النتيجة

إذا كانت السعرات المحسوبة للمريض 2,150 سعرة حرارية:
- **السعرات المطلوبة (مع تخفيض 500)**: **1,650 سعرة حرارية**
- **الشرح**: (السعرات المحسوبة: 2,150 - 500)

## الملفات المعدلة

1. `src/components/DailyMealPlanner.jsx` - إضافة حقل السعرات المطلوبة مع تخفيض 500

## الاختبار

لاختبار التحديث:
1. انتقل إلى مخطط الوجبات اليومية
2. اختر مريضاً
3. تأكد من ظهور حقل "السعرات المطلوبة (مع تخفيض 500)"
4. تأكد من أن الرقم صحيح (السعرات المحسوبة - 500)
5. تأكد من ظهور الشرح التوضيحي

## ملاحظات

- الحقل يظهر فقط عندما تكون بيانات التغذية متوفرة
- العملية الحسابية: `patientNutritionData.targetCalories - 500`
- التنسيق يبرز الرقم النهائي باللون الأحمر
- الشرح يوضح العملية الحسابية للمستخدم
