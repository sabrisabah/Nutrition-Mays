function Jf(t,s){for(var n=0;n<s.length;n++){const r=s[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Ou(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lu={exports:{}},wl={},Fu={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vr=Symbol.for("react.element"),Xf=Symbol.for("react.portal"),Zf=Symbol.for("react.fragment"),ep=Symbol.for("react.strict_mode"),tp=Symbol.for("react.profiler"),sp=Symbol.for("react.provider"),np=Symbol.for("react.context"),rp=Symbol.for("react.forward_ref"),ap=Symbol.for("react.suspense"),lp=Symbol.for("react.memo"),ip=Symbol.for("react.lazy"),Qc=Symbol.iterator;function op(t){return t===null||typeof t!="object"?null:(t=Qc&&t[Qc]||t["@@iterator"],typeof t=="function"?t:null)}var Au={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$u=Object.assign,Iu={};function Hn(t,s,n){this.props=t,this.context=s,this.refs=Iu,this.updater=n||Au}Hn.prototype.isReactComponent={};Hn.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Hn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Du(){}Du.prototype=Hn.prototype;function Io(t,s,n){this.props=t,this.context=s,this.refs=Iu,this.updater=n||Au}var Do=Io.prototype=new Du;Do.constructor=Io;$u(Do,Hn.prototype);Do.isPureReactComponent=!0;var qc=Array.isArray,zu=Object.prototype.hasOwnProperty,zo={current:null},Uu={key:!0,ref:!0,__self:!0,__source:!0};function Bu(t,s,n){var r,a={},l=null,i=null;if(s!=null)for(r in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(l=""+s.key),s)zu.call(s,r)&&!Uu.hasOwnProperty(r)&&(a[r]=s[r]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(t&&t.defaultProps)for(r in o=t.defaultProps,o)a[r]===void 0&&(a[r]=o[r]);return{$$typeof:Vr,type:t,key:l,ref:i,props:a,_owner:zo.current}}function cp(t,s){return{$$typeof:Vr,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Uo(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vr}function dp(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return s[n]})}var Wc=/\/+/g;function Jl(t,s){return typeof t=="object"&&t!==null&&t.key!=null?dp(""+t.key):s.toString(36)}function _a(t,s,n,r,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case Vr:case Xf:i=!0}}if(i)return i=t,a=a(i),t=r===""?"."+Jl(i,0):r,qc(a)?(n="",t!=null&&(n=t.replace(Wc,"$&/")+"/"),_a(a,s,n,"",function(d){return d})):a!=null&&(Uo(a)&&(a=cp(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(Wc,"$&/")+"/")+t)),s.push(a)),1;if(i=0,r=r===""?".":r+":",qc(t))for(var o=0;o<t.length;o++){l=t[o];var c=r+Jl(l,o);i+=_a(l,s,n,c,a)}else if(c=op(t),typeof c=="function")for(t=c.call(t),o=0;!(l=t.next()).done;)l=l.value,c=r+Jl(l,o++),i+=_a(l,s,n,c,a);else if(l==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function ra(t,s,n){if(t==null)return t;var r=[],a=0;return _a(t,r,"","",function(l){return s.call(n,l,a++)}),r}function up(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var ut={current:null},wa={transition:null},mp={ReactCurrentDispatcher:ut,ReactCurrentBatchConfig:wa,ReactCurrentOwner:zo};function Qu(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:ra,forEach:function(t,s,n){ra(t,function(){s.apply(this,arguments)},n)},count:function(t){var s=0;return ra(t,function(){s++}),s},toArray:function(t){return ra(t,function(s){return s})||[]},only:function(t){if(!Uo(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=Hn;pe.Fragment=Zf;pe.Profiler=tp;pe.PureComponent=Io;pe.StrictMode=ep;pe.Suspense=ap;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mp;pe.act=Qu;pe.cloneElement=function(t,s,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$u({},t.props),a=t.key,l=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(l=s.ref,i=zo.current),s.key!==void 0&&(a=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(c in s)zu.call(s,c)&&!Uu.hasOwnProperty(c)&&(r[c]=s[c]===void 0&&o!==void 0?o[c]:s[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];r.children=o}return{$$typeof:Vr,type:t.type,key:a,ref:l,props:r,_owner:i}};pe.createContext=function(t){return t={$$typeof:np,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sp,_context:t},t.Consumer=t};pe.createElement=Bu;pe.createFactory=function(t){var s=Bu.bind(null,t);return s.type=t,s};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:rp,render:t}};pe.isValidElement=Uo;pe.lazy=function(t){return{$$typeof:ip,_payload:{_status:-1,_result:t},_init:up}};pe.memo=function(t,s){return{$$typeof:lp,type:t,compare:s===void 0?null:s}};pe.startTransition=function(t){var s=wa.transition;wa.transition={};try{t()}finally{wa.transition=s}};pe.unstable_act=Qu;pe.useCallback=function(t,s){return ut.current.useCallback(t,s)};pe.useContext=function(t){return ut.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return ut.current.useDeferredValue(t)};pe.useEffect=function(t,s){return ut.current.useEffect(t,s)};pe.useId=function(){return ut.current.useId()};pe.useImperativeHandle=function(t,s,n){return ut.current.useImperativeHandle(t,s,n)};pe.useInsertionEffect=function(t,s){return ut.current.useInsertionEffect(t,s)};pe.useLayoutEffect=function(t,s){return ut.current.useLayoutEffect(t,s)};pe.useMemo=function(t,s){return ut.current.useMemo(t,s)};pe.useReducer=function(t,s,n){return ut.current.useReducer(t,s,n)};pe.useRef=function(t){return ut.current.useRef(t)};pe.useState=function(t){return ut.current.useState(t)};pe.useSyncExternalStore=function(t,s,n){return ut.current.useSyncExternalStore(t,s,n)};pe.useTransition=function(){return ut.current.useTransition()};pe.version="18.3.1";Fu.exports=pe;var E=Fu.exports;const ce=Ou(E),hp=Jf({__proto__:null,default:ce},[E]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fp=E,pp=Symbol.for("react.element"),xp=Symbol.for("react.fragment"),gp=Object.prototype.hasOwnProperty,vp=fp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jp={key:!0,ref:!0,__self:!0,__source:!0};function qu(t,s,n){var r,a={},l=null,i=null;n!==void 0&&(l=""+n),s.key!==void 0&&(l=""+s.key),s.ref!==void 0&&(i=s.ref);for(r in s)gp.call(s,r)&&!jp.hasOwnProperty(r)&&(a[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:pp,type:t,key:l,ref:i,props:a,_owner:vp.current}}wl.Fragment=xp;wl.jsx=qu;wl.jsxs=qu;Lu.exports=wl;var e=Lu.exports,Ri={},Wu={exports:{}},kt={},Hu={exports:{}},Vu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(R,T){var V=R.length;R.push(T);e:for(;0<V;){var z=V-1>>>1,Z=R[z];if(0<a(Z,T))R[z]=T,R[V]=Z,V=z;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var T=R[0],V=R.pop();if(V!==T){R[0]=V;e:for(var z=0,Z=R.length,D=Z>>>1;z<D;){var X=2*(z+1)-1,te=R[X],ie=X+1,ue=R[ie];if(0>a(te,V))ie<Z&&0>a(ue,te)?(R[z]=ue,R[ie]=V,z=ie):(R[z]=te,R[X]=V,z=X);else if(ie<Z&&0>a(ue,V))R[z]=ue,R[ie]=V,z=ie;else break e}}return T}function a(R,T){var V=R.sortIndex-T.sortIndex;return V!==0?V:R.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var c=[],d=[],h=1,u=null,j=3,x=!1,y=!1,_=!1,p=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var T=n(d);T!==null;){if(T.callback===null)r(d);else if(T.startTime<=R)r(d),T.sortIndex=T.expirationTime,s(c,T);else break;T=n(d)}}function v(R){if(_=!1,g(R),!y)if(n(c)!==null)y=!0,H(b);else{var T=n(d);T!==null&&L(v,T.startTime-R)}}function b(R,T){y=!1,_&&(_=!1,m(M),M=-1),x=!0;var V=j;try{for(g(T),u=n(c);u!==null&&(!(u.expirationTime>T)||R&&!K());){var z=u.callback;if(typeof z=="function"){u.callback=null,j=u.priorityLevel;var Z=z(u.expirationTime<=T);T=t.unstable_now(),typeof Z=="function"?u.callback=Z:u===n(c)&&r(c),g(T)}else r(c);u=n(c)}if(u!==null)var D=!0;else{var X=n(d);X!==null&&L(v,X.startTime-T),D=!1}return D}finally{u=null,j=V,x=!1}}var k=!1,C=null,M=-1,U=5,Q=-1;function K(){return!(t.unstable_now()-Q<U)}function J(){if(C!==null){var R=t.unstable_now();Q=R;var T=!0;try{T=C(!0,R)}finally{T?O():(k=!1,C=null)}}else k=!1}var O;if(typeof f=="function")O=function(){f(J)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,N=$.port2;$.port1.onmessage=J,O=function(){N.postMessage(null)}}else O=function(){p(J,0)};function H(R){C=R,k||(k=!0,O())}function L(R,T){M=p(function(){R(t.unstable_now())},T)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){y||x||(y=!0,H(b))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return j},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(R){switch(j){case 1:case 2:case 3:var T=3;break;default:T=j}var V=j;j=T;try{return R()}finally{j=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,T){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=j;j=R;try{return T()}finally{j=V}},t.unstable_scheduleCallback=function(R,T,V){var z=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?z+V:z):V=z,R){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=V+Z,R={id:h++,callback:T,priorityLevel:R,startTime:V,expirationTime:Z,sortIndex:-1},V>z?(R.sortIndex=V,s(d,R),n(c)===null&&R===n(d)&&(_?(m(M),M=-1):_=!0,L(v,V-z))):(R.sortIndex=Z,s(c,R),y||x||(y=!0,H(b))),R},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(R){var T=j;return function(){var V=j;j=T;try{return R.apply(this,arguments)}finally{j=V}}}})(Vu);Hu.exports=Vu;var yp=Hu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bp=E,Ct=yp;function G(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)s+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ku=new Set,kr={};function pn(t,s){In(t,s),In(t+"Capture",s)}function In(t,s){for(kr[t]=s,t=0;t<s.length;t++)Ku.add(s[t])}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mi=Object.prototype.hasOwnProperty,Np=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hc={},Vc={};function _p(t){return Mi.call(Vc,t)?!0:Mi.call(Hc,t)?!1:Np.test(t)?Vc[t]=!0:(Hc[t]=!0,!1)}function wp(t,s,n,r){if(n!==null&&n.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Sp(t,s,n,r){if(s===null||typeof s>"u"||wp(t,s,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function mt(t,s,n,r,a,l,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=s,this.sanitizeURL=l,this.removeEmptyString=i}var Ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ze[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];Ze[s]=new mt(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ze[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ze[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ze[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ze[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ze[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ze[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ze[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bo=/[\-:]([a-z])/g;function Qo(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(Bo,Qo);Ze[s]=new mt(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(Bo,Qo);Ze[s]=new mt(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(Bo,Qo);Ze[s]=new mt(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ze[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ze.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ze[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function qo(t,s,n,r){var a=Ze.hasOwnProperty(s)?Ze[s]:null;(a!==null?a.type!==0:r||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(Sp(s,n,a,r)&&(n=null),r||a===null?_p(s)&&(n===null?t.removeAttribute(s):t.setAttribute(s,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(s=a.attributeName,r=a.attributeNamespace,n===null?t.removeAttribute(s):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?t.setAttributeNS(r,s,n):t.setAttribute(s,n))))}var ps=bp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,aa=Symbol.for("react.element"),yn=Symbol.for("react.portal"),bn=Symbol.for("react.fragment"),Wo=Symbol.for("react.strict_mode"),Ti=Symbol.for("react.profiler"),Gu=Symbol.for("react.provider"),Yu=Symbol.for("react.context"),Ho=Symbol.for("react.forward_ref"),Oi=Symbol.for("react.suspense"),Li=Symbol.for("react.suspense_list"),Vo=Symbol.for("react.memo"),Ns=Symbol.for("react.lazy"),Ju=Symbol.for("react.offscreen"),Kc=Symbol.iterator;function tr(t){return t===null||typeof t!="object"?null:(t=Kc&&t[Kc]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Xl;function dr(t){if(Xl===void 0)try{throw Error()}catch(n){var s=n.stack.trim().match(/\n( *(at )?)/);Xl=s&&s[1]||""}return`
`+Xl+t}var Zl=!1;function ei(t,s){if(!t||Zl)return"";Zl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(d){var r=d}Reflect.construct(t,[],s)}else{try{s.call()}catch(d){r=d}t.call(s.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=r.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=i&&0<=o);break}}}finally{Zl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?dr(t):""}function Cp(t){switch(t.tag){case 5:return dr(t.type);case 16:return dr("Lazy");case 13:return dr("Suspense");case 19:return dr("SuspenseList");case 0:case 2:case 15:return t=ei(t.type,!1),t;case 11:return t=ei(t.type.render,!1),t;case 1:return t=ei(t.type,!0),t;default:return""}}function Fi(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bn:return"Fragment";case yn:return"Portal";case Ti:return"Profiler";case Wo:return"StrictMode";case Oi:return"Suspense";case Li:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yu:return(t.displayName||"Context")+".Consumer";case Gu:return(t._context.displayName||"Context")+".Provider";case Ho:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vo:return s=t.displayName||null,s!==null?s:Fi(t.type)||"Memo";case Ns:s=t._payload,t=t._init;try{return Fi(t(s))}catch{}}return null}function kp(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fi(s);case 8:return s===Wo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function zs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xu(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ep(t){var s=Xu(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),r=""+t[s];if(!t.hasOwnProperty(s)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return a.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(t,s,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function la(t){t._valueTracker||(t._valueTracker=Ep(t))}function Zu(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var n=s.getValue(),r="";return t&&(r=Xu(t)?t.checked?"true":"false":t.value),t=r,t!==n?(s.setValue(t),!0):!1}function Ba(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ai(t,s){var n=s.checked;return Fe({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Gc(t,s){var n=s.defaultValue==null?"":s.defaultValue,r=s.checked!=null?s.checked:s.defaultChecked;n=zs(s.value!=null?s.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function em(t,s){s=s.checked,s!=null&&qo(t,"checked",s,!1)}function $i(t,s){em(t,s);var n=zs(s.value),r=s.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Ii(t,s.type,n):s.hasOwnProperty("defaultValue")&&Ii(t,s.type,zs(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Yc(t,s,n){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var r=s.type;if(!(r!=="submit"&&r!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,n||s===t.value||(t.value=s),t.defaultValue=s}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ii(t,s,n){(s!=="number"||Ba(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ur=Array.isArray;function Tn(t,s,n,r){if(t=t.options,s){s={};for(var a=0;a<n.length;a++)s["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=s.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zs(n),s=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,r&&(t[a].defaultSelected=!0);return}s!==null||t[a].disabled||(s=t[a])}s!==null&&(s.selected=!0)}}function Di(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(G(91));return Fe({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Jc(t,s){var n=s.value;if(n==null){if(n=s.children,s=s.defaultValue,n!=null){if(s!=null)throw Error(G(92));if(ur(n)){if(1<n.length)throw Error(G(93));n=n[0]}s=n}s==null&&(s=""),n=s}t._wrapperState={initialValue:zs(n)}}function tm(t,s){var n=zs(s.value),r=zs(s.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),s.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xc(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function sm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zi(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?sm(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ia,nm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,n,r,a){MSApp.execUnsafeLocalFunction(function(){return t(s,n,r,a)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(ia=ia||document.createElement("div"),ia.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ia.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Er(t,s){if(s){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=s;return}}t.textContent=s}var pr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pp=["Webkit","ms","Moz","O"];Object.keys(pr).forEach(function(t){Pp.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),pr[s]=pr[t]})});function rm(t,s,n){return s==null||typeof s=="boolean"||s===""?"":n||typeof s!="number"||s===0||pr.hasOwnProperty(t)&&pr[t]?(""+s).trim():s+"px"}function am(t,s){t=t.style;for(var n in s)if(s.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=rm(n,s[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,a):t[n]=a}}var Rp=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ui(t,s){if(s){if(Rp[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(G(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(G(61))}if(s.style!=null&&typeof s.style!="object")throw Error(G(62))}}function Bi(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qi=null;function Ko(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qi=null,On=null,Ln=null;function Zc(t){if(t=Yr(t)){if(typeof qi!="function")throw Error(G(280));var s=t.stateNode;s&&(s=Pl(s),qi(t.stateNode,t.type,s))}}function lm(t){On?Ln?Ln.push(t):Ln=[t]:On=t}function im(){if(On){var t=On,s=Ln;if(Ln=On=null,Zc(t),s)for(t=0;t<s.length;t++)Zc(s[t])}}function om(t,s){return t(s)}function cm(){}var ti=!1;function dm(t,s,n){if(ti)return t(s,n);ti=!0;try{return om(t,s,n)}finally{ti=!1,(On!==null||Ln!==null)&&(cm(),im())}}function Pr(t,s){var n=t.stateNode;if(n===null)return null;var r=Pl(n);if(r===null)return null;n=r[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,s,typeof n));return n}var Wi=!1;if(us)try{var sr={};Object.defineProperty(sr,"passive",{get:function(){Wi=!0}}),window.addEventListener("test",sr,sr),window.removeEventListener("test",sr,sr)}catch{Wi=!1}function Mp(t,s,n,r,a,l,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{s.apply(n,d)}catch(h){this.onError(h)}}var xr=!1,Qa=null,qa=!1,Hi=null,Tp={onError:function(t){xr=!0,Qa=t}};function Op(t,s,n,r,a,l,i,o,c){xr=!1,Qa=null,Mp.apply(Tp,arguments)}function Lp(t,s,n,r,a,l,i,o,c){if(Op.apply(this,arguments),xr){if(xr){var d=Qa;xr=!1,Qa=null}else throw Error(G(198));qa||(qa=!0,Hi=d)}}function xn(t){var s=t,n=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(n=s.return),t=s.return;while(t)}return s.tag===3?n:null}function um(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function ed(t){if(xn(t)!==t)throw Error(G(188))}function Fp(t){var s=t.alternate;if(!s){if(s=xn(t),s===null)throw Error(G(188));return s!==t?null:t}for(var n=t,r=s;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return ed(a),t;if(l===r)return ed(a),s;l=l.sibling}throw Error(G(188))}if(n.return!==r.return)n=a,r=l;else{for(var i=!1,o=a.child;o;){if(o===n){i=!0,n=a,r=l;break}if(o===r){i=!0,r=a,n=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===n){i=!0,n=l,r=a;break}if(o===r){i=!0,r=l,n=a;break}o=o.sibling}if(!i)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:s}function mm(t){return t=Fp(t),t!==null?hm(t):null}function hm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=hm(t);if(s!==null)return s;t=t.sibling}return null}var fm=Ct.unstable_scheduleCallback,td=Ct.unstable_cancelCallback,Ap=Ct.unstable_shouldYield,$p=Ct.unstable_requestPaint,Ie=Ct.unstable_now,Ip=Ct.unstable_getCurrentPriorityLevel,Go=Ct.unstable_ImmediatePriority,pm=Ct.unstable_UserBlockingPriority,Wa=Ct.unstable_NormalPriority,Dp=Ct.unstable_LowPriority,xm=Ct.unstable_IdlePriority,Sl=null,es=null;function zp(t){if(es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(Sl,t,void 0,(t.current.flags&128)===128)}catch{}}var Qt=Math.clz32?Math.clz32:Qp,Up=Math.log,Bp=Math.LN2;function Qp(t){return t>>>=0,t===0?32:31-(Up(t)/Bp|0)|0}var oa=64,ca=4194304;function mr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ha(t,s){var n=t.pendingLanes;if(n===0)return 0;var r=0,a=t.suspendedLanes,l=t.pingedLanes,i=n&268435455;if(i!==0){var o=i&~a;o!==0?r=mr(o):(l&=i,l!==0&&(r=mr(l)))}else i=n&~a,i!==0?r=mr(i):l!==0&&(r=mr(l));if(r===0)return 0;if(s!==0&&s!==r&&!(s&a)&&(a=r&-r,l=s&-s,a>=l||a===16&&(l&4194240)!==0))return s;if(r&4&&(r|=n&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=r;0<s;)n=31-Qt(s),a=1<<n,r|=t[n],s&=~a;return r}function qp(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wp(t,s){for(var n=t.suspendedLanes,r=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var i=31-Qt(l),o=1<<i,c=a[i];c===-1?(!(o&n)||o&r)&&(a[i]=qp(o,s)):c<=s&&(t.expiredLanes|=o),l&=~o}}function Vi(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gm(){var t=oa;return oa<<=1,!(oa&4194240)&&(oa=64),t}function si(t){for(var s=[],n=0;31>n;n++)s.push(t);return s}function Kr(t,s,n){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Qt(s),t[s]=n}function Hp(t,s){var n=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-Qt(n),l=1<<a;s[a]=0,r[a]=-1,t[a]=-1,n&=~l}}function Yo(t,s){var n=t.entangledLanes|=s;for(t=t.entanglements;n;){var r=31-Qt(n),a=1<<r;a&s|t[r]&s&&(t[r]|=s),n&=~a}}var Ne=0;function vm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jm,Jo,ym,bm,Nm,Ki=!1,da=[],Ms=null,Ts=null,Os=null,Rr=new Map,Mr=new Map,Ss=[],Vp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sd(t,s){switch(t){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Os=null;break;case"pointerover":case"pointerout":Rr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mr.delete(s.pointerId)}}function nr(t,s,n,r,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:s,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},s!==null&&(s=Yr(s),s!==null&&Jo(s)),t):(t.eventSystemFlags|=r,s=t.targetContainers,a!==null&&s.indexOf(a)===-1&&s.push(a),t)}function Kp(t,s,n,r,a){switch(s){case"focusin":return Ms=nr(Ms,t,s,n,r,a),!0;case"dragenter":return Ts=nr(Ts,t,s,n,r,a),!0;case"mouseover":return Os=nr(Os,t,s,n,r,a),!0;case"pointerover":var l=a.pointerId;return Rr.set(l,nr(Rr.get(l)||null,t,s,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,Mr.set(l,nr(Mr.get(l)||null,t,s,n,r,a)),!0}return!1}function _m(t){var s=Xs(t.target);if(s!==null){var n=xn(s);if(n!==null){if(s=n.tag,s===13){if(s=um(n),s!==null){t.blockedOn=s,Nm(t.priority,function(){ym(n)});return}}else if(s===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sa(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var n=Gi(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qi=r,n.target.dispatchEvent(r),Qi=null}else return s=Yr(n),s!==null&&Jo(s),t.blockedOn=n,!1;s.shift()}return!0}function nd(t,s,n){Sa(t)&&n.delete(s)}function Gp(){Ki=!1,Ms!==null&&Sa(Ms)&&(Ms=null),Ts!==null&&Sa(Ts)&&(Ts=null),Os!==null&&Sa(Os)&&(Os=null),Rr.forEach(nd),Mr.forEach(nd)}function rr(t,s){t.blockedOn===s&&(t.blockedOn=null,Ki||(Ki=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,Gp)))}function Tr(t){function s(a){return rr(a,t)}if(0<da.length){rr(da[0],t);for(var n=1;n<da.length;n++){var r=da[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ms!==null&&rr(Ms,t),Ts!==null&&rr(Ts,t),Os!==null&&rr(Os,t),Rr.forEach(s),Mr.forEach(s),n=0;n<Ss.length;n++)r=Ss[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ss.length&&(n=Ss[0],n.blockedOn===null);)_m(n),n.blockedOn===null&&Ss.shift()}var Fn=ps.ReactCurrentBatchConfig,Va=!0;function Yp(t,s,n,r){var a=Ne,l=Fn.transition;Fn.transition=null;try{Ne=1,Xo(t,s,n,r)}finally{Ne=a,Fn.transition=l}}function Jp(t,s,n,r){var a=Ne,l=Fn.transition;Fn.transition=null;try{Ne=4,Xo(t,s,n,r)}finally{Ne=a,Fn.transition=l}}function Xo(t,s,n,r){if(Va){var a=Gi(t,s,n,r);if(a===null)mi(t,s,r,Ka,n),sd(t,r);else if(Kp(a,t,s,n,r))r.stopPropagation();else if(sd(t,r),s&4&&-1<Vp.indexOf(t)){for(;a!==null;){var l=Yr(a);if(l!==null&&jm(l),l=Gi(t,s,n,r),l===null&&mi(t,s,r,Ka,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else mi(t,s,r,null,n)}}var Ka=null;function Gi(t,s,n,r){if(Ka=null,t=Ko(r),t=Xs(t),t!==null)if(s=xn(t),s===null)t=null;else if(n=s.tag,n===13){if(t=um(s),t!==null)return t;t=null}else if(n===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Ka=t,null}function wm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ip()){case Go:return 1;case pm:return 4;case Wa:case Dp:return 16;case xm:return 536870912;default:return 16}default:return 16}}var ks=null,Zo=null,Ca=null;function Sm(){if(Ca)return Ca;var t,s=Zo,n=s.length,r,a="value"in ks?ks.value:ks.textContent,l=a.length;for(t=0;t<n&&s[t]===a[t];t++);var i=n-t;for(r=1;r<=i&&s[n-r]===a[l-r];r++);return Ca=a.slice(t,1<r?1-r:void 0)}function ka(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ua(){return!0}function rd(){return!1}function Et(t){function s(n,r,a,l,i){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(n=t[o],this[o]=n?n(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ua:rd,this.isPropagationStopped=rd,this}return Fe(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ua)},persist:function(){},isPersistent:ua}),s}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ec=Et(Vn),Gr=Fe({},Vn,{view:0,detail:0}),Xp=Et(Gr),ni,ri,ar,Cl=Fe({},Gr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ar&&(ar&&t.type==="mousemove"?(ni=t.screenX-ar.screenX,ri=t.screenY-ar.screenY):ri=ni=0,ar=t),ni)},movementY:function(t){return"movementY"in t?t.movementY:ri}}),ad=Et(Cl),Zp=Fe({},Cl,{dataTransfer:0}),ex=Et(Zp),tx=Fe({},Gr,{relatedTarget:0}),ai=Et(tx),sx=Fe({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),nx=Et(sx),rx=Fe({},Vn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ax=Et(rx),lx=Fe({},Vn,{data:0}),ld=Et(lx),ix={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ox={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dx(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=cx[t])?!!s[t]:!1}function tc(){return dx}var ux=Fe({},Gr,{key:function(t){if(t.key){var s=ix[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ka(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ox[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tc,charCode:function(t){return t.type==="keypress"?ka(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ka(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mx=Et(ux),hx=Fe({},Cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),id=Et(hx),fx=Fe({},Gr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tc}),px=Et(fx),xx=Fe({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),gx=Et(xx),vx=Fe({},Cl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jx=Et(vx),yx=[9,13,27,32],sc=us&&"CompositionEvent"in window,gr=null;us&&"documentMode"in document&&(gr=document.documentMode);var bx=us&&"TextEvent"in window&&!gr,Cm=us&&(!sc||gr&&8<gr&&11>=gr),od=" ",cd=!1;function km(t,s){switch(t){case"keyup":return yx.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nn=!1;function Nx(t,s){switch(t){case"compositionend":return Em(s);case"keypress":return s.which!==32?null:(cd=!0,od);case"textInput":return t=s.data,t===od&&cd?null:t;default:return null}}function _x(t,s){if(Nn)return t==="compositionend"||!sc&&km(t,s)?(t=Sm(),Ca=Zo=ks=null,Nn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Cm&&s.locale!=="ko"?null:s.data;default:return null}}var wx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!wx[t.type]:s==="textarea"}function Pm(t,s,n,r){lm(r),s=Ga(s,"onChange"),0<s.length&&(n=new ec("onChange","change",null,n,r),t.push({event:n,listeners:s}))}var vr=null,Or=null;function Sx(t){zm(t,0)}function kl(t){var s=Sn(t);if(Zu(s))return t}function Cx(t,s){if(t==="change")return s}var Rm=!1;if(us){var li;if(us){var ii="oninput"in document;if(!ii){var ud=document.createElement("div");ud.setAttribute("oninput","return;"),ii=typeof ud.oninput=="function"}li=ii}else li=!1;Rm=li&&(!document.documentMode||9<document.documentMode)}function md(){vr&&(vr.detachEvent("onpropertychange",Mm),Or=vr=null)}function Mm(t){if(t.propertyName==="value"&&kl(Or)){var s=[];Pm(s,Or,t,Ko(t)),dm(Sx,s)}}function kx(t,s,n){t==="focusin"?(md(),vr=s,Or=n,vr.attachEvent("onpropertychange",Mm)):t==="focusout"&&md()}function Ex(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kl(Or)}function Px(t,s){if(t==="click")return kl(s)}function Rx(t,s){if(t==="input"||t==="change")return kl(s)}function Mx(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Wt=typeof Object.is=="function"?Object.is:Mx;function Lr(t,s){if(Wt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var n=Object.keys(t),r=Object.keys(s);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Mi.call(s,a)||!Wt(t[a],s[a]))return!1}return!0}function hd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fd(t,s){var n=hd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=s&&r>=s)return{node:n,offset:s-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hd(n)}}function Tm(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Tm(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Om(){for(var t=window,s=Ba();s instanceof t.HTMLIFrameElement;){try{var n=typeof s.contentWindow.location.href=="string"}catch{n=!1}if(n)t=s.contentWindow;else break;s=Ba(t.document)}return s}function nc(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Tx(t){var s=Om(),n=t.focusedElem,r=t.selectionRange;if(s!==n&&n&&n.ownerDocument&&Tm(n.ownerDocument.documentElement,n)){if(r!==null&&nc(n)){if(s=r.start,t=r.end,t===void 0&&(t=s),"selectionStart"in n)n.selectionStart=s,n.selectionEnd=Math.min(t,n.value.length);else if(t=(s=n.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!t.extend&&l>r&&(a=r,r=l,l=a),a=fd(n,l);var i=fd(n,r);a&&i&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(a.node,a.offset),t.removeAllRanges(),l>r?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=n;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<s.length;n++)t=s[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ox=us&&"documentMode"in document&&11>=document.documentMode,_n=null,Yi=null,jr=null,Ji=!1;function pd(t,s,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ji||_n==null||_n!==Ba(r)||(r=_n,"selectionStart"in r&&nc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jr&&Lr(jr,r)||(jr=r,r=Ga(Yi,"onSelect"),0<r.length&&(s=new ec("onSelect","select",null,s,n),t.push({event:s,listeners:r}),s.target=_n)))}function ma(t,s){var n={};return n[t.toLowerCase()]=s.toLowerCase(),n["Webkit"+t]="webkit"+s,n["Moz"+t]="moz"+s,n}var wn={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},oi={},Lm={};us&&(Lm=document.createElement("div").style,"AnimationEvent"in window||(delete wn.animationend.animation,delete wn.animationiteration.animation,delete wn.animationstart.animation),"TransitionEvent"in window||delete wn.transitionend.transition);function El(t){if(oi[t])return oi[t];if(!wn[t])return t;var s=wn[t],n;for(n in s)if(s.hasOwnProperty(n)&&n in Lm)return oi[t]=s[n];return t}var Fm=El("animationend"),Am=El("animationiteration"),$m=El("animationstart"),Im=El("transitionend"),Dm=new Map,xd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bs(t,s){Dm.set(t,s),pn(s,[t])}for(var ci=0;ci<xd.length;ci++){var di=xd[ci],Lx=di.toLowerCase(),Fx=di[0].toUpperCase()+di.slice(1);Bs(Lx,"on"+Fx)}Bs(Fm,"onAnimationEnd");Bs(Am,"onAnimationIteration");Bs($m,"onAnimationStart");Bs("dblclick","onDoubleClick");Bs("focusin","onFocus");Bs("focusout","onBlur");Bs(Im,"onTransitionEnd");In("onMouseEnter",["mouseout","mouseover"]);In("onMouseLeave",["mouseout","mouseover"]);In("onPointerEnter",["pointerout","pointerover"]);In("onPointerLeave",["pointerout","pointerover"]);pn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pn("onBeforeInput",["compositionend","keypress","textInput","paste"]);pn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ax=new Set("cancel close invalid load scroll toggle".split(" ").concat(hr));function gd(t,s,n){var r=t.type||"unknown-event";t.currentTarget=n,Lp(r,s,void 0,t),t.currentTarget=null}function zm(t,s){s=(s&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],a=r.event;r=r.listeners;e:{var l=void 0;if(s)for(var i=r.length-1;0<=i;i--){var o=r[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;gd(a,o,d),l=c}else for(i=0;i<r.length;i++){if(o=r[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;gd(a,o,d),l=c}}}if(qa)throw t=Hi,qa=!1,Hi=null,t}function Ee(t,s){var n=s[so];n===void 0&&(n=s[so]=new Set);var r=t+"__bubble";n.has(r)||(Um(s,t,2,!1),n.add(r))}function ui(t,s,n){var r=0;s&&(r|=4),Um(n,t,r,s)}var ha="_reactListening"+Math.random().toString(36).slice(2);function Fr(t){if(!t[ha]){t[ha]=!0,Ku.forEach(function(n){n!=="selectionchange"&&(Ax.has(n)||ui(n,!1,t),ui(n,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[ha]||(s[ha]=!0,ui("selectionchange",!1,s))}}function Um(t,s,n,r){switch(wm(s)){case 1:var a=Yp;break;case 4:a=Jp;break;default:a=Xo}n=a.bind(null,s,n,t),a=void 0,!Wi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(a=!0),r?a!==void 0?t.addEventListener(s,n,{capture:!0,passive:a}):t.addEventListener(s,n,!0):a!==void 0?t.addEventListener(s,n,{passive:a}):t.addEventListener(s,n,!1)}function mi(t,s,n,r,a){var l=r;if(!(s&1)&&!(s&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var o=r.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=Xs(o),i===null)return;if(c=i.tag,c===5||c===6){r=l=i;continue e}o=o.parentNode}}r=r.return}dm(function(){var d=l,h=Ko(n),u=[];e:{var j=Dm.get(t);if(j!==void 0){var x=ec,y=t;switch(t){case"keypress":if(ka(n)===0)break e;case"keydown":case"keyup":x=mx;break;case"focusin":y="focus",x=ai;break;case"focusout":y="blur",x=ai;break;case"beforeblur":case"afterblur":x=ai;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ad;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=ex;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=px;break;case Fm:case Am:case $m:x=nx;break;case Im:x=gx;break;case"scroll":x=Xp;break;case"wheel":x=jx;break;case"copy":case"cut":case"paste":x=ax;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=id}var _=(s&4)!==0,p=!_&&t==="scroll",m=_?j!==null?j+"Capture":null:j;_=[];for(var f=d,g;f!==null;){g=f;var v=g.stateNode;if(g.tag===5&&v!==null&&(g=v,m!==null&&(v=Pr(f,m),v!=null&&_.push(Ar(f,v,g)))),p)break;f=f.return}0<_.length&&(j=new x(j,y,null,n,h),u.push({event:j,listeners:_}))}}if(!(s&7)){e:{if(j=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",j&&n!==Qi&&(y=n.relatedTarget||n.fromElement)&&(Xs(y)||y[ms]))break e;if((x||j)&&(j=h.window===h?h:(j=h.ownerDocument)?j.defaultView||j.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=d,y=y?Xs(y):null,y!==null&&(p=xn(y),y!==p||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=d),x!==y)){if(_=ad,v="onMouseLeave",m="onMouseEnter",f="mouse",(t==="pointerout"||t==="pointerover")&&(_=id,v="onPointerLeave",m="onPointerEnter",f="pointer"),p=x==null?j:Sn(x),g=y==null?j:Sn(y),j=new _(v,f+"leave",x,n,h),j.target=p,j.relatedTarget=g,v=null,Xs(h)===d&&(_=new _(m,f+"enter",y,n,h),_.target=g,_.relatedTarget=p,v=_),p=v,x&&y)t:{for(_=x,m=y,f=0,g=_;g;g=jn(g))f++;for(g=0,v=m;v;v=jn(v))g++;for(;0<f-g;)_=jn(_),f--;for(;0<g-f;)m=jn(m),g--;for(;f--;){if(_===m||m!==null&&_===m.alternate)break t;_=jn(_),m=jn(m)}_=null}else _=null;x!==null&&vd(u,j,x,_,!1),y!==null&&p!==null&&vd(u,p,y,_,!0)}}e:{if(j=d?Sn(d):window,x=j.nodeName&&j.nodeName.toLowerCase(),x==="select"||x==="input"&&j.type==="file")var b=Cx;else if(dd(j))if(Rm)b=Rx;else{b=Ex;var k=kx}else(x=j.nodeName)&&x.toLowerCase()==="input"&&(j.type==="checkbox"||j.type==="radio")&&(b=Px);if(b&&(b=b(t,d))){Pm(u,b,n,h);break e}k&&k(t,j,d),t==="focusout"&&(k=j._wrapperState)&&k.controlled&&j.type==="number"&&Ii(j,"number",j.value)}switch(k=d?Sn(d):window,t){case"focusin":(dd(k)||k.contentEditable==="true")&&(_n=k,Yi=d,jr=null);break;case"focusout":jr=Yi=_n=null;break;case"mousedown":Ji=!0;break;case"contextmenu":case"mouseup":case"dragend":Ji=!1,pd(u,n,h);break;case"selectionchange":if(Ox)break;case"keydown":case"keyup":pd(u,n,h)}var C;if(sc)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else Nn?km(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(Cm&&n.locale!=="ko"&&(Nn||M!=="onCompositionStart"?M==="onCompositionEnd"&&Nn&&(C=Sm()):(ks=h,Zo="value"in ks?ks.value:ks.textContent,Nn=!0)),k=Ga(d,M),0<k.length&&(M=new ld(M,t,null,n,h),u.push({event:M,listeners:k}),C?M.data=C:(C=Em(n),C!==null&&(M.data=C)))),(C=bx?Nx(t,n):_x(t,n))&&(d=Ga(d,"onBeforeInput"),0<d.length&&(h=new ld("onBeforeInput","beforeinput",null,n,h),u.push({event:h,listeners:d}),h.data=C))}zm(u,s)})}function Ar(t,s,n){return{instance:t,listener:s,currentTarget:n}}function Ga(t,s){for(var n=s+"Capture",r=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Pr(t,n),l!=null&&r.unshift(Ar(t,l,a)),l=Pr(t,s),l!=null&&r.push(Ar(t,l,a))),t=t.return}return r}function jn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vd(t,s,n,r,a){for(var l=s._reactName,i=[];n!==null&&n!==r;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===r)break;o.tag===5&&d!==null&&(o=d,a?(c=Pr(n,l),c!=null&&i.unshift(Ar(n,c,o))):a||(c=Pr(n,l),c!=null&&i.push(Ar(n,c,o)))),n=n.return}i.length!==0&&t.push({event:s,listeners:i})}var $x=/\r\n?/g,Ix=/\u0000|\uFFFD/g;function jd(t){return(typeof t=="string"?t:""+t).replace($x,`
`).replace(Ix,"")}function fa(t,s,n){if(s=jd(s),jd(t)!==s&&n)throw Error(G(425))}function Ya(){}var Xi=null,Zi=null;function eo(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var to=typeof setTimeout=="function"?setTimeout:void 0,Dx=typeof clearTimeout=="function"?clearTimeout:void 0,yd=typeof Promise=="function"?Promise:void 0,zx=typeof queueMicrotask=="function"?queueMicrotask:typeof yd<"u"?function(t){return yd.resolve(null).then(t).catch(Ux)}:to;function Ux(t){setTimeout(function(){throw t})}function hi(t,s){var n=s,r=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){t.removeChild(a),Tr(s);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Tr(s)}function Ls(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function bd(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(s===0)return t;s--}else n==="/$"&&s++}t=t.previousSibling}return null}var Kn=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Kn,$r="__reactProps$"+Kn,ms="__reactContainer$"+Kn,so="__reactEvents$"+Kn,Bx="__reactListeners$"+Kn,Qx="__reactHandles$"+Kn;function Xs(t){var s=t[Zt];if(s)return s;for(var n=t.parentNode;n;){if(s=n[ms]||n[Zt]){if(n=s.alternate,s.child!==null||n!==null&&n.child!==null)for(t=bd(t);t!==null;){if(n=t[Zt])return n;t=bd(t)}return s}t=n,n=t.parentNode}return null}function Yr(t){return t=t[Zt]||t[ms],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Sn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Pl(t){return t[$r]||null}var no=[],Cn=-1;function Qs(t){return{current:t}}function Pe(t){0>Cn||(t.current=no[Cn],no[Cn]=null,Cn--)}function Ce(t,s){Cn++,no[Cn]=t.current,t.current=s}var Us={},rt=Qs(Us),xt=Qs(!1),on=Us;function Dn(t,s){var n=t.type.contextTypes;if(!n)return Us;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===s)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=s[l];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),a}function gt(t){return t=t.childContextTypes,t!=null}function Ja(){Pe(xt),Pe(rt)}function Nd(t,s,n){if(rt.current!==Us)throw Error(G(168));Ce(rt,s),Ce(xt,n)}function Bm(t,s,n){var r=t.stateNode;if(s=s.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in s))throw Error(G(108,kp(t)||"Unknown",a));return Fe({},n,r)}function Xa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Us,on=rt.current,Ce(rt,t),Ce(xt,xt.current),!0}function _d(t,s,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=Bm(t,s,on),r.__reactInternalMemoizedMergedChildContext=t,Pe(xt),Pe(rt),Ce(rt,t)):Pe(xt),Ce(xt,n)}var is=null,Rl=!1,fi=!1;function Qm(t){is===null?is=[t]:is.push(t)}function qx(t){Rl=!0,Qm(t)}function qs(){if(!fi&&is!==null){fi=!0;var t=0,s=Ne;try{var n=is;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}is=null,Rl=!1}catch(a){throw is!==null&&(is=is.slice(t+1)),fm(Go,qs),a}finally{Ne=s,fi=!1}}return null}var kn=[],En=0,Za=null,el=0,Mt=[],Tt=0,cn=null,os=1,cs="";function Gs(t,s){kn[En++]=el,kn[En++]=Za,Za=t,el=s}function qm(t,s,n){Mt[Tt++]=os,Mt[Tt++]=cs,Mt[Tt++]=cn,cn=t;var r=os;t=cs;var a=32-Qt(r)-1;r&=~(1<<a),n+=1;var l=32-Qt(s)+a;if(30<l){var i=a-a%5;l=(r&(1<<i)-1).toString(32),r>>=i,a-=i,os=1<<32-Qt(s)+a|n<<a|r,cs=l+t}else os=1<<l|n<<a|r,cs=t}function rc(t){t.return!==null&&(Gs(t,1),qm(t,1,0))}function ac(t){for(;t===Za;)Za=kn[--En],kn[En]=null,el=kn[--En],kn[En]=null;for(;t===cn;)cn=Mt[--Tt],Mt[Tt]=null,cs=Mt[--Tt],Mt[Tt]=null,os=Mt[--Tt],Mt[Tt]=null}var St=null,wt=null,Me=!1,Ut=null;function Wm(t,s){var n=Ot(5,null,null,0);n.elementType="DELETED",n.stateNode=s,n.return=t,s=t.deletions,s===null?(t.deletions=[n],t.flags|=16):s.push(n)}function wd(t,s){switch(t.tag){case 5:var n=t.type;return s=s.nodeType!==1||n.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,St=t,wt=Ls(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,St=t,wt=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(n=cn!==null?{id:os,overflow:cs}:null,t.memoizedState={dehydrated:s,treeContext:n,retryLane:1073741824},n=Ot(18,null,null,0),n.stateNode=s,n.return=t,t.child=n,St=t,wt=null,!0):!1;default:return!1}}function ro(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ao(t){if(Me){var s=wt;if(s){var n=s;if(!wd(t,s)){if(ro(t))throw Error(G(418));s=Ls(n.nextSibling);var r=St;s&&wd(t,s)?Wm(r,n):(t.flags=t.flags&-4097|2,Me=!1,St=t)}}else{if(ro(t))throw Error(G(418));t.flags=t.flags&-4097|2,Me=!1,St=t}}}function Sd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;St=t}function pa(t){if(t!==St)return!1;if(!Me)return Sd(t),Me=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!eo(t.type,t.memoizedProps)),s&&(s=wt)){if(ro(t))throw Hm(),Error(G(418));for(;s;)Wm(t,s),s=Ls(s.nextSibling)}if(Sd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(s===0){wt=Ls(t.nextSibling);break e}s--}else n!=="$"&&n!=="$!"&&n!=="$?"||s++}t=t.nextSibling}wt=null}}else wt=St?Ls(t.stateNode.nextSibling):null;return!0}function Hm(){for(var t=wt;t;)t=Ls(t.nextSibling)}function zn(){wt=St=null,Me=!1}function lc(t){Ut===null?Ut=[t]:Ut.push(t)}var Wx=ps.ReactCurrentBatchConfig;function lr(t,s,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var a=r,l=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===l?s.ref:(s=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},s._stringRef=l,s)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function xa(t,s){throw t=Object.prototype.toString.call(s),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Cd(t){var s=t._init;return s(t._payload)}function Vm(t){function s(m,f){if(t){var g=m.deletions;g===null?(m.deletions=[f],m.flags|=16):g.push(f)}}function n(m,f){if(!t)return null;for(;f!==null;)s(m,f),f=f.sibling;return null}function r(m,f){for(m=new Map;f!==null;)f.key!==null?m.set(f.key,f):m.set(f.index,f),f=f.sibling;return m}function a(m,f){return m=Is(m,f),m.index=0,m.sibling=null,m}function l(m,f,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<f?(m.flags|=2,f):g):(m.flags|=2,f)):(m.flags|=1048576,f)}function i(m){return t&&m.alternate===null&&(m.flags|=2),m}function o(m,f,g,v){return f===null||f.tag!==6?(f=bi(g,m.mode,v),f.return=m,f):(f=a(f,g),f.return=m,f)}function c(m,f,g,v){var b=g.type;return b===bn?h(m,f,g.props.children,v,g.key):f!==null&&(f.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ns&&Cd(b)===f.type)?(v=a(f,g.props),v.ref=lr(m,f,g),v.return=m,v):(v=La(g.type,g.key,g.props,null,m.mode,v),v.ref=lr(m,f,g),v.return=m,v)}function d(m,f,g,v){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=Ni(g,m.mode,v),f.return=m,f):(f=a(f,g.children||[]),f.return=m,f)}function h(m,f,g,v,b){return f===null||f.tag!==7?(f=an(g,m.mode,v,b),f.return=m,f):(f=a(f,g),f.return=m,f)}function u(m,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=bi(""+f,m.mode,g),f.return=m,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case aa:return g=La(f.type,f.key,f.props,null,m.mode,g),g.ref=lr(m,null,f),g.return=m,g;case yn:return f=Ni(f,m.mode,g),f.return=m,f;case Ns:var v=f._init;return u(m,v(f._payload),g)}if(ur(f)||tr(f))return f=an(f,m.mode,g,null),f.return=m,f;xa(m,f)}return null}function j(m,f,g,v){var b=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return b!==null?null:o(m,f,""+g,v);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case aa:return g.key===b?c(m,f,g,v):null;case yn:return g.key===b?d(m,f,g,v):null;case Ns:return b=g._init,j(m,f,b(g._payload),v)}if(ur(g)||tr(g))return b!==null?null:h(m,f,g,v,null);xa(m,g)}return null}function x(m,f,g,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return m=m.get(g)||null,o(f,m,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case aa:return m=m.get(v.key===null?g:v.key)||null,c(f,m,v,b);case yn:return m=m.get(v.key===null?g:v.key)||null,d(f,m,v,b);case Ns:var k=v._init;return x(m,f,g,k(v._payload),b)}if(ur(v)||tr(v))return m=m.get(g)||null,h(f,m,v,b,null);xa(f,v)}return null}function y(m,f,g,v){for(var b=null,k=null,C=f,M=f=0,U=null;C!==null&&M<g.length;M++){C.index>M?(U=C,C=null):U=C.sibling;var Q=j(m,C,g[M],v);if(Q===null){C===null&&(C=U);break}t&&C&&Q.alternate===null&&s(m,C),f=l(Q,f,M),k===null?b=Q:k.sibling=Q,k=Q,C=U}if(M===g.length)return n(m,C),Me&&Gs(m,M),b;if(C===null){for(;M<g.length;M++)C=u(m,g[M],v),C!==null&&(f=l(C,f,M),k===null?b=C:k.sibling=C,k=C);return Me&&Gs(m,M),b}for(C=r(m,C);M<g.length;M++)U=x(C,m,M,g[M],v),U!==null&&(t&&U.alternate!==null&&C.delete(U.key===null?M:U.key),f=l(U,f,M),k===null?b=U:k.sibling=U,k=U);return t&&C.forEach(function(K){return s(m,K)}),Me&&Gs(m,M),b}function _(m,f,g,v){var b=tr(g);if(typeof b!="function")throw Error(G(150));if(g=b.call(g),g==null)throw Error(G(151));for(var k=b=null,C=f,M=f=0,U=null,Q=g.next();C!==null&&!Q.done;M++,Q=g.next()){C.index>M?(U=C,C=null):U=C.sibling;var K=j(m,C,Q.value,v);if(K===null){C===null&&(C=U);break}t&&C&&K.alternate===null&&s(m,C),f=l(K,f,M),k===null?b=K:k.sibling=K,k=K,C=U}if(Q.done)return n(m,C),Me&&Gs(m,M),b;if(C===null){for(;!Q.done;M++,Q=g.next())Q=u(m,Q.value,v),Q!==null&&(f=l(Q,f,M),k===null?b=Q:k.sibling=Q,k=Q);return Me&&Gs(m,M),b}for(C=r(m,C);!Q.done;M++,Q=g.next())Q=x(C,m,M,Q.value,v),Q!==null&&(t&&Q.alternate!==null&&C.delete(Q.key===null?M:Q.key),f=l(Q,f,M),k===null?b=Q:k.sibling=Q,k=Q);return t&&C.forEach(function(J){return s(m,J)}),Me&&Gs(m,M),b}function p(m,f,g,v){if(typeof g=="object"&&g!==null&&g.type===bn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case aa:e:{for(var b=g.key,k=f;k!==null;){if(k.key===b){if(b=g.type,b===bn){if(k.tag===7){n(m,k.sibling),f=a(k,g.props.children),f.return=m,m=f;break e}}else if(k.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ns&&Cd(b)===k.type){n(m,k.sibling),f=a(k,g.props),f.ref=lr(m,k,g),f.return=m,m=f;break e}n(m,k);break}else s(m,k);k=k.sibling}g.type===bn?(f=an(g.props.children,m.mode,v,g.key),f.return=m,m=f):(v=La(g.type,g.key,g.props,null,m.mode,v),v.ref=lr(m,f,g),v.return=m,m=v)}return i(m);case yn:e:{for(k=g.key;f!==null;){if(f.key===k)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){n(m,f.sibling),f=a(f,g.children||[]),f.return=m,m=f;break e}else{n(m,f);break}else s(m,f);f=f.sibling}f=Ni(g,m.mode,v),f.return=m,m=f}return i(m);case Ns:return k=g._init,p(m,f,k(g._payload),v)}if(ur(g))return y(m,f,g,v);if(tr(g))return _(m,f,g,v);xa(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(n(m,f.sibling),f=a(f,g),f.return=m,m=f):(n(m,f),f=bi(g,m.mode,v),f.return=m,m=f),i(m)):n(m,f)}return p}var Un=Vm(!0),Km=Vm(!1),tl=Qs(null),sl=null,Pn=null,ic=null;function oc(){ic=Pn=sl=null}function cc(t){var s=tl.current;Pe(tl),t._currentValue=s}function lo(t,s,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,r!==null&&(r.childLanes|=s)):r!==null&&(r.childLanes&s)!==s&&(r.childLanes|=s),t===n)break;t=t.return}}function An(t,s){sl=t,ic=Pn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(ft=!0),t.firstContext=null)}function Ft(t){var s=t._currentValue;if(ic!==t)if(t={context:t,memoizedValue:s,next:null},Pn===null){if(sl===null)throw Error(G(308));Pn=t,sl.dependencies={lanes:0,firstContext:t}}else Pn=Pn.next=t;return s}var Zs=null;function dc(t){Zs===null?Zs=[t]:Zs.push(t)}function Gm(t,s,n,r){var a=s.interleaved;return a===null?(n.next=n,dc(s)):(n.next=a.next,a.next=n),s.interleaved=n,hs(t,r)}function hs(t,s){t.lanes|=s;var n=t.alternate;for(n!==null&&(n.lanes|=s),n=t,t=t.return;t!==null;)t.childLanes|=s,n=t.alternate,n!==null&&(n.childLanes|=s),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _s=!1;function uc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ym(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ds(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Fs(t,s,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var a=r.pending;return a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s,hs(t,n)}return a=r.interleaved,a===null?(s.next=s,dc(r)):(s.next=a.next,a.next=s),r.interleaved=s,hs(t,n)}function Ea(t,s,n){if(s=s.updateQueue,s!==null&&(s=s.shared,(n&4194240)!==0)){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,Yo(t,n)}}function kd(t,s){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?a=l=s:l=l.next=s}else a=l=s;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=s:t.next=s,n.lastBaseUpdate=s}function nl(t,s,n,r){var a=t.updateQueue;_s=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?l=d:i.next=d,i=c;var h=t.alternate;h!==null&&(h=h.updateQueue,o=h.lastBaseUpdate,o!==i&&(o===null?h.firstBaseUpdate=d:o.next=d,h.lastBaseUpdate=c))}if(l!==null){var u=a.baseState;i=0,h=d=c=null,o=l;do{var j=o.lane,x=o.eventTime;if((r&j)===j){h!==null&&(h=h.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,_=o;switch(j=s,x=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){u=y.call(x,u,j);break e}u=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,j=typeof y=="function"?y.call(x,u,j):y,j==null)break e;u=Fe({},u,j);break e;case 2:_s=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,j=a.effects,j===null?a.effects=[o]:j.push(o))}else x={eventTime:x,lane:j,tag:o.tag,payload:o.payload,callback:o.callback,next:null},h===null?(d=h=x,c=u):h=h.next=x,i|=j;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;j=o,o=j.next,j.next=null,a.lastBaseUpdate=j,a.shared.pending=null}}while(!0);if(h===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=h,s=a.shared.interleaved,s!==null){a=s;do i|=a.lane,a=a.next;while(a!==s)}else l===null&&(a.shared.lanes=0);un|=i,t.lanes=i,t.memoizedState=u}}function Ed(t,s,n){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var r=t[s],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(G(191,a));a.call(r)}}}var Jr={},ts=Qs(Jr),Ir=Qs(Jr),Dr=Qs(Jr);function en(t){if(t===Jr)throw Error(G(174));return t}function mc(t,s){switch(Ce(Dr,s),Ce(Ir,t),Ce(ts,Jr),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:zi(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=zi(s,t)}Pe(ts),Ce(ts,s)}function Bn(){Pe(ts),Pe(Ir),Pe(Dr)}function Jm(t){en(Dr.current);var s=en(ts.current),n=zi(s,t.type);s!==n&&(Ce(Ir,t),Ce(ts,n))}function hc(t){Ir.current===t&&(Pe(ts),Pe(Ir))}var Te=Qs(0);function rl(t){for(var s=t;s!==null;){if(s.tag===13){var n=s.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pi=[];function fc(){for(var t=0;t<pi.length;t++)pi[t]._workInProgressVersionPrimary=null;pi.length=0}var Pa=ps.ReactCurrentDispatcher,xi=ps.ReactCurrentBatchConfig,dn=0,Oe=null,qe=null,Ve=null,al=!1,yr=!1,zr=0,Hx=0;function et(){throw Error(G(321))}function pc(t,s){if(s===null)return!1;for(var n=0;n<s.length&&n<t.length;n++)if(!Wt(t[n],s[n]))return!1;return!0}function xc(t,s,n,r,a,l){if(dn=l,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Pa.current=t===null||t.memoizedState===null?Yx:Jx,t=n(r,a),yr){l=0;do{if(yr=!1,zr=0,25<=l)throw Error(G(301));l+=1,Ve=qe=null,s.updateQueue=null,Pa.current=Xx,t=n(r,a)}while(yr)}if(Pa.current=ll,s=qe!==null&&qe.next!==null,dn=0,Ve=qe=Oe=null,al=!1,s)throw Error(G(300));return t}function gc(){var t=zr!==0;return zr=0,t}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?Oe.memoizedState=Ve=t:Ve=Ve.next=t,Ve}function At(){if(qe===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var s=Ve===null?Oe.memoizedState:Ve.next;if(s!==null)Ve=s,qe=t;else{if(t===null)throw Error(G(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Ve===null?Oe.memoizedState=Ve=t:Ve=Ve.next=t}return Ve}function Ur(t,s){return typeof s=="function"?s(t):s}function gi(t){var s=At(),n=s.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=qe,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var o=i=null,c=null,d=l;do{var h=d.lane;if((dn&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var u={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=u,i=r):c=c.next=u,Oe.lanes|=h,un|=h}d=d.next}while(d!==null&&d!==l);c===null?i=r:c.next=o,Wt(r,s.memoizedState)||(ft=!0),s.memoizedState=r,s.baseState=i,s.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){a=t;do l=a.lane,Oe.lanes|=l,un|=l,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[s.memoizedState,n.dispatch]}function vi(t){var s=At(),n=s.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,a=n.pending,l=s.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do l=t(l,i.action),i=i.next;while(i!==a);Wt(l,s.memoizedState)||(ft=!0),s.memoizedState=l,s.baseQueue===null&&(s.baseState=l),n.lastRenderedState=l}return[l,r]}function Xm(){}function Zm(t,s){var n=Oe,r=At(),a=s(),l=!Wt(r.memoizedState,a);if(l&&(r.memoizedState=a,ft=!0),r=r.queue,vc(sh.bind(null,n,r,t),[t]),r.getSnapshot!==s||l||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,Br(9,th.bind(null,n,r,a,s),void 0,null),Ke===null)throw Error(G(349));dn&30||eh(n,s,a)}return a}function eh(t,s,n){t.flags|=16384,t={getSnapshot:s,value:n},s=Oe.updateQueue,s===null?(s={lastEffect:null,stores:null},Oe.updateQueue=s,s.stores=[t]):(n=s.stores,n===null?s.stores=[t]:n.push(t))}function th(t,s,n,r){s.value=n,s.getSnapshot=r,nh(s)&&rh(t)}function sh(t,s,n){return n(function(){nh(s)&&rh(t)})}function nh(t){var s=t.getSnapshot;t=t.value;try{var n=s();return!Wt(t,n)}catch{return!0}}function rh(t){var s=hs(t,1);s!==null&&qt(s,t,1,-1)}function Pd(t){var s=Xt();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ur,lastRenderedState:t},s.queue=t,t=t.dispatch=Gx.bind(null,Oe,t),[s.memoizedState,t]}function Br(t,s,n,r){return t={tag:t,create:s,destroy:n,deps:r,next:null},s=Oe.updateQueue,s===null?(s={lastEffect:null,stores:null},Oe.updateQueue=s,s.lastEffect=t.next=t):(n=s.lastEffect,n===null?s.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,s.lastEffect=t)),t}function ah(){return At().memoizedState}function Ra(t,s,n,r){var a=Xt();Oe.flags|=t,a.memoizedState=Br(1|s,n,void 0,r===void 0?null:r)}function Ml(t,s,n,r){var a=At();r=r===void 0?null:r;var l=void 0;if(qe!==null){var i=qe.memoizedState;if(l=i.destroy,r!==null&&pc(r,i.deps)){a.memoizedState=Br(s,n,l,r);return}}Oe.flags|=t,a.memoizedState=Br(1|s,n,l,r)}function Rd(t,s){return Ra(8390656,8,t,s)}function vc(t,s){return Ml(2048,8,t,s)}function lh(t,s){return Ml(4,2,t,s)}function ih(t,s){return Ml(4,4,t,s)}function oh(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function ch(t,s,n){return n=n!=null?n.concat([t]):null,Ml(4,4,oh.bind(null,s,t),n)}function jc(){}function dh(t,s){var n=At();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&pc(s,r[1])?r[0]:(n.memoizedState=[t,s],t)}function uh(t,s){var n=At();s=s===void 0?null:s;var r=n.memoizedState;return r!==null&&s!==null&&pc(s,r[1])?r[0]:(t=t(),n.memoizedState=[t,s],t)}function mh(t,s,n){return dn&21?(Wt(n,s)||(n=gm(),Oe.lanes|=n,un|=n,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,ft=!0),t.memoizedState=n)}function Vx(t,s){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=xi.transition;xi.transition={};try{t(!1),s()}finally{Ne=n,xi.transition=r}}function hh(){return At().memoizedState}function Kx(t,s,n){var r=$s(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fh(t))ph(s,n);else if(n=Gm(t,s,n,r),n!==null){var a=dt();qt(n,t,r,a),xh(n,s,r)}}function Gx(t,s,n){var r=$s(t),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fh(t))ph(s,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=s.lastRenderedReducer,l!==null))try{var i=s.lastRenderedState,o=l(i,n);if(a.hasEagerState=!0,a.eagerState=o,Wt(o,i)){var c=s.interleaved;c===null?(a.next=a,dc(s)):(a.next=c.next,c.next=a),s.interleaved=a;return}}catch{}finally{}n=Gm(t,s,a,r),n!==null&&(a=dt(),qt(n,t,r,a),xh(n,s,r))}}function fh(t){var s=t.alternate;return t===Oe||s!==null&&s===Oe}function ph(t,s){yr=al=!0;var n=t.pending;n===null?s.next=s:(s.next=n.next,n.next=s),t.pending=s}function xh(t,s,n){if(n&4194240){var r=s.lanes;r&=t.pendingLanes,n|=r,s.lanes=n,Yo(t,n)}}var ll={readContext:Ft,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Yx={readContext:Ft,useCallback:function(t,s){return Xt().memoizedState=[t,s===void 0?null:s],t},useContext:Ft,useEffect:Rd,useImperativeHandle:function(t,s,n){return n=n!=null?n.concat([t]):null,Ra(4194308,4,oh.bind(null,s,t),n)},useLayoutEffect:function(t,s){return Ra(4194308,4,t,s)},useInsertionEffect:function(t,s){return Ra(4,2,t,s)},useMemo:function(t,s){var n=Xt();return s=s===void 0?null:s,t=t(),n.memoizedState=[t,s],t},useReducer:function(t,s,n){var r=Xt();return s=n!==void 0?n(s):s,r.memoizedState=r.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},r.queue=t,t=t.dispatch=Kx.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var s=Xt();return t={current:t},s.memoizedState=t},useState:Pd,useDebugValue:jc,useDeferredValue:function(t){return Xt().memoizedState=t},useTransition:function(){var t=Pd(!1),s=t[0];return t=Vx.bind(null,t[1]),Xt().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,n){var r=Oe,a=Xt();if(Me){if(n===void 0)throw Error(G(407));n=n()}else{if(n=s(),Ke===null)throw Error(G(349));dn&30||eh(r,s,n)}a.memoizedState=n;var l={value:n,getSnapshot:s};return a.queue=l,Rd(sh.bind(null,r,l,t),[t]),r.flags|=2048,Br(9,th.bind(null,r,l,n,s),void 0,null),n},useId:function(){var t=Xt(),s=Ke.identifierPrefix;if(Me){var n=cs,r=os;n=(r&~(1<<32-Qt(r)-1)).toString(32)+n,s=":"+s+"R"+n,n=zr++,0<n&&(s+="H"+n.toString(32)),s+=":"}else n=Hx++,s=":"+s+"r"+n.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Jx={readContext:Ft,useCallback:dh,useContext:Ft,useEffect:vc,useImperativeHandle:ch,useInsertionEffect:lh,useLayoutEffect:ih,useMemo:uh,useReducer:gi,useRef:ah,useState:function(){return gi(Ur)},useDebugValue:jc,useDeferredValue:function(t){var s=At();return mh(s,qe.memoizedState,t)},useTransition:function(){var t=gi(Ur)[0],s=At().memoizedState;return[t,s]},useMutableSource:Xm,useSyncExternalStore:Zm,useId:hh,unstable_isNewReconciler:!1},Xx={readContext:Ft,useCallback:dh,useContext:Ft,useEffect:vc,useImperativeHandle:ch,useInsertionEffect:lh,useLayoutEffect:ih,useMemo:uh,useReducer:vi,useRef:ah,useState:function(){return vi(Ur)},useDebugValue:jc,useDeferredValue:function(t){var s=At();return qe===null?s.memoizedState=t:mh(s,qe.memoizedState,t)},useTransition:function(){var t=vi(Ur)[0],s=At().memoizedState;return[t,s]},useMutableSource:Xm,useSyncExternalStore:Zm,useId:hh,unstable_isNewReconciler:!1};function Dt(t,s){if(t&&t.defaultProps){s=Fe({},s),t=t.defaultProps;for(var n in t)s[n]===void 0&&(s[n]=t[n]);return s}return s}function io(t,s,n,r){s=t.memoizedState,n=n(r,s),n=n==null?s:Fe({},s,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tl={isMounted:function(t){return(t=t._reactInternals)?xn(t)===t:!1},enqueueSetState:function(t,s,n){t=t._reactInternals;var r=dt(),a=$s(t),l=ds(r,a);l.payload=s,n!=null&&(l.callback=n),s=Fs(t,l,a),s!==null&&(qt(s,t,a,r),Ea(s,t,a))},enqueueReplaceState:function(t,s,n){t=t._reactInternals;var r=dt(),a=$s(t),l=ds(r,a);l.tag=1,l.payload=s,n!=null&&(l.callback=n),s=Fs(t,l,a),s!==null&&(qt(s,t,a,r),Ea(s,t,a))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var n=dt(),r=$s(t),a=ds(n,r);a.tag=2,s!=null&&(a.callback=s),s=Fs(t,a,r),s!==null&&(qt(s,t,r,n),Ea(s,t,r))}};function Md(t,s,n,r,a,l,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,l,i):s.prototype&&s.prototype.isPureReactComponent?!Lr(n,r)||!Lr(a,l):!0}function gh(t,s,n){var r=!1,a=Us,l=s.contextType;return typeof l=="object"&&l!==null?l=Ft(l):(a=gt(s)?on:rt.current,r=s.contextTypes,l=(r=r!=null)?Dn(t,a):Us),s=new s(n,l),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Tl,t.stateNode=s,s._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),s}function Td(t,s,n,r){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(n,r),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(n,r),s.state!==t&&Tl.enqueueReplaceState(s,s.state,null)}function oo(t,s,n,r){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},uc(t);var l=s.contextType;typeof l=="object"&&l!==null?a.context=Ft(l):(l=gt(s)?on:rt.current,a.context=Dn(t,l)),a.state=t.memoizedState,l=s.getDerivedStateFromProps,typeof l=="function"&&(io(t,s,l,n),a.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(s=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),s!==a.state&&Tl.enqueueReplaceState(a,a.state,null),nl(t,n,a,r),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Qn(t,s){try{var n="",r=s;do n+=Cp(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:s,stack:a,digest:null}}function ji(t,s,n){return{value:t,source:null,stack:n??null,digest:s??null}}function co(t,s){try{console.error(s.value)}catch(n){setTimeout(function(){throw n})}}var Zx=typeof WeakMap=="function"?WeakMap:Map;function vh(t,s,n){n=ds(-1,n),n.tag=3,n.payload={element:null};var r=s.value;return n.callback=function(){ol||(ol=!0,yo=r),co(t,s)},n}function jh(t,s,n){n=ds(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var a=s.value;n.payload=function(){return r(a)},n.callback=function(){co(t,s)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){co(t,s),typeof r!="function"&&(As===null?As=new Set([this]):As.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),n}function Od(t,s,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Zx;var a=new Set;r.set(s,a)}else a=r.get(s),a===void 0&&(a=new Set,r.set(s,a));a.has(n)||(a.add(n),t=hg.bind(null,t,s,n),s.then(t,t))}function Ld(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Fd(t,s,n,r,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===s?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(s=ds(-1,1),s.tag=2,Fs(n,s,1))),n.lanes|=1),t)}var eg=ps.ReactCurrentOwner,ft=!1;function ot(t,s,n,r){s.child=t===null?Km(s,null,n,r):Un(s,t.child,n,r)}function Ad(t,s,n,r,a){n=n.render;var l=s.ref;return An(s,a),r=xc(t,s,n,r,l,a),n=gc(),t!==null&&!ft?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,fs(t,s,a)):(Me&&n&&rc(s),s.flags|=1,ot(t,s,r,a),s.child)}function $d(t,s,n,r,a){if(t===null){var l=n.type;return typeof l=="function"&&!kc(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(s.tag=15,s.type=l,yh(t,s,l,r,a)):(t=La(n.type,null,r,s,s.mode,a),t.ref=s.ref,t.return=s,s.child=t)}if(l=t.child,!(t.lanes&a)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:Lr,n(i,r)&&t.ref===s.ref)return fs(t,s,a)}return s.flags|=1,t=Is(l,r),t.ref=s.ref,t.return=s,s.child=t}function yh(t,s,n,r,a){if(t!==null){var l=t.memoizedProps;if(Lr(l,r)&&t.ref===s.ref)if(ft=!1,s.pendingProps=r=l,(t.lanes&a)!==0)t.flags&131072&&(ft=!0);else return s.lanes=t.lanes,fs(t,s,a)}return uo(t,s,n,r,a)}function bh(t,s,n){var r=s.pendingProps,a=r.children,l=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Mn,_t),_t|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Ce(Mn,_t),_t|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,Ce(Mn,_t),_t|=r}else l!==null?(r=l.baseLanes|n,s.memoizedState=null):r=n,Ce(Mn,_t),_t|=r;return ot(t,s,a,n),s.child}function Nh(t,s){var n=s.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(s.flags|=512,s.flags|=2097152)}function uo(t,s,n,r,a){var l=gt(n)?on:rt.current;return l=Dn(s,l),An(s,a),n=xc(t,s,n,r,l,a),r=gc(),t!==null&&!ft?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a,fs(t,s,a)):(Me&&r&&rc(s),s.flags|=1,ot(t,s,n,a),s.child)}function Id(t,s,n,r,a){if(gt(n)){var l=!0;Xa(s)}else l=!1;if(An(s,a),s.stateNode===null)Ma(t,s),gh(s,n,r),oo(s,n,r,a),r=!0;else if(t===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var c=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ft(d):(d=gt(n)?on:rt.current,d=Dn(s,d));var h=n.getDerivedStateFromProps,u=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";u||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==r||c!==d)&&Td(s,i,r,d),_s=!1;var j=s.memoizedState;i.state=j,nl(s,r,i,a),c=s.memoizedState,o!==r||j!==c||xt.current||_s?(typeof h=="function"&&(io(s,n,h,r),c=s.memoizedState),(o=_s||Md(s,n,o,r,j,c,d))?(u||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=r,s.memoizedState=c),i.props=r,i.state=c,i.context=d,r=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),r=!1)}else{i=s.stateNode,Ym(t,s),o=s.memoizedProps,d=s.type===s.elementType?o:Dt(s.type,o),i.props=d,u=s.pendingProps,j=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ft(c):(c=gt(n)?on:rt.current,c=Dn(s,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==u||j!==c)&&Td(s,i,r,c),_s=!1,j=s.memoizedState,i.state=j,nl(s,r,i,a);var y=s.memoizedState;o!==u||j!==y||xt.current||_s?(typeof x=="function"&&(io(s,n,x,r),y=s.memoizedState),(d=_s||Md(s,n,d,r,j,y,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,c)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&j===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&j===t.memoizedState||(s.flags|=1024),s.memoizedProps=r,s.memoizedState=y),i.props=r,i.state=y,i.context=c,r=d):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&j===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&j===t.memoizedState||(s.flags|=1024),r=!1)}return mo(t,s,n,r,l,a)}function mo(t,s,n,r,a,l){Nh(t,s);var i=(s.flags&128)!==0;if(!r&&!i)return a&&_d(s,n,!1),fs(t,s,l);r=s.stateNode,eg.current=s;var o=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return s.flags|=1,t!==null&&i?(s.child=Un(s,t.child,null,l),s.child=Un(s,null,o,l)):ot(t,s,o,l),s.memoizedState=r.state,a&&_d(s,n,!0),s.child}function _h(t){var s=t.stateNode;s.pendingContext?Nd(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Nd(t,s.context,!1),mc(t,s.containerInfo)}function Dd(t,s,n,r,a){return zn(),lc(a),s.flags|=256,ot(t,s,n,r),s.child}var ho={dehydrated:null,treeContext:null,retryLane:0};function fo(t){return{baseLanes:t,cachePool:null,transitions:null}}function wh(t,s,n){var r=s.pendingProps,a=Te.current,l=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(a&2)!==0),o?(l=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),Ce(Te,a&1),t===null)return ao(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=r.children,t=r.fallback,l?(r=s.mode,l=s.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Fl(i,r,0,null),t=an(t,r,n,null),l.return=s,t.return=s,l.sibling=t,s.child=l,s.child.memoizedState=fo(n),s.memoizedState=ho,t):yc(s,i));if(a=t.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return tg(t,s,i,r,o,a,n);if(l){l=r.fallback,i=s.mode,a=t.child,o=a.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&s.child!==a?(r=s.child,r.childLanes=0,r.pendingProps=c,s.deletions=null):(r=Is(a,c),r.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=Is(o,l):(l=an(l,i,n,null),l.flags|=2),l.return=s,r.return=s,r.sibling=l,s.child=r,r=l,l=s.child,i=t.child.memoizedState,i=i===null?fo(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=t.childLanes&~n,s.memoizedState=ho,r}return l=t.child,t=l.sibling,r=Is(l,{mode:"visible",children:r.children}),!(s.mode&1)&&(r.lanes=n),r.return=s,r.sibling=null,t!==null&&(n=s.deletions,n===null?(s.deletions=[t],s.flags|=16):n.push(t)),s.child=r,s.memoizedState=null,r}function yc(t,s){return s=Fl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function ga(t,s,n,r){return r!==null&&lc(r),Un(s,t.child,null,n),t=yc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function tg(t,s,n,r,a,l,i){if(n)return s.flags&256?(s.flags&=-257,r=ji(Error(G(422))),ga(t,s,i,r)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(l=r.fallback,a=s.mode,r=Fl({mode:"visible",children:r.children},a,0,null),l=an(l,a,i,null),l.flags|=2,r.return=s,l.return=s,r.sibling=l,s.child=r,s.mode&1&&Un(s,t.child,null,i),s.child.memoizedState=fo(i),s.memoizedState=ho,l);if(!(s.mode&1))return ga(t,s,i,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var o=r.dgst;return r=o,l=Error(G(419)),r=ji(l,r,void 0),ga(t,s,i,r)}if(o=(i&t.childLanes)!==0,ft||o){if(r=Ke,r!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,hs(t,a),qt(r,t,a,-1))}return Cc(),r=ji(Error(G(421))),ga(t,s,i,r)}return a.data==="$?"?(s.flags|=128,s.child=t.child,s=fg.bind(null,t),a._reactRetry=s,null):(t=l.treeContext,wt=Ls(a.nextSibling),St=s,Me=!0,Ut=null,t!==null&&(Mt[Tt++]=os,Mt[Tt++]=cs,Mt[Tt++]=cn,os=t.id,cs=t.overflow,cn=s),s=yc(s,r.children),s.flags|=4096,s)}function zd(t,s,n){t.lanes|=s;var r=t.alternate;r!==null&&(r.lanes|=s),lo(t.return,s,n)}function yi(t,s,n,r,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=s,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function Sh(t,s,n){var r=s.pendingProps,a=r.revealOrder,l=r.tail;if(ot(t,s,r.children,n),r=Te.current,r&2)r=r&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zd(t,n,s);else if(t.tag===19)zd(t,n,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(Te,r),!(s.mode&1))s.memoizedState=null;else switch(a){case"forwards":for(n=s.child,a=null;n!==null;)t=n.alternate,t!==null&&rl(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=s.child,s.child=null):(a=n.sibling,n.sibling=null),yi(s,!1,a,n,l);break;case"backwards":for(n=null,a=s.child,s.child=null;a!==null;){if(t=a.alternate,t!==null&&rl(t)===null){s.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}yi(s,!0,n,null,l);break;case"together":yi(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ma(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function fs(t,s,n){if(t!==null&&(s.dependencies=t.dependencies),un|=s.lanes,!(n&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(G(153));if(s.child!==null){for(t=s.child,n=Is(t,t.pendingProps),s.child=n,n.return=s;t.sibling!==null;)t=t.sibling,n=n.sibling=Is(t,t.pendingProps),n.return=s;n.sibling=null}return s.child}function sg(t,s,n){switch(s.tag){case 3:_h(s),zn();break;case 5:Jm(s);break;case 1:gt(s.type)&&Xa(s);break;case 4:mc(s,s.stateNode.containerInfo);break;case 10:var r=s.type._context,a=s.memoizedProps.value;Ce(tl,r._currentValue),r._currentValue=a;break;case 13:if(r=s.memoizedState,r!==null)return r.dehydrated!==null?(Ce(Te,Te.current&1),s.flags|=128,null):n&s.child.childLanes?wh(t,s,n):(Ce(Te,Te.current&1),t=fs(t,s,n),t!==null?t.sibling:null);Ce(Te,Te.current&1);break;case 19:if(r=(n&s.childLanes)!==0,t.flags&128){if(r)return Sh(t,s,n);s.flags|=128}if(a=s.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ce(Te,Te.current),r)break;return null;case 22:case 23:return s.lanes=0,bh(t,s,n)}return fs(t,s,n)}var Ch,po,kh,Eh;Ch=function(t,s){for(var n=s.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break;for(;n.sibling===null;){if(n.return===null||n.return===s)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};po=function(){};kh=function(t,s,n,r){var a=t.memoizedProps;if(a!==r){t=s.stateNode,en(ts.current);var l=null;switch(n){case"input":a=Ai(t,a),r=Ai(t,r),l=[];break;case"select":a=Fe({},a,{value:void 0}),r=Fe({},r,{value:void 0}),l=[];break;case"textarea":a=Di(t,a),r=Di(t,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ya)}Ui(n,r);var i;n=null;for(d in a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(kr.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in r){var c=r[d];if(o=a!=null?a[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(kr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ee("scroll",t),l||o===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(s.updateQueue=d)&&(s.flags|=4)}};Eh=function(t,s,n,r){n!==r&&(s.flags|=4)};function ir(t,s){if(!Me)switch(t.tailMode){case"hidden":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tt(t){var s=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(s)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=r,t.childLanes=n,s}function ng(t,s,n){var r=s.pendingProps;switch(ac(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(s),null;case 1:return gt(s.type)&&Ja(),tt(s),null;case 3:return r=s.stateNode,Bn(),Pe(xt),Pe(rt),fc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pa(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ut!==null&&(_o(Ut),Ut=null))),po(t,s),tt(s),null;case 5:hc(s);var a=en(Dr.current);if(n=s.type,t!==null&&s.stateNode!=null)kh(t,s,n,r,a),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!r){if(s.stateNode===null)throw Error(G(166));return tt(s),null}if(t=en(ts.current),pa(s)){r=s.stateNode,n=s.type;var l=s.memoizedProps;switch(r[Zt]=s,r[$r]=l,t=(s.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(a=0;a<hr.length;a++)Ee(hr[a],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Gc(r,l),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ee("invalid",r);break;case"textarea":Jc(r,l),Ee("invalid",r)}Ui(n,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?r.textContent!==o&&(l.suppressHydrationWarning!==!0&&fa(r.textContent,o,t),a=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&fa(r.textContent,o,t),a=["children",""+o]):kr.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Ee("scroll",r)}switch(n){case"input":la(r),Yc(r,l,!0);break;case"textarea":la(r),Xc(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Ya)}r=a,s.updateQueue=r,r!==null&&(s.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=i.createElement(n,{is:r.is}):(t=i.createElement(n),n==="select"&&(i=t,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):t=i.createElementNS(t,n),t[Zt]=s,t[$r]=r,Ch(t,s,!1,!1),s.stateNode=t;e:{switch(i=Bi(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),a=r;break;case"iframe":case"object":case"embed":Ee("load",t),a=r;break;case"video":case"audio":for(a=0;a<hr.length;a++)Ee(hr[a],t);a=r;break;case"source":Ee("error",t),a=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),a=r;break;case"details":Ee("toggle",t),a=r;break;case"input":Gc(t,r),a=Ai(t,r),Ee("invalid",t);break;case"option":a=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},a=Fe({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Jc(t,r),a=Di(t,r),Ee("invalid",t);break;default:a=r}Ui(n,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?am(t,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&nm(t,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Er(t,c):typeof c=="number"&&Er(t,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(kr.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ee("scroll",t):c!=null&&qo(t,l,c,i))}switch(n){case"input":la(t),Yc(t,r,!1);break;case"textarea":la(t),Xc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zs(r.value));break;case"select":t.multiple=!!r.multiple,l=r.value,l!=null?Tn(t,!!r.multiple,l,!1):r.defaultValue!=null&&Tn(t,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=Ya)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return tt(s),null;case 6:if(t&&s.stateNode!=null)Eh(t,s,t.memoizedProps,r);else{if(typeof r!="string"&&s.stateNode===null)throw Error(G(166));if(n=en(Dr.current),en(ts.current),pa(s)){if(r=s.stateNode,n=s.memoizedProps,r[Zt]=s,(l=r.nodeValue!==n)&&(t=St,t!==null))switch(t.tag){case 3:fa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&fa(r.nodeValue,n,(t.mode&1)!==0)}l&&(s.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=s,s.stateNode=r}return tt(s),null;case 13:if(Pe(Te),r=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&wt!==null&&s.mode&1&&!(s.flags&128))Hm(),zn(),s.flags|=98560,l=!1;else if(l=pa(s),r!==null&&r.dehydrated!==null){if(t===null){if(!l)throw Error(G(318));if(l=s.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(G(317));l[Zt]=s}else zn(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;tt(s),l=!1}else Ut!==null&&(_o(Ut),Ut=null),l=!0;if(!l)return s.flags&65536?s:null}return s.flags&128?(s.lanes=n,s):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(s.child.flags|=8192,s.mode&1&&(t===null||Te.current&1?We===0&&(We=3):Cc())),s.updateQueue!==null&&(s.flags|=4),tt(s),null);case 4:return Bn(),po(t,s),t===null&&Fr(s.stateNode.containerInfo),tt(s),null;case 10:return cc(s.type._context),tt(s),null;case 17:return gt(s.type)&&Ja(),tt(s),null;case 19:if(Pe(Te),l=s.memoizedState,l===null)return tt(s),null;if(r=(s.flags&128)!==0,i=l.rendering,i===null)if(r)ir(l,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=rl(t),i!==null){for(s.flags|=128,ir(l,!1),r=i.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),s.subtreeFlags=0,r=n,n=s.child;n!==null;)l=n,t=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,t=i.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(Te,Te.current&1|2),s.child}t=t.sibling}l.tail!==null&&Ie()>qn&&(s.flags|=128,r=!0,ir(l,!1),s.lanes=4194304)}else{if(!r)if(t=rl(i),t!==null){if(s.flags|=128,r=!0,n=t.updateQueue,n!==null&&(s.updateQueue=n,s.flags|=4),ir(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Me)return tt(s),null}else 2*Ie()-l.renderingStartTime>qn&&n!==1073741824&&(s.flags|=128,r=!0,ir(l,!1),s.lanes=4194304);l.isBackwards?(i.sibling=s.child,s.child=i):(n=l.last,n!==null?n.sibling=i:s.child=i,l.last=i)}return l.tail!==null?(s=l.tail,l.rendering=s,l.tail=s.sibling,l.renderingStartTime=Ie(),s.sibling=null,n=Te.current,Ce(Te,r?n&1|2:n&1),s):(tt(s),null);case 22:case 23:return Sc(),r=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(s.flags|=8192),r&&s.mode&1?_t&1073741824&&(tt(s),s.subtreeFlags&6&&(s.flags|=8192)):tt(s),null;case 24:return null;case 25:return null}throw Error(G(156,s.tag))}function rg(t,s){switch(ac(s),s.tag){case 1:return gt(s.type)&&Ja(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Bn(),Pe(xt),Pe(rt),fc(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return hc(s),null;case 13:if(Pe(Te),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(G(340));zn()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Pe(Te),null;case 4:return Bn(),null;case 10:return cc(s.type._context),null;case 22:case 23:return Sc(),null;case 24:return null;default:return null}}var va=!1,st=!1,ag=typeof WeakSet=="function"?WeakSet:Set,le=null;function Rn(t,s){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,s,r)}else n.current=null}function xo(t,s,n){try{n()}catch(r){Ae(t,s,r)}}var Ud=!1;function lg(t,s){if(Xi=Va,t=Om(),nc(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,o=-1,c=-1,d=0,h=0,u=t,j=null;t:for(;;){for(var x;u!==n||a!==0&&u.nodeType!==3||(o=i+a),u!==l||r!==0&&u.nodeType!==3||(c=i+r),u.nodeType===3&&(i+=u.nodeValue.length),(x=u.firstChild)!==null;)j=u,u=x;for(;;){if(u===t)break t;if(j===n&&++d===a&&(o=i),j===l&&++h===r&&(c=i),(x=u.nextSibling)!==null)break;u=j,j=u.parentNode}u=x}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zi={focusedElem:t,selectionRange:n},Va=!1,le=s;le!==null;)if(s=le,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,le=t;else for(;le!==null;){s=le;try{var y=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,p=y.memoizedState,m=s.stateNode,f=m.getSnapshotBeforeUpdate(s.elementType===s.type?_:Dt(s.type,_),p);m.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=s.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(v){Ae(s,s.return,v)}if(t=s.sibling,t!==null){t.return=s.return,le=t;break}le=s.return}return y=Ud,Ud=!1,y}function br(t,s,n){var r=s.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&xo(s,n,l)}a=a.next}while(a!==r)}}function Ol(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==s)}}function go(t){var s=t.ref;if(s!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof s=="function"?s(t):s.current=t}}function Ph(t){var s=t.alternate;s!==null&&(t.alternate=null,Ph(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Zt],delete s[$r],delete s[so],delete s[Bx],delete s[Qx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rh(t){return t.tag===5||t.tag===3||t.tag===4}function Bd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vo(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.nodeType===8?n.parentNode.insertBefore(t,s):n.insertBefore(t,s):(n.nodeType===8?(s=n.parentNode,s.insertBefore(t,n)):(s=n,s.appendChild(t)),n=n._reactRootContainer,n!=null||s.onclick!==null||(s.onclick=Ya));else if(r!==4&&(t=t.child,t!==null))for(vo(t,s,n),t=t.sibling;t!==null;)vo(t,s,n),t=t.sibling}function jo(t,s,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,s?n.insertBefore(t,s):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jo(t,s,n),t=t.sibling;t!==null;)jo(t,s,n),t=t.sibling}var Ge=null,zt=!1;function bs(t,s,n){for(n=n.child;n!==null;)Mh(t,s,n),n=n.sibling}function Mh(t,s,n){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(Sl,n)}catch{}switch(n.tag){case 5:st||Rn(n,s);case 6:var r=Ge,a=zt;Ge=null,bs(t,s,n),Ge=r,zt=a,Ge!==null&&(zt?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(zt?(t=Ge,n=n.stateNode,t.nodeType===8?hi(t.parentNode,n):t.nodeType===1&&hi(t,n),Tr(t)):hi(Ge,n.stateNode));break;case 4:r=Ge,a=zt,Ge=n.stateNode.containerInfo,zt=!0,bs(t,s,n),Ge=r,zt=a;break;case 0:case 11:case 14:case 15:if(!st&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&xo(n,s,i),a=a.next}while(a!==r)}bs(t,s,n);break;case 1:if(!st&&(Rn(n,s),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Ae(n,s,o)}bs(t,s,n);break;case 21:bs(t,s,n);break;case 22:n.mode&1?(st=(r=st)||n.memoizedState!==null,bs(t,s,n),st=r):bs(t,s,n);break;default:bs(t,s,n)}}function Qd(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ag),s.forEach(function(r){var a=pg.bind(null,t,r);n.has(r)||(n.add(r),r.then(a,a))})}}function It(t,s){var n=s.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=t,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:Ge=o.stateNode,zt=!1;break e;case 3:Ge=o.stateNode.containerInfo,zt=!0;break e;case 4:Ge=o.stateNode.containerInfo,zt=!0;break e}o=o.return}if(Ge===null)throw Error(G(160));Mh(l,i,a),Ge=null,zt=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ae(a,s,d)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Th(s,t),s=s.sibling}function Th(t,s){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(It(s,t),Yt(t),r&4){try{br(3,t,t.return),Ol(3,t)}catch(_){Ae(t,t.return,_)}try{br(5,t,t.return)}catch(_){Ae(t,t.return,_)}}break;case 1:It(s,t),Yt(t),r&512&&n!==null&&Rn(n,n.return);break;case 5:if(It(s,t),Yt(t),r&512&&n!==null&&Rn(n,n.return),t.flags&32){var a=t.stateNode;try{Er(a,"")}catch(_){Ae(t,t.return,_)}}if(r&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,i=n!==null?n.memoizedProps:l,o=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&em(a,l),Bi(o,i);var d=Bi(o,l);for(i=0;i<c.length;i+=2){var h=c[i],u=c[i+1];h==="style"?am(a,u):h==="dangerouslySetInnerHTML"?nm(a,u):h==="children"?Er(a,u):qo(a,h,u,d)}switch(o){case"input":$i(a,l);break;case"textarea":tm(a,l);break;case"select":var j=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Tn(a,!!l.multiple,x,!1):j!==!!l.multiple&&(l.defaultValue!=null?Tn(a,!!l.multiple,l.defaultValue,!0):Tn(a,!!l.multiple,l.multiple?[]:"",!1))}a[$r]=l}catch(_){Ae(t,t.return,_)}}break;case 6:if(It(s,t),Yt(t),r&4){if(t.stateNode===null)throw Error(G(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(_){Ae(t,t.return,_)}}break;case 3:if(It(s,t),Yt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Tr(s.containerInfo)}catch(_){Ae(t,t.return,_)}break;case 4:It(s,t),Yt(t);break;case 13:It(s,t),Yt(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(_c=Ie())),r&4&&Qd(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(st=(d=st)||h,It(s,t),st=d):It(s,t),Yt(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(le=t,h=t.child;h!==null;){for(u=le=h;le!==null;){switch(j=le,x=j.child,j.tag){case 0:case 11:case 14:case 15:br(4,j,j.return);break;case 1:Rn(j,j.return);var y=j.stateNode;if(typeof y.componentWillUnmount=="function"){r=j,n=j.return;try{s=r,y.props=s.memoizedProps,y.state=s.memoizedState,y.componentWillUnmount()}catch(_){Ae(r,n,_)}}break;case 5:Rn(j,j.return);break;case 22:if(j.memoizedState!==null){Wd(u);continue}}x!==null?(x.return=j,le=x):Wd(u)}h=h.sibling}e:for(h=null,u=t;;){if(u.tag===5){if(h===null){h=u;try{a=u.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=u.stateNode,c=u.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=rm("display",i))}catch(_){Ae(t,t.return,_)}}}else if(u.tag===6){if(h===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(_){Ae(t,t.return,_)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===t)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===t)break e;for(;u.sibling===null;){if(u.return===null||u.return===t)break e;h===u&&(h=null),u=u.return}h===u&&(h=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:It(s,t),Yt(t),r&4&&Qd(t);break;case 21:break;default:It(s,t),Yt(t)}}function Yt(t){var s=t.flags;if(s&2){try{e:{for(var n=t.return;n!==null;){if(Rh(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Er(a,""),r.flags&=-33);var l=Bd(t);jo(t,l,a);break;case 3:case 4:var i=r.stateNode.containerInfo,o=Bd(t);vo(t,o,i);break;default:throw Error(G(161))}}catch(c){Ae(t,t.return,c)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function ig(t,s,n){le=t,Oh(t)}function Oh(t,s,n){for(var r=(t.mode&1)!==0;le!==null;){var a=le,l=a.child;if(a.tag===22&&r){var i=a.memoizedState!==null||va;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||st;o=va;var d=st;if(va=i,(st=c)&&!d)for(le=a;le!==null;)i=le,c=i.child,i.tag===22&&i.memoizedState!==null?Hd(a):c!==null?(c.return=i,le=c):Hd(a);for(;l!==null;)le=l,Oh(l),l=l.sibling;le=a,va=o,st=d}qd(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,le=l):qd(t)}}function qd(t){for(;le!==null;){var s=le;if(s.flags&8772){var n=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:st||Ol(5,s);break;case 1:var r=s.stateNode;if(s.flags&4&&!st)if(n===null)r.componentDidMount();else{var a=s.elementType===s.type?n.memoizedProps:Dt(s.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=s.updateQueue;l!==null&&Ed(s,l,r);break;case 3:var i=s.updateQueue;if(i!==null){if(n=null,s.child!==null)switch(s.child.tag){case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}Ed(s,i,n)}break;case 5:var o=s.stateNode;if(n===null&&s.flags&4){n=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var d=s.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var u=h.dehydrated;u!==null&&Tr(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}st||s.flags&512&&go(s)}catch(j){Ae(s,s.return,j)}}if(s===t){le=null;break}if(n=s.sibling,n!==null){n.return=s.return,le=n;break}le=s.return}}function Wd(t){for(;le!==null;){var s=le;if(s===t){le=null;break}var n=s.sibling;if(n!==null){n.return=s.return,le=n;break}le=s.return}}function Hd(t){for(;le!==null;){var s=le;try{switch(s.tag){case 0:case 11:case 15:var n=s.return;try{Ol(4,s)}catch(c){Ae(s,n,c)}break;case 1:var r=s.stateNode;if(typeof r.componentDidMount=="function"){var a=s.return;try{r.componentDidMount()}catch(c){Ae(s,a,c)}}var l=s.return;try{go(s)}catch(c){Ae(s,l,c)}break;case 5:var i=s.return;try{go(s)}catch(c){Ae(s,i,c)}}}catch(c){Ae(s,s.return,c)}if(s===t){le=null;break}var o=s.sibling;if(o!==null){o.return=s.return,le=o;break}le=s.return}}var og=Math.ceil,il=ps.ReactCurrentDispatcher,bc=ps.ReactCurrentOwner,Lt=ps.ReactCurrentBatchConfig,je=0,Ke=null,Be=null,Xe=0,_t=0,Mn=Qs(0),We=0,Qr=null,un=0,Ll=0,Nc=0,Nr=null,ht=null,_c=0,qn=1/0,ls=null,ol=!1,yo=null,As=null,ja=!1,Es=null,cl=0,_r=0,bo=null,Ta=-1,Oa=0;function dt(){return je&6?Ie():Ta!==-1?Ta:Ta=Ie()}function $s(t){return t.mode&1?je&2&&Xe!==0?Xe&-Xe:Wx.transition!==null?(Oa===0&&(Oa=gm()),Oa):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:wm(t.type)),t):1}function qt(t,s,n,r){if(50<_r)throw _r=0,bo=null,Error(G(185));Kr(t,n,r),(!(je&2)||t!==Ke)&&(t===Ke&&(!(je&2)&&(Ll|=n),We===4&&Cs(t,Xe)),vt(t,r),n===1&&je===0&&!(s.mode&1)&&(qn=Ie()+500,Rl&&qs()))}function vt(t,s){var n=t.callbackNode;Wp(t,s);var r=Ha(t,t===Ke?Xe:0);if(r===0)n!==null&&td(n),t.callbackNode=null,t.callbackPriority=0;else if(s=r&-r,t.callbackPriority!==s){if(n!=null&&td(n),s===1)t.tag===0?qx(Vd.bind(null,t)):Qm(Vd.bind(null,t)),zx(function(){!(je&6)&&qs()}),n=null;else{switch(vm(r)){case 1:n=Go;break;case 4:n=pm;break;case 16:n=Wa;break;case 536870912:n=xm;break;default:n=Wa}n=Uh(n,Lh.bind(null,t))}t.callbackPriority=s,t.callbackNode=n}}function Lh(t,s){if(Ta=-1,Oa=0,je&6)throw Error(G(327));var n=t.callbackNode;if($n()&&t.callbackNode!==n)return null;var r=Ha(t,t===Ke?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||s)s=dl(t,r);else{s=r;var a=je;je|=2;var l=Ah();(Ke!==t||Xe!==s)&&(ls=null,qn=Ie()+500,rn(t,s));do try{ug();break}catch(o){Fh(t,o)}while(!0);oc(),il.current=l,je=a,Be!==null?s=0:(Ke=null,Xe=0,s=We)}if(s!==0){if(s===2&&(a=Vi(t),a!==0&&(r=a,s=No(t,a))),s===1)throw n=Qr,rn(t,0),Cs(t,r),vt(t,Ie()),n;if(s===6)Cs(t,r);else{if(a=t.current.alternate,!(r&30)&&!cg(a)&&(s=dl(t,r),s===2&&(l=Vi(t),l!==0&&(r=l,s=No(t,l))),s===1))throw n=Qr,rn(t,0),Cs(t,r),vt(t,Ie()),n;switch(t.finishedWork=a,t.finishedLanes=r,s){case 0:case 1:throw Error(G(345));case 2:Ys(t,ht,ls);break;case 3:if(Cs(t,r),(r&130023424)===r&&(s=_c+500-Ie(),10<s)){if(Ha(t,0)!==0)break;if(a=t.suspendedLanes,(a&r)!==r){dt(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=to(Ys.bind(null,t,ht,ls),s);break}Ys(t,ht,ls);break;case 4:if(Cs(t,r),(r&4194240)===r)break;for(s=t.eventTimes,a=-1;0<r;){var i=31-Qt(r);l=1<<i,i=s[i],i>a&&(a=i),r&=~l}if(r=a,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*og(r/1960))-r,10<r){t.timeoutHandle=to(Ys.bind(null,t,ht,ls),r);break}Ys(t,ht,ls);break;case 5:Ys(t,ht,ls);break;default:throw Error(G(329))}}}return vt(t,Ie()),t.callbackNode===n?Lh.bind(null,t):null}function No(t,s){var n=Nr;return t.current.memoizedState.isDehydrated&&(rn(t,s).flags|=256),t=dl(t,s),t!==2&&(s=ht,ht=n,s!==null&&_o(s)),t}function _o(t){ht===null?ht=t:ht.push.apply(ht,t)}function cg(t){for(var s=t;;){if(s.flags&16384){var n=s.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!Wt(l(),a))return!1}catch{return!1}}}if(n=s.child,s.subtreeFlags&16384&&n!==null)n.return=s,s=n;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Cs(t,s){for(s&=~Nc,s&=~Ll,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var n=31-Qt(s),r=1<<n;t[n]=-1,s&=~r}}function Vd(t){if(je&6)throw Error(G(327));$n();var s=Ha(t,0);if(!(s&1))return vt(t,Ie()),null;var n=dl(t,s);if(t.tag!==0&&n===2){var r=Vi(t);r!==0&&(s=r,n=No(t,r))}if(n===1)throw n=Qr,rn(t,0),Cs(t,s),vt(t,Ie()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Ys(t,ht,ls),vt(t,Ie()),null}function wc(t,s){var n=je;je|=1;try{return t(s)}finally{je=n,je===0&&(qn=Ie()+500,Rl&&qs())}}function mn(t){Es!==null&&Es.tag===0&&!(je&6)&&$n();var s=je;je|=1;var n=Lt.transition,r=Ne;try{if(Lt.transition=null,Ne=1,t)return t()}finally{Ne=r,Lt.transition=n,je=s,!(je&6)&&qs()}}function Sc(){_t=Mn.current,Pe(Mn)}function rn(t,s){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Dx(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(ac(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ja();break;case 3:Bn(),Pe(xt),Pe(rt),fc();break;case 5:hc(r);break;case 4:Bn();break;case 13:Pe(Te);break;case 19:Pe(Te);break;case 10:cc(r.type._context);break;case 22:case 23:Sc()}n=n.return}if(Ke=t,Be=t=Is(t.current,null),Xe=_t=s,We=0,Qr=null,Nc=Ll=un=0,ht=Nr=null,Zs!==null){for(s=0;s<Zs.length;s++)if(n=Zs[s],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var i=l.next;l.next=a,r.next=i}n.pending=r}Zs=null}return t}function Fh(t,s){do{var n=Be;try{if(oc(),Pa.current=ll,al){for(var r=Oe.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}al=!1}if(dn=0,Ve=qe=Oe=null,yr=!1,zr=0,bc.current=null,n===null||n.return===null){We=1,Qr=s,Be=null;break}e:{var l=t,i=n.return,o=n,c=s;if(s=Xe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=o,u=h.tag;if(!(h.mode&1)&&(u===0||u===11||u===15)){var j=h.alternate;j?(h.updateQueue=j.updateQueue,h.memoizedState=j.memoizedState,h.lanes=j.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=Ld(i);if(x!==null){x.flags&=-257,Fd(x,i,o,l,s),x.mode&1&&Od(l,d,s),s=x,c=d;var y=s.updateQueue;if(y===null){var _=new Set;_.add(c),s.updateQueue=_}else y.add(c);break e}else{if(!(s&1)){Od(l,d,s),Cc();break e}c=Error(G(426))}}else if(Me&&o.mode&1){var p=Ld(i);if(p!==null){!(p.flags&65536)&&(p.flags|=256),Fd(p,i,o,l,s),lc(Qn(c,o));break e}}l=c=Qn(c,o),We!==4&&(We=2),Nr===null?Nr=[l]:Nr.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,s&=-s,l.lanes|=s;var m=vh(l,c,s);kd(l,m);break e;case 1:o=c;var f=l.type,g=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(As===null||!As.has(g)))){l.flags|=65536,s&=-s,l.lanes|=s;var v=jh(l,o,s);kd(l,v);break e}}l=l.return}while(l!==null)}Ih(n)}catch(b){s=b,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function Ah(){var t=il.current;return il.current=ll,t===null?ll:t}function Cc(){(We===0||We===3||We===2)&&(We=4),Ke===null||!(un&268435455)&&!(Ll&268435455)||Cs(Ke,Xe)}function dl(t,s){var n=je;je|=2;var r=Ah();(Ke!==t||Xe!==s)&&(ls=null,rn(t,s));do try{dg();break}catch(a){Fh(t,a)}while(!0);if(oc(),je=n,il.current=r,Be!==null)throw Error(G(261));return Ke=null,Xe=0,We}function dg(){for(;Be!==null;)$h(Be)}function ug(){for(;Be!==null&&!Ap();)$h(Be)}function $h(t){var s=zh(t.alternate,t,_t);t.memoizedProps=t.pendingProps,s===null?Ih(t):Be=s,bc.current=null}function Ih(t){var s=t;do{var n=s.alternate;if(t=s.return,s.flags&32768){if(n=rg(n,s),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Be=null;return}}else if(n=ng(n,s,_t),n!==null){Be=n;return}if(s=s.sibling,s!==null){Be=s;return}Be=s=t}while(s!==null);We===0&&(We=5)}function Ys(t,s,n){var r=Ne,a=Lt.transition;try{Lt.transition=null,Ne=1,mg(t,s,n,r)}finally{Lt.transition=a,Ne=r}return null}function mg(t,s,n,r){do $n();while(Es!==null);if(je&6)throw Error(G(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(Hp(t,l),t===Ke&&(Be=Ke=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ja||(ja=!0,Uh(Wa,function(){return $n(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Lt.transition,Lt.transition=null;var i=Ne;Ne=1;var o=je;je|=4,bc.current=null,lg(t,n),Th(n,t),Tx(Zi),Va=!!Xi,Zi=Xi=null,t.current=n,ig(n),$p(),je=o,Ne=i,Lt.transition=l}else t.current=n;if(ja&&(ja=!1,Es=t,cl=a),l=t.pendingLanes,l===0&&(As=null),zp(n.stateNode),vt(t,Ie()),s!==null)for(r=t.onRecoverableError,n=0;n<s.length;n++)a=s[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(ol)throw ol=!1,t=yo,yo=null,t;return cl&1&&t.tag!==0&&$n(),l=t.pendingLanes,l&1?t===bo?_r++:(_r=0,bo=t):_r=0,qs(),null}function $n(){if(Es!==null){var t=vm(cl),s=Lt.transition,n=Ne;try{if(Lt.transition=null,Ne=16>t?16:t,Es===null)var r=!1;else{if(t=Es,Es=null,cl=0,je&6)throw Error(G(331));var a=je;for(je|=4,le=t.current;le!==null;){var l=le,i=l.child;if(le.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(le=d;le!==null;){var h=le;switch(h.tag){case 0:case 11:case 15:br(8,h,l)}var u=h.child;if(u!==null)u.return=h,le=u;else for(;le!==null;){h=le;var j=h.sibling,x=h.return;if(Ph(h),h===d){le=null;break}if(j!==null){j.return=x,le=j;break}le=x}}}var y=l.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var p=_.sibling;_.sibling=null,_=p}while(_!==null)}}le=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,le=i;else e:for(;le!==null;){if(l=le,l.flags&2048)switch(l.tag){case 0:case 11:case 15:br(9,l,l.return)}var m=l.sibling;if(m!==null){m.return=l.return,le=m;break e}le=l.return}}var f=t.current;for(le=f;le!==null;){i=le;var g=i.child;if(i.subtreeFlags&2064&&g!==null)g.return=i,le=g;else e:for(i=f;le!==null;){if(o=le,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Ol(9,o)}}catch(b){Ae(o,o.return,b)}if(o===i){le=null;break e}var v=o.sibling;if(v!==null){v.return=o.return,le=v;break e}le=o.return}}if(je=a,qs(),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(Sl,t)}catch{}r=!0}return r}finally{Ne=n,Lt.transition=s}}return!1}function Kd(t,s,n){s=Qn(n,s),s=vh(t,s,1),t=Fs(t,s,1),s=dt(),t!==null&&(Kr(t,1,s),vt(t,s))}function Ae(t,s,n){if(t.tag===3)Kd(t,t,n);else for(;s!==null;){if(s.tag===3){Kd(s,t,n);break}else if(s.tag===1){var r=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(As===null||!As.has(r))){t=Qn(n,t),t=jh(s,t,1),s=Fs(s,t,1),t=dt(),s!==null&&(Kr(s,1,t),vt(s,t));break}}s=s.return}}function hg(t,s,n){var r=t.pingCache;r!==null&&r.delete(s),s=dt(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(Xe&n)===n&&(We===4||We===3&&(Xe&130023424)===Xe&&500>Ie()-_c?rn(t,0):Nc|=n),vt(t,s)}function Dh(t,s){s===0&&(t.mode&1?(s=ca,ca<<=1,!(ca&130023424)&&(ca=4194304)):s=1);var n=dt();t=hs(t,s),t!==null&&(Kr(t,s,n),vt(t,n))}function fg(t){var s=t.memoizedState,n=0;s!==null&&(n=s.retryLane),Dh(t,n)}function pg(t,s){var n=0;switch(t.tag){case 13:var r=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(s),Dh(t,n)}var zh;zh=function(t,s,n){if(t!==null)if(t.memoizedProps!==s.pendingProps||xt.current)ft=!0;else{if(!(t.lanes&n)&&!(s.flags&128))return ft=!1,sg(t,s,n);ft=!!(t.flags&131072)}else ft=!1,Me&&s.flags&1048576&&qm(s,el,s.index);switch(s.lanes=0,s.tag){case 2:var r=s.type;Ma(t,s),t=s.pendingProps;var a=Dn(s,rt.current);An(s,n),a=xc(null,s,r,t,a,n);var l=gc();return s.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,gt(r)?(l=!0,Xa(s)):l=!1,s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,uc(s),a.updater=Tl,s.stateNode=a,a._reactInternals=s,oo(s,r,t,n),s=mo(null,s,r,!0,l,n)):(s.tag=0,Me&&l&&rc(s),ot(null,s,a,n),s=s.child),s;case 16:r=s.elementType;e:{switch(Ma(t,s),t=s.pendingProps,a=r._init,r=a(r._payload),s.type=r,a=s.tag=gg(r),t=Dt(r,t),a){case 0:s=uo(null,s,r,t,n);break e;case 1:s=Id(null,s,r,t,n);break e;case 11:s=Ad(null,s,r,t,n);break e;case 14:s=$d(null,s,r,Dt(r.type,t),n);break e}throw Error(G(306,r,""))}return s;case 0:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Dt(r,a),uo(t,s,r,a,n);case 1:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Dt(r,a),Id(t,s,r,a,n);case 3:e:{if(_h(s),t===null)throw Error(G(387));r=s.pendingProps,l=s.memoizedState,a=l.element,Ym(t,s),nl(s,r,null,n);var i=s.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=l,s.memoizedState=l,s.flags&256){a=Qn(Error(G(423)),s),s=Dd(t,s,r,n,a);break e}else if(r!==a){a=Qn(Error(G(424)),s),s=Dd(t,s,r,n,a);break e}else for(wt=Ls(s.stateNode.containerInfo.firstChild),St=s,Me=!0,Ut=null,n=Km(s,null,r,n),s.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zn(),r===a){s=fs(t,s,n);break e}ot(t,s,r,n)}s=s.child}return s;case 5:return Jm(s),t===null&&ao(s),r=s.type,a=s.pendingProps,l=t!==null?t.memoizedProps:null,i=a.children,eo(r,a)?i=null:l!==null&&eo(r,l)&&(s.flags|=32),Nh(t,s),ot(t,s,i,n),s.child;case 6:return t===null&&ao(s),null;case 13:return wh(t,s,n);case 4:return mc(s,s.stateNode.containerInfo),r=s.pendingProps,t===null?s.child=Un(s,null,r,n):ot(t,s,r,n),s.child;case 11:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Dt(r,a),Ad(t,s,r,a,n);case 7:return ot(t,s,s.pendingProps,n),s.child;case 8:return ot(t,s,s.pendingProps.children,n),s.child;case 12:return ot(t,s,s.pendingProps.children,n),s.child;case 10:e:{if(r=s.type._context,a=s.pendingProps,l=s.memoizedProps,i=a.value,Ce(tl,r._currentValue),r._currentValue=i,l!==null)if(Wt(l.value,i)){if(l.children===a.children&&!xt.current){s=fs(t,s,n);break e}}else for(l=s.child,l!==null&&(l.return=s);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===r){if(l.tag===1){c=ds(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),lo(l.return,n,s),o.lanes|=n;break}c=c.next}}else if(l.tag===10)i=l.type===s.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(G(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),lo(i,n,s),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===s){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}ot(t,s,a.children,n),s=s.child}return s;case 9:return a=s.type,r=s.pendingProps.children,An(s,n),a=Ft(a),r=r(a),s.flags|=1,ot(t,s,r,n),s.child;case 14:return r=s.type,a=Dt(r,s.pendingProps),a=Dt(r.type,a),$d(t,s,r,a,n);case 15:return yh(t,s,s.type,s.pendingProps,n);case 17:return r=s.type,a=s.pendingProps,a=s.elementType===r?a:Dt(r,a),Ma(t,s),s.tag=1,gt(r)?(t=!0,Xa(s)):t=!1,An(s,n),gh(s,r,a),oo(s,r,a,n),mo(null,s,r,!0,t,n);case 19:return Sh(t,s,n);case 22:return bh(t,s,n)}throw Error(G(156,s.tag))};function Uh(t,s){return fm(t,s)}function xg(t,s,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,s,n,r){return new xg(t,s,n,r)}function kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gg(t){if(typeof t=="function")return kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ho)return 11;if(t===Vo)return 14}return 2}function Is(t,s){var n=t.alternate;return n===null?(n=Ot(t.tag,s,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=s,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,s=t.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function La(t,s,n,r,a,l){var i=2;if(r=t,typeof t=="function")kc(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case bn:return an(n.children,a,l,s);case Wo:i=8,a|=8;break;case Ti:return t=Ot(12,n,s,a|2),t.elementType=Ti,t.lanes=l,t;case Oi:return t=Ot(13,n,s,a),t.elementType=Oi,t.lanes=l,t;case Li:return t=Ot(19,n,s,a),t.elementType=Li,t.lanes=l,t;case Ju:return Fl(n,a,l,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Gu:i=10;break e;case Yu:i=9;break e;case Ho:i=11;break e;case Vo:i=14;break e;case Ns:i=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return s=Ot(i,n,s,a),s.elementType=t,s.type=r,s.lanes=l,s}function an(t,s,n,r){return t=Ot(7,t,r,s),t.lanes=n,t}function Fl(t,s,n,r){return t=Ot(22,t,r,s),t.elementType=Ju,t.lanes=n,t.stateNode={isHidden:!1},t}function bi(t,s,n){return t=Ot(6,t,null,s),t.lanes=n,t}function Ni(t,s,n){return s=Ot(4,t.children!==null?t.children:[],t.key,s),s.lanes=n,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function vg(t,s,n,r,a){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=si(0),this.expirationTimes=si(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=si(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Ec(t,s,n,r,a,l,i,o,c){return t=new vg(t,s,n,o,c),s===1?(s=1,l===!0&&(s|=8)):s=0,l=Ot(3,null,null,s),t.current=l,l.stateNode=t,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uc(l),t}function jg(t,s,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yn,key:r==null?null:""+r,children:t,containerInfo:s,implementation:n}}function Bh(t){if(!t)return Us;t=t._reactInternals;e:{if(xn(t)!==t||t.tag!==1)throw Error(G(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(gt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(gt(n))return Bm(t,n,s)}return s}function Qh(t,s,n,r,a,l,i,o,c){return t=Ec(n,r,!0,t,a,l,i,o,c),t.context=Bh(null),n=t.current,r=dt(),a=$s(n),l=ds(r,a),l.callback=s??null,Fs(n,l,a),t.current.lanes=a,Kr(t,a,r),vt(t,r),t}function Al(t,s,n,r){var a=s.current,l=dt(),i=$s(a);return n=Bh(n),s.context===null?s.context=n:s.pendingContext=n,s=ds(l,i),s.payload={element:t},r=r===void 0?null:r,r!==null&&(s.callback=r),t=Fs(a,s,i),t!==null&&(qt(t,a,i,l),Ea(t,a,i)),i}function ul(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Gd(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<s?n:s}}function Pc(t,s){Gd(t,s),(t=t.alternate)&&Gd(t,s)}function yg(){return null}var qh=typeof reportError=="function"?reportError:function(t){console.error(t)};function Rc(t){this._internalRoot=t}$l.prototype.render=Rc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(G(409));Al(t,s,null,null)};$l.prototype.unmount=Rc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;mn(function(){Al(null,t,null,null)}),s[ms]=null}};function $l(t){this._internalRoot=t}$l.prototype.unstable_scheduleHydration=function(t){if(t){var s=bm();t={blockedOn:null,target:t,priority:s};for(var n=0;n<Ss.length&&s!==0&&s<Ss[n].priority;n++);Ss.splice(n,0,t),n===0&&_m(t)}};function Mc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Il(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yd(){}function bg(t,s,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var d=ul(i);l.call(d)}}var i=Qh(s,r,t,0,null,!1,!1,"",Yd);return t._reactRootContainer=i,t[ms]=i.current,Fr(t.nodeType===8?t.parentNode:t),mn(),i}for(;a=t.lastChild;)t.removeChild(a);if(typeof r=="function"){var o=r;r=function(){var d=ul(c);o.call(d)}}var c=Ec(t,0,!1,null,null,!1,!1,"",Yd);return t._reactRootContainer=c,t[ms]=c.current,Fr(t.nodeType===8?t.parentNode:t),mn(function(){Al(s,c,n,r)}),c}function Dl(t,s,n,r,a){var l=n._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=ul(i);o.call(c)}}Al(s,i,t,a)}else i=bg(n,s,t,a,r);return ul(i)}jm=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var n=mr(s.pendingLanes);n!==0&&(Yo(s,n|1),vt(s,Ie()),!(je&6)&&(qn=Ie()+500,qs()))}break;case 13:mn(function(){var r=hs(t,1);if(r!==null){var a=dt();qt(r,t,1,a)}}),Pc(t,1)}};Jo=function(t){if(t.tag===13){var s=hs(t,134217728);if(s!==null){var n=dt();qt(s,t,134217728,n)}Pc(t,134217728)}};ym=function(t){if(t.tag===13){var s=$s(t),n=hs(t,s);if(n!==null){var r=dt();qt(n,t,s,r)}Pc(t,s)}};bm=function(){return Ne};Nm=function(t,s){var n=Ne;try{return Ne=t,s()}finally{Ne=n}};qi=function(t,s,n){switch(s){case"input":if($i(t,n),s=n.name,n.type==="radio"&&s!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<n.length;s++){var r=n[s];if(r!==t&&r.form===t.form){var a=Pl(r);if(!a)throw Error(G(90));Zu(r),$i(r,a)}}}break;case"textarea":tm(t,n);break;case"select":s=n.value,s!=null&&Tn(t,!!n.multiple,s,!1)}};om=wc;cm=mn;var Ng={usingClientEntryPoint:!1,Events:[Yr,Sn,Pl,lm,im,wc]},or={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_g={bundleType:or.bundleType,version:or.version,rendererPackageName:or.rendererPackageName,rendererConfig:or.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ps.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mm(t),t===null?null:t.stateNode},findFiberByHostInstance:or.findFiberByHostInstance||yg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ya.isDisabled&&ya.supportsFiber)try{Sl=ya.inject(_g),es=ya}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ng;kt.createPortal=function(t,s){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mc(s))throw Error(G(200));return jg(t,s,null,n)};kt.createRoot=function(t,s){if(!Mc(t))throw Error(G(299));var n=!1,r="",a=qh;return s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(r=s.identifierPrefix),s.onRecoverableError!==void 0&&(a=s.onRecoverableError)),s=Ec(t,1,!1,null,null,n,!1,r,a),t[ms]=s.current,Fr(t.nodeType===8?t.parentNode:t),new Rc(s)};kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=mm(s),t=t===null?null:t.stateNode,t};kt.flushSync=function(t){return mn(t)};kt.hydrate=function(t,s,n){if(!Il(s))throw Error(G(200));return Dl(null,t,s,!0,n)};kt.hydrateRoot=function(t,s,n){if(!Mc(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",i=qh;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),s=Qh(s,null,t,1,n??null,a,!1,l,i),t[ms]=s.current,Fr(t),r)for(t=0;t<r.length;t++)n=r[t],a=n._getVersion,a=a(n._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[n,a]:s.mutableSourceEagerHydrationData.push(n,a);return new $l(s)};kt.render=function(t,s,n){if(!Il(s))throw Error(G(200));return Dl(null,t,s,!1,n)};kt.unmountComponentAtNode=function(t){if(!Il(t))throw Error(G(40));return t._reactRootContainer?(mn(function(){Dl(null,null,t,!1,function(){t._reactRootContainer=null,t[ms]=null})}),!0):!1};kt.unstable_batchedUpdates=wc;kt.unstable_renderSubtreeIntoContainer=function(t,s,n,r){if(!Il(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Dl(t,s,n,!1,r)};kt.version="18.3.1-next-f1338f8080-20240426";function Wh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wh)}catch(t){console.error(t)}}Wh(),Wu.exports=kt;var Hh=Wu.exports;const wg=Ou(Hh);var Jd=Hh;Ri.createRoot=Jd.createRoot,Ri.hydrateRoot=Jd.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qr(){return qr=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qr.apply(this,arguments)}var Ps;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ps||(Ps={}));const Xd="popstate";function Sg(t){t===void 0&&(t={});function s(r,a){let{pathname:l,search:i,hash:o}=r.location;return wo("",{pathname:l,search:i,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:ml(a)}return kg(s,n,null,t)}function Le(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Vh(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Cg(){return Math.random().toString(36).substr(2,8)}function Zd(t,s){return{usr:t.state,key:t.key,idx:s}}function wo(t,s,n,r){return n===void 0&&(n=null),qr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?Gn(s):s,{state:n,key:s&&s.key||r||Cg()})}function ml(t){let{pathname:s="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(s+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(s+=r.charAt(0)==="#"?r:"#"+r),s}function Gn(t){let s={};if(t){let n=t.indexOf("#");n>=0&&(s.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(s.search=t.substr(r),t=t.substr(0,r)),t&&(s.pathname=t)}return s}function kg(t,s,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:l=!1}=r,i=a.history,o=Ps.Pop,c=null,d=h();d==null&&(d=0,i.replaceState(qr({},i.state,{idx:d}),""));function h(){return(i.state||{idx:null}).idx}function u(){o=Ps.Pop;let p=h(),m=p==null?null:p-d;d=p,c&&c({action:o,location:_.location,delta:m})}function j(p,m){o=Ps.Push;let f=wo(_.location,p,m);d=h()+1;let g=Zd(f,d),v=_.createHref(f);try{i.pushState(g,"",v)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;a.location.assign(v)}l&&c&&c({action:o,location:_.location,delta:1})}function x(p,m){o=Ps.Replace;let f=wo(_.location,p,m);d=h();let g=Zd(f,d),v=_.createHref(f);i.replaceState(g,"",v),l&&c&&c({action:o,location:_.location,delta:0})}function y(p){let m=a.location.origin!=="null"?a.location.origin:a.location.href,f=typeof p=="string"?p:ml(p);return f=f.replace(/ $/,"%20"),Le(m,"No window.location.(origin|href) available to create URL for href: "+f),new URL(f,m)}let _={get action(){return o},get location(){return t(a,i)},listen(p){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Xd,u),c=p,()=>{a.removeEventListener(Xd,u),c=null}},createHref(p){return s(a,p)},createURL:y,encodeLocation(p){let m=y(p);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:j,replace:x,go(p){return i.go(p)}};return _}var eu;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(eu||(eu={}));function Eg(t,s,n){return n===void 0&&(n="/"),Pg(t,s,n)}function Pg(t,s,n,r){let a=typeof s=="string"?Gn(s):s,l=Wn(a.pathname||"/",n);if(l==null)return null;let i=Kh(t);Rg(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let d=Ug(l);o=Dg(i[c],d)}return o}function Kh(t,s,n,r){s===void 0&&(s=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(Le(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Ds([r,c.relativePath]),h=n.concat(c);l.children&&l.children.length>0&&(Le(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Kh(l.children,s,h,d)),!(l.path==null&&!l.index)&&s.push({path:d,score:$g(d,l.index),routesMeta:h})};return t.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let c of Gh(l.path))a(l,i,c)}),s}function Gh(t){let s=t.split("/");if(s.length===0)return[];let[n,...r]=s,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let i=Gh(r.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),a&&o.push(...i),o.map(c=>t.startsWith("/")&&c===""?"/":c)}function Rg(t){t.sort((s,n)=>s.score!==n.score?n.score-s.score:Ig(s.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Mg=/^:[\w-]+$/,Tg=3,Og=2,Lg=1,Fg=10,Ag=-2,tu=t=>t==="*";function $g(t,s){let n=t.split("/"),r=n.length;return n.some(tu)&&(r+=Ag),s&&(r+=Og),n.filter(a=>!tu(a)).reduce((a,l)=>a+(Mg.test(l)?Tg:l===""?Lg:Fg),r)}function Ig(t,s){return t.length===s.length&&t.slice(0,-1).every((r,a)=>r===s[a])?t[t.length-1]-s[s.length-1]:0}function Dg(t,s,n){let{routesMeta:r}=t,a={},l="/",i=[];for(let o=0;o<r.length;++o){let c=r[o],d=o===r.length-1,h=l==="/"?s:s.slice(l.length)||"/",u=So({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),j=c.route;if(!u)return null;Object.assign(a,u.params),i.push({params:a,pathname:Ds([l,u.pathname]),pathnameBase:Wg(Ds([l,u.pathnameBase])),route:j}),u.pathnameBase!=="/"&&(l=Ds([l,u.pathnameBase]))}return i}function So(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=zg(t.path,t.caseSensitive,t.end),a=s.match(n);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:r.reduce((d,h,u)=>{let{paramName:j,isOptional:x}=h;if(j==="*"){let _=o[u]||"";i=l.slice(0,l.length-_.length).replace(/(.)\/+$/,"$1")}const y=o[u];return x&&!y?d[j]=void 0:d[j]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:i,pattern:t}}function zg(t,s,n){s===void 0&&(s=!1),n===void 0&&(n=!0),Vh(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(r.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,s?void 0:"i"),r]}function Ug(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Vh(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Wn(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let n=s.endsWith("/")?s.length-1:s.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Bg(t,s){s===void 0&&(s="/");let{pathname:n,search:r="",hash:a=""}=typeof t=="string"?Gn(t):t;return{pathname:n?n.startsWith("/")?n:Qg(n,s):s,search:Hg(r),hash:Vg(a)}}function Qg(t,s){let n=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function _i(t,s,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qg(t){return t.filter((s,n)=>n===0||s.route.path&&s.route.path.length>0)}function Tc(t,s){let n=qg(t);return s?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Oc(t,s,n,r){r===void 0&&(r=!1);let a;typeof t=="string"?a=Gn(t):(a=qr({},t),Le(!a.pathname||!a.pathname.includes("?"),_i("?","pathname","search",a)),Le(!a.pathname||!a.pathname.includes("#"),_i("#","pathname","hash",a)),Le(!a.search||!a.search.includes("#"),_i("#","search","hash",a)));let l=t===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=n;else{let u=s.length-1;if(!r&&i.startsWith("..")){let j=i.split("/");for(;j[0]==="..";)j.shift(),u-=1;a.pathname=j.join("/")}o=u>=0?s[u]:"/"}let c=Bg(a,o),d=i&&i!=="/"&&i.endsWith("/"),h=(l||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Ds=t=>t.join("/").replace(/\/\/+/g,"/"),Wg=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Hg=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Vg=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Kg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Yh=["post","put","patch","delete"];new Set(Yh);const Gg=["get",...Yh];new Set(Gg);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wr(){return Wr=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wr.apply(this,arguments)}const zl=E.createContext(null),Jh=E.createContext(null),xs=E.createContext(null),Ul=E.createContext(null),gs=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Xh=E.createContext(null);function Yg(t,s){let{relative:n}=s===void 0?{}:s;Yn()||Le(!1);let{basename:r,navigator:a}=E.useContext(xs),{hash:l,pathname:i,search:o}=Bl(t,{relative:n}),c=i;return r!=="/"&&(c=i==="/"?r:Ds([r,i])),a.createHref({pathname:c,search:o,hash:l})}function Yn(){return E.useContext(Ul)!=null}function gn(){return Yn()||Le(!1),E.useContext(Ul).location}function Zh(t){E.useContext(xs).static||E.useLayoutEffect(t)}function Lc(){let{isDataRoute:t}=E.useContext(gs);return t?dv():Jg()}function Jg(){Yn()||Le(!1);let t=E.useContext(zl),{basename:s,future:n,navigator:r}=E.useContext(xs),{matches:a}=E.useContext(gs),{pathname:l}=gn(),i=JSON.stringify(Tc(a,n.v7_relativeSplatPath)),o=E.useRef(!1);return Zh(()=>{o.current=!0}),E.useCallback(function(d,h){if(h===void 0&&(h={}),!o.current)return;if(typeof d=="number"){r.go(d);return}let u=Oc(d,JSON.parse(i),l,h.relative==="path");t==null&&s!=="/"&&(u.pathname=u.pathname==="/"?s:Ds([s,u.pathname])),(h.replace?r.replace:r.push)(u,h.state,h)},[s,r,i,l,t])}function Xg(){let{matches:t}=E.useContext(gs),s=t[t.length-1];return s?s.params:{}}function Bl(t,s){let{relative:n}=s===void 0?{}:s,{future:r}=E.useContext(xs),{matches:a}=E.useContext(gs),{pathname:l}=gn(),i=JSON.stringify(Tc(a,r.v7_relativeSplatPath));return E.useMemo(()=>Oc(t,JSON.parse(i),l,n==="path"),[t,i,l,n])}function Zg(t,s){return ev(t,s)}function ev(t,s,n,r){Yn()||Le(!1);let{navigator:a}=E.useContext(xs),{matches:l}=E.useContext(gs),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=gn(),h;if(s){var u;let p=typeof s=="string"?Gn(s):s;c==="/"||(u=p.pathname)!=null&&u.startsWith(c)||Le(!1),h=p}else h=d;let j=h.pathname||"/",x=j;if(c!=="/"){let p=c.replace(/^\//,"").split("/");x="/"+j.replace(/^\//,"").split("/").slice(p.length).join("/")}let y=Eg(t,{pathname:x}),_=av(y&&y.map(p=>Object.assign({},p,{params:Object.assign({},o,p.params),pathname:Ds([c,a.encodeLocation?a.encodeLocation(p.pathname).pathname:p.pathname]),pathnameBase:p.pathnameBase==="/"?c:Ds([c,a.encodeLocation?a.encodeLocation(p.pathnameBase).pathname:p.pathnameBase])})),l,n,r);return s&&_?E.createElement(Ul.Provider,{value:{location:Wr({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ps.Pop}},_):_}function tv(){let t=cv(),s=Kg(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},s),n?E.createElement("pre",{style:a},n):null,null)}const sv=E.createElement(tv,null);class nv extends E.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,n){return n.location!==s.location||n.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:n.error,location:n.location,revalidation:s.revalidation||n.revalidation}}componentDidCatch(s,n){console.error("React Router caught the following error during render",s,n)}render(){return this.state.error!==void 0?E.createElement(gs.Provider,{value:this.props.routeContext},E.createElement(Xh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rv(t){let{routeContext:s,match:n,children:r}=t,a=E.useContext(zl);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(gs.Provider,{value:s},r)}function av(t,s,n,r){var a;if(s===void 0&&(s=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=r)!=null&&l.v7_partialHydration&&s.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=(a=n)==null?void 0:a.errors;if(o!=null){let h=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);h>=0||Le(!1),i=i.slice(0,Math.min(i.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<i.length;h++){let u=i[h];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=h),u.route.id){let{loaderData:j,errors:x}=n,y=u.route.loader&&j[u.route.id]===void 0&&(!x||x[u.route.id]===void 0);if(u.route.lazy||y){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((h,u,j)=>{let x,y=!1,_=null,p=null;n&&(x=o&&u.route.id?o[u.route.id]:void 0,_=u.route.errorElement||sv,c&&(d<0&&j===0?(uv("route-fallback"),y=!0,p=null):d===j&&(y=!0,p=u.route.hydrateFallbackElement||null)));let m=s.concat(i.slice(0,j+1)),f=()=>{let g;return x?g=_:y?g=p:u.route.Component?g=E.createElement(u.route.Component,null):u.route.element?g=u.route.element:g=h,E.createElement(rv,{match:u,routeContext:{outlet:h,matches:m,isDataRoute:n!=null},children:g})};return n&&(u.route.ErrorBoundary||u.route.errorElement||j===0)?E.createElement(nv,{location:n.location,revalidation:n.revalidation,component:_,error:x,children:f(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):f()},null)}var ef=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ef||{}),tf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tf||{});function lv(t){let s=E.useContext(zl);return s||Le(!1),s}function iv(t){let s=E.useContext(Jh);return s||Le(!1),s}function ov(t){let s=E.useContext(gs);return s||Le(!1),s}function sf(t){let s=ov(),n=s.matches[s.matches.length-1];return n.route.id||Le(!1),n.route.id}function cv(){var t;let s=E.useContext(Xh),n=iv(),r=sf();return s!==void 0?s:(t=n.errors)==null?void 0:t[r]}function dv(){let{router:t}=lv(ef.UseNavigateStable),s=sf(tf.UseNavigateStable),n=E.useRef(!1);return Zh(()=>{n.current=!0}),E.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?t.navigate(a):t.navigate(a,Wr({fromRouteId:s},l)))},[t,s])}const su={};function uv(t,s,n){su[t]||(su[t]=!0)}function mv(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Nt(t){let{to:s,replace:n,state:r,relative:a}=t;Yn()||Le(!1);let{future:l,static:i}=E.useContext(xs),{matches:o}=E.useContext(gs),{pathname:c}=gn(),d=Lc(),h=Oc(s,Tc(o,l.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(h);return E.useEffect(()=>d(JSON.parse(u),{replace:n,state:r,relative:a}),[d,u,a,n,r]),null}function Se(t){Le(!1)}function hv(t){let{basename:s="/",children:n=null,location:r,navigationType:a=Ps.Pop,navigator:l,static:i=!1,future:o}=t;Yn()&&Le(!1);let c=s.replace(/^\/*/,"/"),d=E.useMemo(()=>({basename:c,navigator:l,static:i,future:Wr({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof r=="string"&&(r=Gn(r));let{pathname:h="/",search:u="",hash:j="",state:x=null,key:y="default"}=r,_=E.useMemo(()=>{let p=Wn(h,c);return p==null?null:{location:{pathname:p,search:u,hash:j,state:x,key:y},navigationType:a}},[c,h,u,j,x,y,a]);return _==null?null:E.createElement(xs.Provider,{value:d},E.createElement(Ul.Provider,{children:n,value:_}))}function nu(t){let{children:s,location:n}=t;return Zg(Co(s),n)}new Promise(()=>{});function Co(t,s){s===void 0&&(s=[]);let n=[];return E.Children.forEach(t,(r,a)=>{if(!E.isValidElement(r))return;let l=[...s,a];if(r.type===E.Fragment){n.push.apply(n,Co(r.props.children,l));return}r.type!==Se&&Le(!1),!r.props.index||!r.props.children||Le(!1);let i={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Co(r.props.children,l)),n.push(i)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hl(){return hl=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hl.apply(this,arguments)}function nf(t,s){if(t==null)return{};var n={},r=Object.keys(t),a,l;for(l=0;l<r.length;l++)a=r[l],!(s.indexOf(a)>=0)&&(n[a]=t[a]);return n}function fv(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pv(t,s){return t.button===0&&(!s||s==="_self")&&!fv(t)}const xv=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gv=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],vv="6";try{window.__reactRouterVersion=vv}catch{}const jv=E.createContext({isTransitioning:!1}),yv="startTransition",ru=hp[yv];function bv(t){let{basename:s,children:n,future:r,window:a}=t,l=E.useRef();l.current==null&&(l.current=Sg({window:a,v5Compat:!0}));let i=l.current,[o,c]=E.useState({action:i.action,location:i.location}),{v7_startTransition:d}=r||{},h=E.useCallback(u=>{d&&ru?ru(()=>c(u)):c(u)},[c,d]);return E.useLayoutEffect(()=>i.listen(h),[i,h]),E.useEffect(()=>mv(r),[r]),E.createElement(hv,{basename:s,children:n,location:o.location,navigationType:o.action,navigator:i,future:r})}const Nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_v=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tn=E.forwardRef(function(s,n){let{onClick:r,relative:a,reloadDocument:l,replace:i,state:o,target:c,to:d,preventScrollReset:h,viewTransition:u}=s,j=nf(s,xv),{basename:x}=E.useContext(xs),y,_=!1;if(typeof d=="string"&&_v.test(d)&&(y=d,Nv))try{let g=new URL(window.location.href),v=d.startsWith("//")?new URL(g.protocol+d):new URL(d),b=Wn(v.pathname,x);v.origin===g.origin&&b!=null?d=b+v.search+v.hash:_=!0}catch{}let p=Yg(d,{relative:a}),m=Cv(d,{replace:i,state:o,target:c,preventScrollReset:h,relative:a,viewTransition:u});function f(g){r&&r(g),g.defaultPrevented||m(g)}return E.createElement("a",hl({},j,{href:y||p,onClick:_||l?r:f,ref:n,target:c}))}),wv=E.forwardRef(function(s,n){let{"aria-current":r="page",caseSensitive:a=!1,className:l="",end:i=!1,style:o,to:c,viewTransition:d,children:h}=s,u=nf(s,gv),j=Bl(c,{relative:u.relative}),x=gn(),y=E.useContext(Jh),{navigator:_,basename:p}=E.useContext(xs),m=y!=null&&kv(j)&&d===!0,f=_.encodeLocation?_.encodeLocation(j).pathname:j.pathname,g=x.pathname,v=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;a||(g=g.toLowerCase(),v=v?v.toLowerCase():null,f=f.toLowerCase()),v&&p&&(v=Wn(v,p)||v);const b=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let k=g===f||!i&&g.startsWith(f)&&g.charAt(b)==="/",C=v!=null&&(v===f||!i&&v.startsWith(f)&&v.charAt(f.length)==="/"),M={isActive:k,isPending:C,isTransitioning:m},U=k?r:void 0,Q;typeof l=="function"?Q=l(M):Q=[l,k?"active":null,C?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let K=typeof o=="function"?o(M):o;return E.createElement(tn,hl({},u,{"aria-current":U,className:Q,ref:n,style:K,to:c,viewTransition:d}),typeof h=="function"?h(M):h)});var ko;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ko||(ko={}));var au;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(au||(au={}));function Sv(t){let s=E.useContext(zl);return s||Le(!1),s}function Cv(t,s){let{target:n,replace:r,state:a,preventScrollReset:l,relative:i,viewTransition:o}=s===void 0?{}:s,c=Lc(),d=gn(),h=Bl(t,{relative:i});return E.useCallback(u=>{if(pv(u,n)){u.preventDefault();let j=r!==void 0?r:ml(d)===ml(h);c(t,{replace:j,state:a,preventScrollReset:l,relative:i,viewTransition:o})}},[d,c,h,r,a,n,t,l,i,o])}function kv(t,s){s===void 0&&(s={});let n=E.useContext(jv);n==null&&Le(!1);let{basename:r}=Sv(ko.useViewTransitionState),a=Bl(t,{relative:s.relative});if(!n.isTransitioning)return!1;let l=Wn(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Wn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return So(a.pathname,i)!=null||So(a.pathname,l)!=null}function Eo(t,s){return Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Eo(t,s)}function Jn(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,Eo(t,s)}var Xn=function(){function t(){this.listeners=[]}var s=t.prototype;return s.subscribe=function(r){var a=this,l=r||function(){};return this.listeners.push(l),this.onSubscribe(),function(){a.listeners=a.listeners.filter(function(i){return i!==l}),a.onUnsubscribe()}},s.hasListeners=function(){return this.listeners.length>0},s.onSubscribe=function(){},s.onUnsubscribe=function(){},t}();function fe(){return fe=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var n=arguments[s];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fe.apply(null,arguments)}var fl=typeof window>"u";function Ye(){}function Ev(t,s){return typeof t=="function"?t(s):t}function Po(t){return typeof t=="number"&&t>=0&&t!==1/0}function pl(t){return Array.isArray(t)?t:[t]}function rf(t,s){return Math.max(t+(s||0)-Date.now(),0)}function Fa(t,s,n){return Xr(t)?typeof s=="function"?fe({},n,{queryKey:t,queryFn:s}):fe({},s,{queryKey:t}):t}function Pv(t,s,n){return Xr(t)?typeof s=="function"?fe({},n,{mutationKey:t,mutationFn:s}):fe({},s,{mutationKey:t}):typeof t=="function"?fe({},s,{mutationFn:t}):fe({},t)}function ws(t,s,n){return Xr(t)?[fe({},s,{queryKey:t}),n]:[t||{},s]}function Rv(t,s){if(t===!0&&s===!0||t==null&&s==null)return"all";if(t===!1&&s===!1)return"none";var n=t??!s;return n?"active":"inactive"}function lu(t,s){var n=t.active,r=t.exact,a=t.fetching,l=t.inactive,i=t.predicate,o=t.queryKey,c=t.stale;if(Xr(o)){if(r){if(s.queryHash!==Fc(o,s.options))return!1}else if(!xl(s.queryKey,o))return!1}var d=Rv(n,l);if(d==="none")return!1;if(d!=="all"){var h=s.isActive();if(d==="active"&&!h||d==="inactive"&&h)return!1}return!(typeof c=="boolean"&&s.isStale()!==c||typeof a=="boolean"&&s.isFetching()!==a||i&&!i(s))}function iu(t,s){var n=t.exact,r=t.fetching,a=t.predicate,l=t.mutationKey;if(Xr(l)){if(!s.options.mutationKey)return!1;if(n){if(sn(s.options.mutationKey)!==sn(l))return!1}else if(!xl(s.options.mutationKey,l))return!1}return!(typeof r=="boolean"&&s.state.status==="loading"!==r||a&&!a(s))}function Fc(t,s){var n=(s==null?void 0:s.queryKeyHashFn)||sn;return n(t)}function sn(t){var s=pl(t);return Mv(s)}function Mv(t){return JSON.stringify(t,function(s,n){return Ro(n)?Object.keys(n).sort().reduce(function(r,a){return r[a]=n[a],r},{}):n})}function xl(t,s){return af(pl(t),pl(s))}function af(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?!Object.keys(s).some(function(n){return!af(t[n],s[n])}):!1}function gl(t,s){if(t===s)return t;var n=Array.isArray(t)&&Array.isArray(s);if(n||Ro(t)&&Ro(s)){for(var r=n?t.length:Object.keys(t).length,a=n?s:Object.keys(s),l=a.length,i=n?[]:{},o=0,c=0;c<l;c++){var d=n?c:a[c];i[d]=gl(t[d],s[d]),i[d]===t[d]&&o++}return r===l&&o===r?t:i}return s}function Tv(t,s){if(t&&!s||s&&!t)return!1;for(var n in t)if(t[n]!==s[n])return!1;return!0}function Ro(t){if(!ou(t))return!1;var s=t.constructor;if(typeof s>"u")return!0;var n=s.prototype;return!(!ou(n)||!n.hasOwnProperty("isPrototypeOf"))}function ou(t){return Object.prototype.toString.call(t)==="[object Object]"}function Xr(t){return typeof t=="string"||Array.isArray(t)}function Ov(t){return new Promise(function(s){setTimeout(s,t)})}function cu(t){Promise.resolve().then(t).catch(function(s){return setTimeout(function(){throw s})})}function lf(){if(typeof AbortController=="function")return new AbortController}var Lv=function(t){Jn(s,t);function s(){var r;return r=t.call(this)||this,r.setup=function(a){var l;if(!fl&&((l=window)!=null&&l.addEventListener)){var i=function(){return a()};return window.addEventListener("visibilitychange",i,!1),window.addEventListener("focus",i,!1),function(){window.removeEventListener("visibilitychange",i),window.removeEventListener("focus",i)}}},r}var n=s.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},n.setEventListener=function(a){var l,i=this;this.setup=a,(l=this.cleanup)==null||l.call(this),this.cleanup=a(function(o){typeof o=="boolean"?i.setFocused(o):i.onFocus()})},n.setFocused=function(a){this.focused=a,a&&this.onFocus()},n.onFocus=function(){this.listeners.forEach(function(a){a()})},n.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},s}(Xn),wr=new Lv,Fv=function(t){Jn(s,t);function s(){var r;return r=t.call(this)||this,r.setup=function(a){var l;if(!fl&&((l=window)!=null&&l.addEventListener)){var i=function(){return a()};return window.addEventListener("online",i,!1),window.addEventListener("offline",i,!1),function(){window.removeEventListener("online",i),window.removeEventListener("offline",i)}}},r}var n=s.prototype;return n.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},n.onUnsubscribe=function(){if(!this.hasListeners()){var a;(a=this.cleanup)==null||a.call(this),this.cleanup=void 0}},n.setEventListener=function(a){var l,i=this;this.setup=a,(l=this.cleanup)==null||l.call(this),this.cleanup=a(function(o){typeof o=="boolean"?i.setOnline(o):i.onOnline()})},n.setOnline=function(a){this.online=a,a&&this.onOnline()},n.onOnline=function(){this.listeners.forEach(function(a){a()})},n.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},s}(Xn),Aa=new Fv;function Av(t){return Math.min(1e3*Math.pow(2,t),3e4)}function vl(t){return typeof(t==null?void 0:t.cancel)=="function"}var of=function(s){this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent};function $a(t){return t instanceof of}var cf=function(s){var n=this,r=!1,a,l,i,o;this.abort=s.abort,this.cancel=function(j){return a==null?void 0:a(j)},this.cancelRetry=function(){r=!0},this.continueRetry=function(){r=!1},this.continue=function(){return l==null?void 0:l()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(j,x){i=j,o=x});var c=function(x){n.isResolved||(n.isResolved=!0,s.onSuccess==null||s.onSuccess(x),l==null||l(),i(x))},d=function(x){n.isResolved||(n.isResolved=!0,s.onError==null||s.onError(x),l==null||l(),o(x))},h=function(){return new Promise(function(x){l=x,n.isPaused=!0,s.onPause==null||s.onPause()}).then(function(){l=void 0,n.isPaused=!1,s.onContinue==null||s.onContinue()})},u=function j(){if(!n.isResolved){var x;try{x=s.fn()}catch(y){x=Promise.reject(y)}a=function(_){if(!n.isResolved&&(d(new of(_)),n.abort==null||n.abort(),vl(x)))try{x.cancel()}catch{}},n.isTransportCancelable=vl(x),Promise.resolve(x).then(c).catch(function(y){var _,p;if(!n.isResolved){var m=(_=s.retry)!=null?_:3,f=(p=s.retryDelay)!=null?p:Av,g=typeof f=="function"?f(n.failureCount,y):f,v=m===!0||typeof m=="number"&&n.failureCount<m||typeof m=="function"&&m(n.failureCount,y);if(r||!v){d(y);return}n.failureCount++,s.onFail==null||s.onFail(n.failureCount,y),Ov(g).then(function(){if(!wr.isFocused()||!Aa.isOnline())return h()}).then(function(){r?d(y):j()})}})}};u()},$v=function(){function t(){this.queue=[],this.transactions=0,this.notifyFn=function(n){n()},this.batchNotifyFn=function(n){n()}}var s=t.prototype;return s.batch=function(r){var a;this.transactions++;try{a=r()}finally{this.transactions--,this.transactions||this.flush()}return a},s.schedule=function(r){var a=this;this.transactions?this.queue.push(r):cu(function(){a.notifyFn(r)})},s.batchCalls=function(r){var a=this;return function(){for(var l=arguments.length,i=new Array(l),o=0;o<l;o++)i[o]=arguments[o];a.schedule(function(){r.apply(void 0,i)})}},s.flush=function(){var r=this,a=this.queue;this.queue=[],a.length&&cu(function(){r.batchNotifyFn(function(){a.forEach(function(l){r.notifyFn(l)})})})},s.setNotifyFunction=function(r){this.notifyFn=r},s.setBatchNotifyFunction=function(r){this.batchNotifyFn=r},t}(),Re=new $v,df=console;function jl(){return df}function Iv(t){df=t}var Dv=function(){function t(n){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=n.defaultOptions,this.setOptions(n.options),this.observers=[],this.cache=n.cache,this.queryKey=n.queryKey,this.queryHash=n.queryHash,this.initialState=n.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=n.meta,this.scheduleGc()}var s=t.prototype;return s.setOptions=function(r){var a;this.options=fe({},this.defaultOptions,r),this.meta=r==null?void 0:r.meta,this.cacheTime=Math.max(this.cacheTime||0,(a=this.options.cacheTime)!=null?a:5*60*1e3)},s.setDefaultOptions=function(r){this.defaultOptions=r},s.scheduleGc=function(){var r=this;this.clearGcTimeout(),Po(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){r.optionalRemove()},this.cacheTime))},s.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},s.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},s.setData=function(r,a){var l,i,o=this.state.data,c=Ev(r,o);return(l=(i=this.options).isDataEqual)!=null&&l.call(i,o,c)?c=o:this.options.structuralSharing!==!1&&(c=gl(o,c)),this.dispatch({data:c,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt}),c},s.setState=function(r,a){this.dispatch({type:"setState",state:r,setStateOptions:a})},s.cancel=function(r){var a,l=this.promise;return(a=this.retryer)==null||a.cancel(r),l?l.then(Ye).catch(Ye):Promise.resolve()},s.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},s.reset=function(){this.destroy(),this.setState(this.initialState)},s.isActive=function(){return this.observers.some(function(r){return r.options.enabled!==!1})},s.isFetching=function(){return this.state.isFetching},s.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(r){return r.getCurrentResult().isStale})},s.isStaleByTime=function(r){return r===void 0&&(r=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!rf(this.state.dataUpdatedAt,r)},s.onFocus=function(){var r,a=this.observers.find(function(l){return l.shouldFetchOnWindowFocus()});a&&a.refetch(),(r=this.retryer)==null||r.continue()},s.onOnline=function(){var r,a=this.observers.find(function(l){return l.shouldFetchOnReconnect()});a&&a.refetch(),(r=this.retryer)==null||r.continue()},s.addObserver=function(r){this.observers.indexOf(r)===-1&&(this.observers.push(r),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:r}))},s.removeObserver=function(r){this.observers.indexOf(r)!==-1&&(this.observers=this.observers.filter(function(a){return a!==r}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:r}))},s.getObserversCount=function(){return this.observers.length},s.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},s.fetch=function(r,a){var l=this,i,o,c;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var d;return(d=this.retryer)==null||d.continueRetry(),this.promise}}if(r&&this.setOptions(r),!this.options.queryFn){var h=this.observers.find(function(f){return f.options.queryFn});h&&this.setOptions(h.options)}var u=pl(this.queryKey),j=lf(),x={queryKey:u,pageParam:void 0,meta:this.meta};Object.defineProperty(x,"signal",{enumerable:!0,get:function(){if(j)return l.abortSignalConsumed=!0,j.signal}});var y=function(){return l.options.queryFn?(l.abortSignalConsumed=!1,l.options.queryFn(x)):Promise.reject("Missing queryFn")},_={fetchOptions:a,options:this.options,queryKey:u,state:this.state,fetchFn:y,meta:this.meta};if((i=this.options.behavior)!=null&&i.onFetch){var p;(p=this.options.behavior)==null||p.onFetch(_)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((o=_.fetchOptions)==null?void 0:o.meta)){var m;this.dispatch({type:"fetch",meta:(m=_.fetchOptions)==null?void 0:m.meta})}return this.retryer=new cf({fn:_.fetchFn,abort:j==null||(c=j.abort)==null?void 0:c.bind(j),onSuccess:function(g){l.setData(g),l.cache.config.onSuccess==null||l.cache.config.onSuccess(g,l),l.cacheTime===0&&l.optionalRemove()},onError:function(g){$a(g)&&g.silent||l.dispatch({type:"error",error:g}),$a(g)||(l.cache.config.onError==null||l.cache.config.onError(g,l),jl().error(g)),l.cacheTime===0&&l.optionalRemove()},onFail:function(){l.dispatch({type:"failed"})},onPause:function(){l.dispatch({type:"pause"})},onContinue:function(){l.dispatch({type:"continue"})},retry:_.options.retry,retryDelay:_.options.retryDelay}),this.promise=this.retryer.promise,this.promise},s.dispatch=function(r){var a=this;this.state=this.reducer(this.state,r),Re.batch(function(){a.observers.forEach(function(l){l.onQueryUpdate(r)}),a.cache.notify({query:a,type:"queryUpdated",action:r})})},s.getDefaultState=function(r){var a=typeof r.initialData=="function"?r.initialData():r.initialData,l=typeof r.initialData<"u",i=l?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0,o=typeof a<"u";return{data:a,dataUpdateCount:0,dataUpdatedAt:o?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:o?"success":"idle"}},s.reducer=function(r,a){var l,i;switch(a.type){case"failed":return fe({},r,{fetchFailureCount:r.fetchFailureCount+1});case"pause":return fe({},r,{isPaused:!0});case"continue":return fe({},r,{isPaused:!1});case"fetch":return fe({},r,{fetchFailureCount:0,fetchMeta:(l=a.meta)!=null?l:null,isFetching:!0,isPaused:!1},!r.dataUpdatedAt&&{error:null,status:"loading"});case"success":return fe({},r,{data:a.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(i=a.dataUpdatedAt)!=null?i:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var o=a.error;return $a(o)&&o.revert&&this.revertState?fe({},this.revertState):fe({},r,{error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return fe({},r,{isInvalidated:!0});case"setState":return fe({},r,a.state);default:return r}},t}(),zv=function(t){Jn(s,t);function s(r){var a;return a=t.call(this)||this,a.config=r||{},a.queries=[],a.queriesMap={},a}var n=s.prototype;return n.build=function(a,l,i){var o,c=l.queryKey,d=(o=l.queryHash)!=null?o:Fc(c,l),h=this.get(d);return h||(h=new Dv({cache:this,queryKey:c,queryHash:d,options:a.defaultQueryOptions(l),state:i,defaultOptions:a.getQueryDefaults(c),meta:l.meta}),this.add(h)),h},n.add=function(a){this.queriesMap[a.queryHash]||(this.queriesMap[a.queryHash]=a,this.queries.push(a),this.notify({type:"queryAdded",query:a}))},n.remove=function(a){var l=this.queriesMap[a.queryHash];l&&(a.destroy(),this.queries=this.queries.filter(function(i){return i!==a}),l===a&&delete this.queriesMap[a.queryHash],this.notify({type:"queryRemoved",query:a}))},n.clear=function(){var a=this;Re.batch(function(){a.queries.forEach(function(l){a.remove(l)})})},n.get=function(a){return this.queriesMap[a]},n.getAll=function(){return this.queries},n.find=function(a,l){var i=ws(a,l),o=i[0];return typeof o.exact>"u"&&(o.exact=!0),this.queries.find(function(c){return lu(o,c)})},n.findAll=function(a,l){var i=ws(a,l),o=i[0];return Object.keys(o).length>0?this.queries.filter(function(c){return lu(o,c)}):this.queries},n.notify=function(a){var l=this;Re.batch(function(){l.listeners.forEach(function(i){i(a)})})},n.onFocus=function(){var a=this;Re.batch(function(){a.queries.forEach(function(l){l.onFocus()})})},n.onOnline=function(){var a=this;Re.batch(function(){a.queries.forEach(function(l){l.onOnline()})})},s}(Xn),Uv=function(){function t(n){this.options=fe({},n.defaultOptions,n.options),this.mutationId=n.mutationId,this.mutationCache=n.mutationCache,this.observers=[],this.state=n.state||uf(),this.meta=n.meta}var s=t.prototype;return s.setState=function(r){this.dispatch({type:"setState",state:r})},s.addObserver=function(r){this.observers.indexOf(r)===-1&&this.observers.push(r)},s.removeObserver=function(r){this.observers=this.observers.filter(function(a){return a!==r})},s.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(Ye).catch(Ye)):Promise.resolve()},s.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},s.execute=function(){var r=this,a,l=this.state.status==="loading",i=Promise.resolve();return l||(this.dispatch({type:"loading",variables:this.options.variables}),i=i.then(function(){r.mutationCache.config.onMutate==null||r.mutationCache.config.onMutate(r.state.variables,r)}).then(function(){return r.options.onMutate==null?void 0:r.options.onMutate(r.state.variables)}).then(function(o){o!==r.state.context&&r.dispatch({type:"loading",context:o,variables:r.state.variables})})),i.then(function(){return r.executeMutation()}).then(function(o){a=o,r.mutationCache.config.onSuccess==null||r.mutationCache.config.onSuccess(a,r.state.variables,r.state.context,r)}).then(function(){return r.options.onSuccess==null?void 0:r.options.onSuccess(a,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(a,null,r.state.variables,r.state.context)}).then(function(){return r.dispatch({type:"success",data:a}),a}).catch(function(o){return r.mutationCache.config.onError==null||r.mutationCache.config.onError(o,r.state.variables,r.state.context,r),jl().error(o),Promise.resolve().then(function(){return r.options.onError==null?void 0:r.options.onError(o,r.state.variables,r.state.context)}).then(function(){return r.options.onSettled==null?void 0:r.options.onSettled(void 0,o,r.state.variables,r.state.context)}).then(function(){throw r.dispatch({type:"error",error:o}),o})})},s.executeMutation=function(){var r=this,a;return this.retryer=new cf({fn:function(){return r.options.mutationFn?r.options.mutationFn(r.state.variables):Promise.reject("No mutationFn found")},onFail:function(){r.dispatch({type:"failed"})},onPause:function(){r.dispatch({type:"pause"})},onContinue:function(){r.dispatch({type:"continue"})},retry:(a=this.options.retry)!=null?a:0,retryDelay:this.options.retryDelay}),this.retryer.promise},s.dispatch=function(r){var a=this;this.state=Bv(this.state,r),Re.batch(function(){a.observers.forEach(function(l){l.onMutationUpdate(r)}),a.mutationCache.notify(a)})},t}();function uf(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Bv(t,s){switch(s.type){case"failed":return fe({},t,{failureCount:t.failureCount+1});case"pause":return fe({},t,{isPaused:!0});case"continue":return fe({},t,{isPaused:!1});case"loading":return fe({},t,{context:s.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:s.variables});case"success":return fe({},t,{data:s.data,error:null,status:"success",isPaused:!1});case"error":return fe({},t,{data:void 0,error:s.error,failureCount:t.failureCount+1,isPaused:!1,status:"error"});case"setState":return fe({},t,s.state);default:return t}}var Qv=function(t){Jn(s,t);function s(r){var a;return a=t.call(this)||this,a.config=r||{},a.mutations=[],a.mutationId=0,a}var n=s.prototype;return n.build=function(a,l,i){var o=new Uv({mutationCache:this,mutationId:++this.mutationId,options:a.defaultMutationOptions(l),state:i,defaultOptions:l.mutationKey?a.getMutationDefaults(l.mutationKey):void 0,meta:l.meta});return this.add(o),o},n.add=function(a){this.mutations.push(a),this.notify(a)},n.remove=function(a){this.mutations=this.mutations.filter(function(l){return l!==a}),a.cancel(),this.notify(a)},n.clear=function(){var a=this;Re.batch(function(){a.mutations.forEach(function(l){a.remove(l)})})},n.getAll=function(){return this.mutations},n.find=function(a){return typeof a.exact>"u"&&(a.exact=!0),this.mutations.find(function(l){return iu(a,l)})},n.findAll=function(a){return this.mutations.filter(function(l){return iu(a,l)})},n.notify=function(a){var l=this;Re.batch(function(){l.listeners.forEach(function(i){i(a)})})},n.onFocus=function(){this.resumePausedMutations()},n.onOnline=function(){this.resumePausedMutations()},n.resumePausedMutations=function(){var a=this.mutations.filter(function(l){return l.state.isPaused});return Re.batch(function(){return a.reduce(function(l,i){return l.then(function(){return i.continue().catch(Ye)})},Promise.resolve())})},s}(Xn);function qv(){return{onFetch:function(s){s.fetchFn=function(){var n,r,a,l,i,o,c=(n=s.fetchOptions)==null||(r=n.meta)==null?void 0:r.refetchPage,d=(a=s.fetchOptions)==null||(l=a.meta)==null?void 0:l.fetchMore,h=d==null?void 0:d.pageParam,u=(d==null?void 0:d.direction)==="forward",j=(d==null?void 0:d.direction)==="backward",x=((i=s.state.data)==null?void 0:i.pages)||[],y=((o=s.state.data)==null?void 0:o.pageParams)||[],_=lf(),p=_==null?void 0:_.signal,m=y,f=!1,g=s.options.queryFn||function(){return Promise.reject("Missing queryFn")},v=function($,N,H,L){return m=L?[N].concat(m):[].concat(m,[N]),L?[H].concat($):[].concat($,[H])},b=function($,N,H,L){if(f)return Promise.reject("Cancelled");if(typeof H>"u"&&!N&&$.length)return Promise.resolve($);var R={queryKey:s.queryKey,signal:p,pageParam:H,meta:s.meta},T=g(R),V=Promise.resolve(T).then(function(Z){return v($,H,Z,L)});if(vl(T)){var z=V;z.cancel=T.cancel}return V},k;if(!x.length)k=b([]);else if(u){var C=typeof h<"u",M=C?h:du(s.options,x);k=b(x,C,M)}else if(j){var U=typeof h<"u",Q=U?h:Wv(s.options,x);k=b(x,U,Q,!0)}else(function(){m=[];var O=typeof s.options.getNextPageParam>"u",$=c&&x[0]?c(x[0],0,x):!0;k=$?b([],O,y[0]):Promise.resolve(v([],y[0],x[0]));for(var N=function(R){k=k.then(function(T){var V=c&&x[R]?c(x[R],R,x):!0;if(V){var z=O?y[R]:du(s.options,T);return b(T,O,z)}return Promise.resolve(v(T,y[R],x[R]))})},H=1;H<x.length;H++)N(H)})();var K=k.then(function(O){return{pages:O,pageParams:m}}),J=K;return J.cancel=function(){f=!0,_==null||_.abort(),vl(k)&&k.cancel()},K}}}}function du(t,s){return t.getNextPageParam==null?void 0:t.getNextPageParam(s[s.length-1],s)}function Wv(t,s){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(s[0],s)}var Hv=function(){function t(n){n===void 0&&(n={}),this.queryCache=n.queryCache||new zv,this.mutationCache=n.mutationCache||new Qv,this.defaultOptions=n.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var s=t.prototype;return s.mount=function(){var r=this;this.unsubscribeFocus=wr.subscribe(function(){wr.isFocused()&&Aa.isOnline()&&(r.mutationCache.onFocus(),r.queryCache.onFocus())}),this.unsubscribeOnline=Aa.subscribe(function(){wr.isFocused()&&Aa.isOnline()&&(r.mutationCache.onOnline(),r.queryCache.onOnline())})},s.unmount=function(){var r,a;(r=this.unsubscribeFocus)==null||r.call(this),(a=this.unsubscribeOnline)==null||a.call(this)},s.isFetching=function(r,a){var l=ws(r,a),i=l[0];return i.fetching=!0,this.queryCache.findAll(i).length},s.isMutating=function(r){return this.mutationCache.findAll(fe({},r,{fetching:!0})).length},s.getQueryData=function(r,a){var l;return(l=this.queryCache.find(r,a))==null?void 0:l.state.data},s.getQueriesData=function(r){return this.getQueryCache().findAll(r).map(function(a){var l=a.queryKey,i=a.state,o=i.data;return[l,o]})},s.setQueryData=function(r,a,l){var i=Fa(r),o=this.defaultQueryOptions(i);return this.queryCache.build(this,o).setData(a,l)},s.setQueriesData=function(r,a,l){var i=this;return Re.batch(function(){return i.getQueryCache().findAll(r).map(function(o){var c=o.queryKey;return[c,i.setQueryData(c,a,l)]})})},s.getQueryState=function(r,a){var l;return(l=this.queryCache.find(r,a))==null?void 0:l.state},s.removeQueries=function(r,a){var l=ws(r,a),i=l[0],o=this.queryCache;Re.batch(function(){o.findAll(i).forEach(function(c){o.remove(c)})})},s.resetQueries=function(r,a,l){var i=this,o=ws(r,a,l),c=o[0],d=o[1],h=this.queryCache,u=fe({},c,{active:!0});return Re.batch(function(){return h.findAll(c).forEach(function(j){j.reset()}),i.refetchQueries(u,d)})},s.cancelQueries=function(r,a,l){var i=this,o=ws(r,a,l),c=o[0],d=o[1],h=d===void 0?{}:d;typeof h.revert>"u"&&(h.revert=!0);var u=Re.batch(function(){return i.queryCache.findAll(c).map(function(j){return j.cancel(h)})});return Promise.all(u).then(Ye).catch(Ye)},s.invalidateQueries=function(r,a,l){var i,o,c,d=this,h=ws(r,a,l),u=h[0],j=h[1],x=fe({},u,{active:(i=(o=u.refetchActive)!=null?o:u.active)!=null?i:!0,inactive:(c=u.refetchInactive)!=null?c:!1});return Re.batch(function(){return d.queryCache.findAll(u).forEach(function(y){y.invalidate()}),d.refetchQueries(x,j)})},s.refetchQueries=function(r,a,l){var i=this,o=ws(r,a,l),c=o[0],d=o[1],h=Re.batch(function(){return i.queryCache.findAll(c).map(function(j){return j.fetch(void 0,fe({},d,{meta:{refetchPage:c==null?void 0:c.refetchPage}}))})}),u=Promise.all(h).then(Ye);return d!=null&&d.throwOnError||(u=u.catch(Ye)),u},s.fetchQuery=function(r,a,l){var i=Fa(r,a,l),o=this.defaultQueryOptions(i);typeof o.retry>"u"&&(o.retry=!1);var c=this.queryCache.build(this,o);return c.isStaleByTime(o.staleTime)?c.fetch(o):Promise.resolve(c.state.data)},s.prefetchQuery=function(r,a,l){return this.fetchQuery(r,a,l).then(Ye).catch(Ye)},s.fetchInfiniteQuery=function(r,a,l){var i=Fa(r,a,l);return i.behavior=qv(),this.fetchQuery(i)},s.prefetchInfiniteQuery=function(r,a,l){return this.fetchInfiniteQuery(r,a,l).then(Ye).catch(Ye)},s.cancelMutations=function(){var r=this,a=Re.batch(function(){return r.mutationCache.getAll().map(function(l){return l.cancel()})});return Promise.all(a).then(Ye).catch(Ye)},s.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},s.executeMutation=function(r){return this.mutationCache.build(this,r).execute()},s.getQueryCache=function(){return this.queryCache},s.getMutationCache=function(){return this.mutationCache},s.getDefaultOptions=function(){return this.defaultOptions},s.setDefaultOptions=function(r){this.defaultOptions=r},s.setQueryDefaults=function(r,a){var l=this.queryDefaults.find(function(i){return sn(r)===sn(i.queryKey)});l?l.defaultOptions=a:this.queryDefaults.push({queryKey:r,defaultOptions:a})},s.getQueryDefaults=function(r){var a;return r?(a=this.queryDefaults.find(function(l){return xl(r,l.queryKey)}))==null?void 0:a.defaultOptions:void 0},s.setMutationDefaults=function(r,a){var l=this.mutationDefaults.find(function(i){return sn(r)===sn(i.mutationKey)});l?l.defaultOptions=a:this.mutationDefaults.push({mutationKey:r,defaultOptions:a})},s.getMutationDefaults=function(r){var a;return r?(a=this.mutationDefaults.find(function(l){return xl(r,l.mutationKey)}))==null?void 0:a.defaultOptions:void 0},s.defaultQueryOptions=function(r){if(r!=null&&r._defaulted)return r;var a=fe({},this.defaultOptions.queries,this.getQueryDefaults(r==null?void 0:r.queryKey),r,{_defaulted:!0});return!a.queryHash&&a.queryKey&&(a.queryHash=Fc(a.queryKey,a)),a},s.defaultQueryObserverOptions=function(r){return this.defaultQueryOptions(r)},s.defaultMutationOptions=function(r){return r!=null&&r._defaulted?r:fe({},this.defaultOptions.mutations,this.getMutationDefaults(r==null?void 0:r.mutationKey),r,{_defaulted:!0})},s.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},t}(),Vv=function(t){Jn(s,t);function s(r,a){var l;return l=t.call(this)||this,l.client=r,l.options=a,l.trackedProps=[],l.selectError=null,l.bindMethods(),l.setOptions(a),l}var n=s.prototype;return n.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},n.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),uu(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},n.onUnsubscribe=function(){this.listeners.length||this.destroy()},n.shouldFetchOnReconnect=function(){return Mo(this.currentQuery,this.options,this.options.refetchOnReconnect)},n.shouldFetchOnWindowFocus=function(){return Mo(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},n.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},n.setOptions=function(a,l){var i=this.options,o=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(a),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=i.queryKey),this.updateQuery();var c=this.hasListeners();c&&mu(this.currentQuery,o,this.options,i)&&this.executeFetch(),this.updateResult(l),c&&(this.currentQuery!==o||this.options.enabled!==i.enabled||this.options.staleTime!==i.staleTime)&&this.updateStaleTimeout();var d=this.computeRefetchInterval();c&&(this.currentQuery!==o||this.options.enabled!==i.enabled||d!==this.currentRefetchInterval)&&this.updateRefetchInterval(d)},n.getOptimisticResult=function(a){var l=this.client.defaultQueryObserverOptions(a),i=this.client.getQueryCache().build(this.client,l);return this.createResult(i,l)},n.getCurrentResult=function(){return this.currentResult},n.trackResult=function(a,l){var i=this,o={},c=function(h){i.trackedProps.includes(h)||i.trackedProps.push(h)};return Object.keys(a).forEach(function(d){Object.defineProperty(o,d,{configurable:!1,enumerable:!0,get:function(){return c(d),a[d]}})}),(l.useErrorBoundary||l.suspense)&&c("error"),o},n.getNextResult=function(a){var l=this;return new Promise(function(i,o){var c=l.subscribe(function(d){d.isFetching||(c(),d.isError&&(a!=null&&a.throwOnError)?o(d.error):i(d))})})},n.getCurrentQuery=function(){return this.currentQuery},n.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},n.refetch=function(a){return this.fetch(fe({},a,{meta:{refetchPage:a==null?void 0:a.refetchPage}}))},n.fetchOptimistic=function(a){var l=this,i=this.client.defaultQueryObserverOptions(a),o=this.client.getQueryCache().build(this.client,i);return o.fetch().then(function(){return l.createResult(o,i)})},n.fetch=function(a){var l=this;return this.executeFetch(a).then(function(){return l.updateResult(),l.currentResult})},n.executeFetch=function(a){this.updateQuery();var l=this.currentQuery.fetch(this.options,a);return a!=null&&a.throwOnError||(l=l.catch(Ye)),l},n.updateStaleTimeout=function(){var a=this;if(this.clearStaleTimeout(),!(fl||this.currentResult.isStale||!Po(this.options.staleTime))){var l=rf(this.currentResult.dataUpdatedAt,this.options.staleTime),i=l+1;this.staleTimeoutId=setTimeout(function(){a.currentResult.isStale||a.updateResult()},i)}},n.computeRefetchInterval=function(){var a;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(a=this.options.refetchInterval)!=null?a:!1},n.updateRefetchInterval=function(a){var l=this;this.clearRefetchInterval(),this.currentRefetchInterval=a,!(fl||this.options.enabled===!1||!Po(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(l.options.refetchIntervalInBackground||wr.isFocused())&&l.executeFetch()},this.currentRefetchInterval))},n.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},n.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},n.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},n.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},n.createResult=function(a,l){var i=this.currentQuery,o=this.options,c=this.currentResult,d=this.currentResultState,h=this.currentResultOptions,u=a!==i,j=u?a.state:this.currentQueryInitialState,x=u?this.currentResult:this.previousQueryResult,y=a.state,_=y.dataUpdatedAt,p=y.error,m=y.errorUpdatedAt,f=y.isFetching,g=y.status,v=!1,b=!1,k;if(l.optimisticResults){var C=this.hasListeners(),M=!C&&uu(a,l),U=C&&mu(a,i,l,o);(M||U)&&(f=!0,_||(g="loading"))}if(l.keepPreviousData&&!y.dataUpdateCount&&(x!=null&&x.isSuccess)&&g!=="error")k=x.data,_=x.dataUpdatedAt,g=x.status,v=!0;else if(l.select&&typeof y.data<"u")if(c&&y.data===(d==null?void 0:d.data)&&l.select===this.selectFn)k=this.selectResult;else try{this.selectFn=l.select,k=l.select(y.data),l.structuralSharing!==!1&&(k=gl(c==null?void 0:c.data,k)),this.selectResult=k,this.selectError=null}catch(J){jl().error(J),this.selectError=J}else k=y.data;if(typeof l.placeholderData<"u"&&typeof k>"u"&&(g==="loading"||g==="idle")){var Q;if(c!=null&&c.isPlaceholderData&&l.placeholderData===(h==null?void 0:h.placeholderData))Q=c.data;else if(Q=typeof l.placeholderData=="function"?l.placeholderData():l.placeholderData,l.select&&typeof Q<"u")try{Q=l.select(Q),l.structuralSharing!==!1&&(Q=gl(c==null?void 0:c.data,Q)),this.selectError=null}catch(J){jl().error(J),this.selectError=J}typeof Q<"u"&&(g="success",k=Q,b=!0)}this.selectError&&(p=this.selectError,k=this.selectResult,m=Date.now(),g="error");var K={status:g,isLoading:g==="loading",isSuccess:g==="success",isError:g==="error",isIdle:g==="idle",data:k,dataUpdatedAt:_,error:p,errorUpdatedAt:m,failureCount:y.fetchFailureCount,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>j.dataUpdateCount||y.errorUpdateCount>j.errorUpdateCount,isFetching:f,isRefetching:f&&g!=="loading",isLoadingError:g==="error"&&y.dataUpdatedAt===0,isPlaceholderData:b,isPreviousData:v,isRefetchError:g==="error"&&y.dataUpdatedAt!==0,isStale:Ac(a,l),refetch:this.refetch,remove:this.remove};return K},n.shouldNotifyListeners=function(a,l){if(!l)return!0;var i=this.options,o=i.notifyOnChangeProps,c=i.notifyOnChangePropsExclusions;if(!o&&!c||o==="tracked"&&!this.trackedProps.length)return!0;var d=o==="tracked"?this.trackedProps:o;return Object.keys(a).some(function(h){var u=h,j=a[u]!==l[u],x=d==null?void 0:d.some(function(_){return _===h}),y=c==null?void 0:c.some(function(_){return _===h});return j&&!y&&(!d||x)})},n.updateResult=function(a){var l=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Tv(this.currentResult,l)){var i={cache:!0};(a==null?void 0:a.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,l)&&(i.listeners=!0),this.notify(fe({},i,a))}},n.updateQuery=function(){var a=this.client.getQueryCache().build(this.client,this.options);if(a!==this.currentQuery){var l=this.currentQuery;this.currentQuery=a,this.currentQueryInitialState=a.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(l==null||l.removeObserver(this),a.addObserver(this))}},n.onQueryUpdate=function(a){var l={};a.type==="success"?l.onSuccess=!0:a.type==="error"&&!$a(a.error)&&(l.onError=!0),this.updateResult(l),this.hasListeners()&&this.updateTimers()},n.notify=function(a){var l=this;Re.batch(function(){a.onSuccess?(l.options.onSuccess==null||l.options.onSuccess(l.currentResult.data),l.options.onSettled==null||l.options.onSettled(l.currentResult.data,null)):a.onError&&(l.options.onError==null||l.options.onError(l.currentResult.error),l.options.onSettled==null||l.options.onSettled(void 0,l.currentResult.error)),a.listeners&&l.listeners.forEach(function(i){i(l.currentResult)}),a.cache&&l.client.getQueryCache().notify({query:l.currentQuery,type:"observerResultsUpdated"})})},s}(Xn);function Kv(t,s){return s.enabled!==!1&&!t.state.dataUpdatedAt&&!(t.state.status==="error"&&s.retryOnMount===!1)}function uu(t,s){return Kv(t,s)||t.state.dataUpdatedAt>0&&Mo(t,s,s.refetchOnMount)}function Mo(t,s,n){if(s.enabled!==!1){var r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Ac(t,s)}return!1}function mu(t,s,n,r){return n.enabled!==!1&&(t!==s||r.enabled===!1)&&(!n.suspense||t.state.status!=="error")&&Ac(t,n)}function Ac(t,s){return t.isStaleByTime(s.staleTime)}var Gv=function(t){Jn(s,t);function s(r,a){var l;return l=t.call(this)||this,l.client=r,l.setOptions(a),l.bindMethods(),l.updateResult(),l}var n=s.prototype;return n.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},n.setOptions=function(a){this.options=this.client.defaultMutationOptions(a)},n.onUnsubscribe=function(){if(!this.listeners.length){var a;(a=this.currentMutation)==null||a.removeObserver(this)}},n.onMutationUpdate=function(a){this.updateResult();var l={listeners:!0};a.type==="success"?l.onSuccess=!0:a.type==="error"&&(l.onError=!0),this.notify(l)},n.getCurrentResult=function(){return this.currentResult},n.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},n.mutate=function(a,l){return this.mutateOptions=l,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,fe({},this.options,{variables:typeof a<"u"?a:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},n.updateResult=function(){var a=this.currentMutation?this.currentMutation.state:uf(),l=fe({},a,{isLoading:a.status==="loading",isSuccess:a.status==="success",isError:a.status==="error",isIdle:a.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=l},n.notify=function(a){var l=this;Re.batch(function(){l.mutateOptions&&(a.onSuccess?(l.mutateOptions.onSuccess==null||l.mutateOptions.onSuccess(l.currentResult.data,l.currentResult.variables,l.currentResult.context),l.mutateOptions.onSettled==null||l.mutateOptions.onSettled(l.currentResult.data,null,l.currentResult.variables,l.currentResult.context)):a.onError&&(l.mutateOptions.onError==null||l.mutateOptions.onError(l.currentResult.error,l.currentResult.variables,l.currentResult.context),l.mutateOptions.onSettled==null||l.mutateOptions.onSettled(void 0,l.currentResult.error,l.currentResult.variables,l.currentResult.context))),a.listeners&&l.listeners.forEach(function(i){i(l.currentResult)})})},s}(Xn),Yv=wg.unstable_batchedUpdates;Re.setBatchNotifyFunction(Yv);var Jv=console;Iv(Jv);var hu=ce.createContext(void 0),mf=ce.createContext(!1);function hf(t){return t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=hu),window.ReactQueryClientContext):hu}var ss=function(){var s=ce.useContext(hf(ce.useContext(mf)));if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},Xv=function(s){var n=s.client,r=s.contextSharing,a=r===void 0?!1:r,l=s.children;ce.useEffect(function(){return n.mount(),function(){n.unmount()}},[n]);var i=hf(a);return ce.createElement(mf.Provider,{value:a},ce.createElement(i.Provider,{value:n},l))};function Zv(){var t=!1;return{clearReset:function(){t=!1},reset:function(){t=!0},isReset:function(){return t}}}var ej=ce.createContext(Zv()),tj=function(){return ce.useContext(ej)};function ff(t,s,n){return typeof s=="function"?s.apply(void 0,n):typeof s=="boolean"?s:!!t}function ct(t,s,n){var r=ce.useRef(!1),a=ce.useState(0),l=a[1],i=Pv(t,s,n),o=ss(),c=ce.useRef();c.current?c.current.setOptions(i):c.current=new Gv(o,i);var d=c.current.getCurrentResult();ce.useEffect(function(){r.current=!0;var u=c.current.subscribe(Re.batchCalls(function(){r.current&&l(function(j){return j+1})}));return function(){r.current=!1,u()}},[]);var h=ce.useCallback(function(u,j){c.current.mutate(u,j).catch(Ye)},[]);if(d.error&&ff(void 0,c.current.options.useErrorBoundary,[d.error]))throw d.error;return fe({},d,{mutate:h,mutateAsync:d.mutate})}function sj(t,s){var n=ce.useRef(!1),r=ce.useState(0),a=r[1],l=ss(),i=tj(),o=l.defaultQueryObserverOptions(t);o.optimisticResults=!0,o.onError&&(o.onError=Re.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=Re.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=Re.batchCalls(o.onSettled)),o.suspense&&(typeof o.staleTime!="number"&&(o.staleTime=1e3),o.cacheTime===0&&(o.cacheTime=1)),(o.suspense||o.useErrorBoundary)&&(i.isReset()||(o.retryOnMount=!1));var c=ce.useState(function(){return new s(l,o)}),d=c[0],h=d.getOptimisticResult(o);if(ce.useEffect(function(){n.current=!0,i.clearReset();var u=d.subscribe(Re.batchCalls(function(){n.current&&a(function(j){return j+1})}));return d.updateResult(),function(){n.current=!1,u()}},[i,d]),ce.useEffect(function(){d.setOptions(o,{listeners:!1})},[o,d]),o.suspense&&h.isLoading)throw d.fetchOptimistic(o).then(function(u){var j=u.data;o.onSuccess==null||o.onSuccess(j),o.onSettled==null||o.onSettled(j,null)}).catch(function(u){i.clearReset(),o.onError==null||o.onError(u),o.onSettled==null||o.onSettled(void 0,u)});if(h.isError&&!i.isReset()&&!h.isFetching&&ff(o.suspense,o.useErrorBoundary,[h.error,d.getCurrentQuery()]))throw h.error;return o.notifyOnChangeProps==="tracked"&&(h=d.trackResult(h,o)),h}function xe(t,s,n){var r=Fa(t,s,n);return sj(r,Vv)}function pf(t){var s,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(s=0;s<t.length;s++)t[s]&&(n=pf(t[s]))&&(r&&(r+=" "),r+=n);else for(s in t)t[s]&&(r&&(r+=" "),r+=s);return r}function Rs(){for(var t,s,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(s=pf(t))&&(r&&(r+=" "),r+=s);return r}const Sr=t=>typeof t=="number"&&!isNaN(t),hn=t=>typeof t=="string",pt=t=>typeof t=="function",Ia=t=>hn(t)||pt(t)?t:null,wi=t=>E.isValidElement(t)||hn(t)||pt(t)||Sr(t);function nj(t,s,n){n===void 0&&(n=300);const{scrollHeight:r,style:a}=t;requestAnimationFrame(()=>{a.minHeight="initial",a.height=r+"px",a.transition=`all ${n}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(s,n)})})}function Ql(t){let{enter:s,exit:n,appendPosition:r=!1,collapse:a=!0,collapseDuration:l=300}=t;return function(i){let{children:o,position:c,preventExitTransition:d,done:h,nodeRef:u,isIn:j}=i;const x=r?`${s}--${c}`:s,y=r?`${n}--${c}`:n,_=E.useRef(0);return E.useLayoutEffect(()=>{const p=u.current,m=x.split(" "),f=g=>{g.target===u.current&&(p.dispatchEvent(new Event("d")),p.removeEventListener("animationend",f),p.removeEventListener("animationcancel",f),_.current===0&&g.type!=="animationcancel"&&p.classList.remove(...m))};p.classList.add(...m),p.addEventListener("animationend",f),p.addEventListener("animationcancel",f)},[]),E.useEffect(()=>{const p=u.current,m=()=>{p.removeEventListener("animationend",m),a?nj(p,h,l):h()};j||(d?m():(_.current=1,p.className+=` ${y}`,p.addEventListener("animationend",m)))},[j]),ce.createElement(ce.Fragment,null,o)}}function fu(t,s){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:s}:{}}const Rt={list:new Map,emitQueue:new Map,on(t,s){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(s),this},off(t,s){if(s){const n=this.list.get(t).filter(r=>r!==s);return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit(t){const s=this.emitQueue.get(t);return s&&(s.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(s=>{const n=setTimeout(()=>{s(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(n)})}},ba=t=>{let{theme:s,type:n,...r}=t;return ce.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:s==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...r})},Si={info:function(t){return ce.createElement(ba,{...t},ce.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ce.createElement(ba,{...t},ce.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ce.createElement(ba,{...t},ce.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ce.createElement(ba,{...t},ce.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ce.createElement("div",{className:"Toastify__spinner"})}};function rj(t){const[,s]=E.useReducer(x=>x+1,0),[n,r]=E.useState([]),a=E.useRef(null),l=E.useRef(new Map).current,i=x=>n.indexOf(x)!==-1,o=E.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:i,getToast:x=>l.get(x)}).current;function c(x){let{containerId:y}=x;const{limit:_}=o.props;!_||y&&o.containerId!==y||(o.count-=o.queue.length,o.queue=[])}function d(x){r(y=>x==null?[]:y.filter(_=>_!==x))}function h(){const{toastContent:x,toastProps:y,staleId:_}=o.queue.shift();j(x,y,_)}function u(x,y){let{delay:_,staleId:p,...m}=y;if(!wi(x)||function(J){return!a.current||o.props.enableMultiContainer&&J.containerId!==o.props.containerId||l.has(J.toastId)&&J.updateId==null}(m))return;const{toastId:f,updateId:g,data:v}=m,{props:b}=o,k=()=>d(f),C=g==null;C&&o.count++;const M={...b,style:b.toastStyle,key:o.toastKey++,...Object.fromEntries(Object.entries(m).filter(J=>{let[O,$]=J;return $!=null})),toastId:f,updateId:g,data:v,closeToast:k,isIn:!1,className:Ia(m.className||b.toastClassName),bodyClassName:Ia(m.bodyClassName||b.bodyClassName),progressClassName:Ia(m.progressClassName||b.progressClassName),autoClose:!m.isLoading&&(U=m.autoClose,Q=b.autoClose,U===!1||Sr(U)&&U>0?U:Q),deleteToast(){const J=fu(l.get(f),"removed");l.delete(f),Rt.emit(4,J);const O=o.queue.length;if(o.count=f==null?o.count-o.displayedToast:o.count-1,o.count<0&&(o.count=0),O>0){const $=f==null?o.props.limit:1;if(O===1||$===1)o.displayedToast++,h();else{const N=$>O?O:$;o.displayedToast=N;for(let H=0;H<N;H++)h()}}else s()}};var U,Q;M.iconOut=function(J){let{theme:O,type:$,isLoading:N,icon:H}=J,L=null;const R={theme:O,type:$};return H===!1||(pt(H)?L=H(R):E.isValidElement(H)?L=E.cloneElement(H,R):hn(H)||Sr(H)?L=H:N?L=Si.spinner():(T=>T in Si)($)&&(L=Si[$](R))),L}(M),pt(m.onOpen)&&(M.onOpen=m.onOpen),pt(m.onClose)&&(M.onClose=m.onClose),M.closeButton=b.closeButton,m.closeButton===!1||wi(m.closeButton)?M.closeButton=m.closeButton:m.closeButton===!0&&(M.closeButton=!wi(b.closeButton)||b.closeButton);let K=x;E.isValidElement(x)&&!hn(x.type)?K=E.cloneElement(x,{closeToast:k,toastProps:M,data:v}):pt(x)&&(K=x({closeToast:k,toastProps:M,data:v})),b.limit&&b.limit>0&&o.count>b.limit&&C?o.queue.push({toastContent:K,toastProps:M,staleId:p}):Sr(_)?setTimeout(()=>{j(K,M,p)},_):j(K,M,p)}function j(x,y,_){const{toastId:p}=y;_&&l.delete(_);const m={content:x,props:y};l.set(p,m),r(f=>[...f,p].filter(g=>g!==_)),Rt.emit(4,fu(m,m.props.updateId==null?"added":"updated"))}return E.useEffect(()=>(o.containerId=t.containerId,Rt.cancelEmit(3).on(0,u).on(1,x=>a.current&&d(x)).on(5,c).emit(2,o),()=>{l.clear(),Rt.emit(3,o)}),[]),E.useEffect(()=>{o.props=t,o.isToastActive=i,o.displayedToast=n.length}),{getToastToRender:function(x){const y=new Map,_=Array.from(l.values());return t.newestOnTop&&_.reverse(),_.forEach(p=>{const{position:m}=p.props;y.has(m)||y.set(m,[]),y.get(m).push(p)}),Array.from(y,p=>x(p[0],p[1]))},containerRef:a,isToastActive:i}}function pu(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function xu(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function aj(t){const[s,n]=E.useState(!1),[r,a]=E.useState(!1),l=E.useRef(null),i=E.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,o=E.useRef(t),{autoClose:c,pauseOnHover:d,closeToast:h,onClick:u,closeOnClick:j}=t;function x(v){if(t.draggable){v.nativeEvent.type==="touchstart"&&v.nativeEvent.preventDefault(),i.didMove=!1,document.addEventListener("mousemove",m),document.addEventListener("mouseup",f),document.addEventListener("touchmove",m),document.addEventListener("touchend",f);const b=l.current;i.canCloseOnClick=!0,i.canDrag=!0,i.boundingRect=b.getBoundingClientRect(),b.style.transition="",i.x=pu(v.nativeEvent),i.y=xu(v.nativeEvent),t.draggableDirection==="x"?(i.start=i.x,i.removalDistance=b.offsetWidth*(t.draggablePercent/100)):(i.start=i.y,i.removalDistance=b.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function y(v){if(i.boundingRect){const{top:b,bottom:k,left:C,right:M}=i.boundingRect;v.nativeEvent.type!=="touchend"&&t.pauseOnHover&&i.x>=C&&i.x<=M&&i.y>=b&&i.y<=k?p():_()}}function _(){n(!0)}function p(){n(!1)}function m(v){const b=l.current;i.canDrag&&b&&(i.didMove=!0,s&&p(),i.x=pu(v),i.y=xu(v),i.delta=t.draggableDirection==="x"?i.x-i.start:i.y-i.start,i.start!==i.x&&(i.canCloseOnClick=!1),b.style.transform=`translate${t.draggableDirection}(${i.delta}px)`,b.style.opacity=""+(1-Math.abs(i.delta/i.removalDistance)))}function f(){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",f);const v=l.current;if(i.canDrag&&i.didMove&&v){if(i.canDrag=!1,Math.abs(i.delta)>i.removalDistance)return a(!0),void t.closeToast();v.style.transition="transform 0.2s, opacity 0.2s",v.style.transform=`translate${t.draggableDirection}(0)`,v.style.opacity="1"}}E.useEffect(()=>{o.current=t}),E.useEffect(()=>(l.current&&l.current.addEventListener("d",_,{once:!0}),pt(t.onOpen)&&t.onOpen(E.isValidElement(t.children)&&t.children.props),()=>{const v=o.current;pt(v.onClose)&&v.onClose(E.isValidElement(v.children)&&v.children.props)}),[]),E.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||p(),window.addEventListener("focus",_),window.addEventListener("blur",p)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",_),window.removeEventListener("blur",p))}),[t.pauseOnFocusLoss]);const g={onMouseDown:x,onTouchStart:x,onMouseUp:y,onTouchEnd:y};return c&&d&&(g.onMouseEnter=p,g.onMouseLeave=_),j&&(g.onClick=v=>{u&&u(v),i.canCloseOnClick&&h()}),{playToast:_,pauseToast:p,isRunning:s,preventExitTransition:r,toastRef:l,eventHandlers:g}}function xf(t){let{closeToast:s,theme:n,ariaLabel:r="close"}=t;return ce.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:a=>{a.stopPropagation(),s(a)},"aria-label":r},ce.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ce.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function lj(t){let{delay:s,isRunning:n,closeToast:r,type:a="default",hide:l,className:i,style:o,controlledProgress:c,progress:d,rtl:h,isIn:u,theme:j}=t;const x=l||c&&d===0,y={...o,animationDuration:`${s}ms`,animationPlayState:n?"running":"paused",opacity:x?0:1};c&&(y.transform=`scaleX(${d})`);const _=Rs("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${j}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":h}),p=pt(i)?i({rtl:h,type:a,defaultClassName:_}):Rs(_,i);return ce.createElement("div",{role:"progressbar","aria-hidden":x?"true":"false","aria-label":"notification timer",className:p,style:y,[c&&d>=1?"onTransitionEnd":"onAnimationEnd"]:c&&d<1?null:()=>{u&&r()}})}const ij=t=>{const{isRunning:s,preventExitTransition:n,toastRef:r,eventHandlers:a}=aj(t),{closeButton:l,children:i,autoClose:o,onClick:c,type:d,hideProgressBar:h,closeToast:u,transition:j,position:x,className:y,style:_,bodyClassName:p,bodyStyle:m,progressClassName:f,progressStyle:g,updateId:v,role:b,progress:k,rtl:C,toastId:M,deleteToast:U,isIn:Q,isLoading:K,iconOut:J,closeOnClick:O,theme:$}=t,N=Rs("Toastify__toast",`Toastify__toast-theme--${$}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":C},{"Toastify__toast--close-on-click":O}),H=pt(y)?y({rtl:C,position:x,type:d,defaultClassName:N}):Rs(N,y),L=!!k||!o,R={closeToast:u,type:d,theme:$};let T=null;return l===!1||(T=pt(l)?l(R):E.isValidElement(l)?E.cloneElement(l,R):xf(R)),ce.createElement(j,{isIn:Q,done:U,position:x,preventExitTransition:n,nodeRef:r},ce.createElement("div",{id:M,onClick:c,className:H,...a,style:_,ref:r},ce.createElement("div",{...Q&&{role:b},className:pt(p)?p({type:d}):Rs("Toastify__toast-body",p),style:m},J!=null&&ce.createElement("div",{className:Rs("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!K})},J),ce.createElement("div",null,i)),T,ce.createElement(lj,{...v&&!L?{key:`pb-${v}`}:{},rtl:C,theme:$,delay:o,isRunning:s,isIn:Q,closeToast:u,hide:h,type:d,style:g,className:f,controlledProgress:L,progress:k||0})))},ql=function(t,s){return s===void 0&&(s=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:s}},oj=Ql(ql("bounce",!0));Ql(ql("slide",!0));Ql(ql("zoom"));Ql(ql("flip"));const yl=E.forwardRef((t,s)=>{const{getToastToRender:n,containerRef:r,isToastActive:a}=rj(t),{className:l,style:i,rtl:o,containerId:c}=t;function d(h){const u=Rs("Toastify__toast-container",`Toastify__toast-container--${h}`,{"Toastify__toast-container--rtl":o});return pt(l)?l({position:h,rtl:o,defaultClassName:u}):Rs(u,Ia(l))}return E.useEffect(()=>{s&&(s.current=r.current)},[]),ce.createElement("div",{ref:r,className:"Toastify",id:c},n((h,u)=>{const j=u.length?{...i}:{...i,pointerEvents:"none"};return ce.createElement("div",{className:d(h),style:j,key:`container-${h}`},u.map((x,y)=>{let{content:_,props:p}=x;return ce.createElement(ij,{...p,isIn:a(p.toastId),style:{...p.style,"--nth":y+1,"--len":u.length},key:`toast-${p.key}`},_)}))}))});yl.displayName="ToastContainer",yl.defaultProps={position:"top-right",transition:oj,autoClose:5e3,closeButton:xf,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Ci,Js=new Map,fr=[],cj=1;function gf(){return""+cj++}function dj(t){return t&&(hn(t.toastId)||Sr(t.toastId))?t.toastId:gf()}function Cr(t,s){return Js.size>0?Rt.emit(0,t,s):fr.push({content:t,options:s}),s.toastId}function bl(t,s){return{...s,type:s&&s.type||t,toastId:dj(s)}}function Na(t){return(s,n)=>Cr(s,bl(t,n))}function q(t,s){return Cr(t,bl("default",s))}q.loading=(t,s)=>Cr(t,bl("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...s})),q.promise=function(t,s,n){let r,{pending:a,error:l,success:i}=s;a&&(r=hn(a)?q.loading(a,n):q.loading(a.render,{...n,...a}));const o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(h,u,j)=>{if(u==null)return void q.dismiss(r);const x={type:h,...o,...n,data:j},y=hn(u)?{render:u}:u;return r?q.update(r,{...x,...y}):q(y.render,{...x,...y}),j},d=pt(t)?t():t;return d.then(h=>c("success",i,h)).catch(h=>c("error",l,h)),d},q.success=Na("success"),q.info=Na("info"),q.error=Na("error"),q.warning=Na("warning"),q.warn=q.warning,q.dark=(t,s)=>Cr(t,bl("default",{theme:"dark",...s})),q.dismiss=t=>{Js.size>0?Rt.emit(1,t):fr=fr.filter(s=>t!=null&&s.options.toastId!==t)},q.clearWaitingQueue=function(t){return t===void 0&&(t={}),Rt.emit(5,t)},q.isActive=t=>{let s=!1;return Js.forEach(n=>{n.isToastActive&&n.isToastActive(t)&&(s=!0)}),s},q.update=function(t,s){s===void 0&&(s={}),setTimeout(()=>{const n=function(r,a){let{containerId:l}=a;const i=Js.get(l||Ci);return i&&i.getToast(r)}(t,s);if(n){const{props:r,content:a}=n,l={delay:100,...r,...s,toastId:s.toastId||t,updateId:gf()};l.toastId!==t&&(l.staleId=t);const i=l.render||a;delete l.render,Cr(i,l)}},0)},q.done=t=>{q.update(t,{progress:1})},q.onChange=t=>(Rt.on(4,t),()=>{Rt.off(4,t)}),q.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},q.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Rt.on(2,t=>{Ci=t.containerId||t,Js.set(Ci,t),fr.forEach(s=>{Rt.emit(0,s.content,s.options)}),fr=[]}).on(3,t=>{Js.delete(t.containerId||t),Js.size===0&&Rt.off(0).off(1).off(5)});function vf(t,s){return function(){return t.apply(s,arguments)}}const{toString:uj}=Object.prototype,{getPrototypeOf:$c}=Object,{iterator:Wl,toStringTag:jf}=Symbol,Hl=(t=>s=>{const n=uj.call(s);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ht=t=>(t=t.toLowerCase(),s=>Hl(s)===t),Vl=t=>s=>typeof s===t,{isArray:Zn}=Array,Hr=Vl("undefined");function Zr(t){return t!==null&&!Hr(t)&&t.constructor!==null&&!Hr(t.constructor)&&jt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const yf=Ht("ArrayBuffer");function mj(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&yf(t.buffer),s}const hj=Vl("string"),jt=Vl("function"),bf=Vl("number"),ea=t=>t!==null&&typeof t=="object",fj=t=>t===!0||t===!1,Da=t=>{if(Hl(t)!=="object")return!1;const s=$c(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(jf in t)&&!(Wl in t)},pj=t=>{if(!ea(t)||Zr(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},xj=Ht("Date"),gj=Ht("File"),vj=Ht("Blob"),jj=Ht("FileList"),yj=t=>ea(t)&&jt(t.pipe),bj=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||jt(t.append)&&((s=Hl(t))==="formdata"||s==="object"&&jt(t.toString)&&t.toString()==="[object FormData]"))},Nj=Ht("URLSearchParams"),[_j,wj,Sj,Cj]=["ReadableStream","Request","Response","Headers"].map(Ht),kj=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ta(t,s,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,a;if(typeof t!="object"&&(t=[t]),Zn(t))for(r=0,a=t.length;r<a;r++)s.call(null,t[r],r,t);else{if(Zr(t))return;const l=n?Object.getOwnPropertyNames(t):Object.keys(t),i=l.length;let o;for(r=0;r<i;r++)o=l[r],s.call(null,t[o],o,t)}}function Nf(t,s){if(Zr(t))return null;s=s.toLowerCase();const n=Object.keys(t);let r=n.length,a;for(;r-- >0;)if(a=n[r],s===a.toLowerCase())return a;return null}const nn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_f=t=>!Hr(t)&&t!==nn;function To(){const{caseless:t}=_f(this)&&this||{},s={},n=(r,a)=>{const l=t&&Nf(s,a)||a;Da(s[l])&&Da(r)?s[l]=To(s[l],r):Da(r)?s[l]=To({},r):Zn(r)?s[l]=r.slice():s[l]=r};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&ta(arguments[r],n);return s}const Ej=(t,s,n,{allOwnKeys:r}={})=>(ta(s,(a,l)=>{n&&jt(a)?t[l]=vf(a,n):t[l]=a},{allOwnKeys:r}),t),Pj=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Rj=(t,s,n,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),n&&Object.assign(t.prototype,n)},Mj=(t,s,n,r)=>{let a,l,i;const o={};if(s=s||{},t==null)return s;do{for(a=Object.getOwnPropertyNames(t),l=a.length;l-- >0;)i=a[l],(!r||r(i,t,s))&&!o[i]&&(s[i]=t[i],o[i]=!0);t=n!==!1&&$c(t)}while(t&&(!n||n(t,s))&&t!==Object.prototype);return s},Tj=(t,s,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=s.length;const r=t.indexOf(s,n);return r!==-1&&r===n},Oj=t=>{if(!t)return null;if(Zn(t))return t;let s=t.length;if(!bf(s))return null;const n=new Array(s);for(;s-- >0;)n[s]=t[s];return n},Lj=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&$c(Uint8Array)),Fj=(t,s)=>{const r=(t&&t[Wl]).call(t);let a;for(;(a=r.next())&&!a.done;){const l=a.value;s.call(t,l[0],l[1])}},Aj=(t,s)=>{let n;const r=[];for(;(n=t.exec(s))!==null;)r.push(n);return r},$j=Ht("HTMLFormElement"),Ij=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,a){return r.toUpperCase()+a}),gu=(({hasOwnProperty:t})=>(s,n)=>t.call(s,n))(Object.prototype),Dj=Ht("RegExp"),wf=(t,s)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ta(n,(a,l)=>{let i;(i=s(a,l,t))!==!1&&(r[l]=i||a)}),Object.defineProperties(t,r)},zj=t=>{wf(t,(s,n)=>{if(jt(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(jt(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Uj=(t,s)=>{const n={},r=a=>{a.forEach(l=>{n[l]=!0})};return Zn(t)?r(t):r(String(t).split(s)),n},Bj=()=>{},Qj=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function qj(t){return!!(t&&jt(t.append)&&t[jf]==="FormData"&&t[Wl])}const Wj=t=>{const s=new Array(10),n=(r,a)=>{if(ea(r)){if(s.indexOf(r)>=0)return;if(Zr(r))return r;if(!("toJSON"in r)){s[a]=r;const l=Zn(r)?[]:{};return ta(r,(i,o)=>{const c=n(i,a+1);!Hr(c)&&(l[o]=c)}),s[a]=void 0,l}}return r};return n(t,0)},Hj=Ht("AsyncFunction"),Vj=t=>t&&(ea(t)||jt(t))&&jt(t.then)&&jt(t.catch),Sf=((t,s)=>t?setImmediate:s?((n,r)=>(nn.addEventListener("message",({source:a,data:l})=>{a===nn&&l===n&&r.length&&r.shift()()},!1),a=>{r.push(a),nn.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",jt(nn.postMessage)),Kj=typeof queueMicrotask<"u"?queueMicrotask.bind(nn):typeof process<"u"&&process.nextTick||Sf,Gj=t=>t!=null&&jt(t[Wl]),B={isArray:Zn,isArrayBuffer:yf,isBuffer:Zr,isFormData:bj,isArrayBufferView:mj,isString:hj,isNumber:bf,isBoolean:fj,isObject:ea,isPlainObject:Da,isEmptyObject:pj,isReadableStream:_j,isRequest:wj,isResponse:Sj,isHeaders:Cj,isUndefined:Hr,isDate:xj,isFile:gj,isBlob:vj,isRegExp:Dj,isFunction:jt,isStream:yj,isURLSearchParams:Nj,isTypedArray:Lj,isFileList:jj,forEach:ta,merge:To,extend:Ej,trim:kj,stripBOM:Pj,inherits:Rj,toFlatObject:Mj,kindOf:Hl,kindOfTest:Ht,endsWith:Tj,toArray:Oj,forEachEntry:Fj,matchAll:Aj,isHTMLForm:$j,hasOwnProperty:gu,hasOwnProp:gu,reduceDescriptors:wf,freezeMethods:zj,toObjectSet:Uj,toCamelCase:Ij,noop:Bj,toFiniteNumber:Qj,findKey:Nf,global:nn,isContextDefined:_f,isSpecCompliantForm:qj,toJSONObject:Wj,isAsyncFn:Hj,isThenable:Vj,setImmediate:Sf,asap:Kj,isIterable:Gj};function me(t,s,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}B.inherits(me,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}});const Cf=me.prototype,kf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{kf[t]={value:t}});Object.defineProperties(me,kf);Object.defineProperty(Cf,"isAxiosError",{value:!0});me.from=(t,s,n,r,a,l)=>{const i=Object.create(Cf);return B.toFlatObject(t,i,function(c){return c!==Error.prototype},o=>o!=="isAxiosError"),me.call(i,t.message,s,n,r,a),i.cause=t,i.name=t.name,l&&Object.assign(i,l),i};const Yj=null;function Oo(t){return B.isPlainObject(t)||B.isArray(t)}function Ef(t){return B.endsWith(t,"[]")?t.slice(0,-2):t}function vu(t,s,n){return t?t.concat(s).map(function(a,l){return a=Ef(a),!n&&l?"["+a+"]":a}).join(n?".":""):s}function Jj(t){return B.isArray(t)&&!t.some(Oo)}const Xj=B.toFlatObject(B,{},null,function(s){return/^is[A-Z]/.test(s)});function Kl(t,s,n){if(!B.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,n=B.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,p){return!B.isUndefined(p[_])});const r=n.metaTokens,a=n.visitor||h,l=n.dots,i=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(s);if(!B.isFunction(a))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(B.isDate(y))return y.toISOString();if(B.isBoolean(y))return y.toString();if(!c&&B.isBlob(y))throw new me("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(y)||B.isTypedArray(y)?c&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,_,p){let m=y;if(y&&!p&&typeof y=="object"){if(B.endsWith(_,"{}"))_=r?_:_.slice(0,-2),y=JSON.stringify(y);else if(B.isArray(y)&&Jj(y)||(B.isFileList(y)||B.endsWith(_,"[]"))&&(m=B.toArray(y)))return _=Ef(_),m.forEach(function(g,v){!(B.isUndefined(g)||g===null)&&s.append(i===!0?vu([_],v,l):i===null?_:_+"[]",d(g))}),!1}return Oo(y)?!0:(s.append(vu(p,_,l),d(y)),!1)}const u=[],j=Object.assign(Xj,{defaultVisitor:h,convertValue:d,isVisitable:Oo});function x(y,_){if(!B.isUndefined(y)){if(u.indexOf(y)!==-1)throw Error("Circular reference detected in "+_.join("."));u.push(y),B.forEach(y,function(m,f){(!(B.isUndefined(m)||m===null)&&a.call(s,m,B.isString(f)?f.trim():f,_,j))===!0&&x(m,_?_.concat(f):[f])}),u.pop()}}if(!B.isObject(t))throw new TypeError("data must be an object");return x(t),s}function ju(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Ic(t,s){this._pairs=[],t&&Kl(t,this,s)}const Pf=Ic.prototype;Pf.append=function(s,n){this._pairs.push([s,n])};Pf.toString=function(s){const n=s?function(r){return s.call(this,r,ju)}:ju;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function Zj(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Rf(t,s,n){if(!s)return t;const r=n&&n.encode||Zj;B.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let l;if(a?l=a(s,n):l=B.isURLSearchParams(s)?s.toString():new Ic(s,n).toString(r),l){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class yu{constructor(){this.handlers=[]}use(s,n,r){return this.handlers.push({fulfilled:s,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){B.forEach(this.handlers,function(r){r!==null&&s(r)})}}const Mf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},e0=typeof URLSearchParams<"u"?URLSearchParams:Ic,t0=typeof FormData<"u"?FormData:null,s0=typeof Blob<"u"?Blob:null,n0={isBrowser:!0,classes:{URLSearchParams:e0,FormData:t0,Blob:s0},protocols:["http","https","file","blob","url","data"]},Dc=typeof window<"u"&&typeof document<"u",Lo=typeof navigator=="object"&&navigator||void 0,r0=Dc&&(!Lo||["ReactNative","NativeScript","NS"].indexOf(Lo.product)<0),a0=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",l0=Dc&&window.location.href||"http://localhost",i0=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Dc,hasStandardBrowserEnv:r0,hasStandardBrowserWebWorkerEnv:a0,navigator:Lo,origin:l0},Symbol.toStringTag,{value:"Module"})),nt={...i0,...n0};function o0(t,s){return Kl(t,new nt.classes.URLSearchParams,{visitor:function(n,r,a,l){return nt.isNode&&B.isBuffer(n)?(this.append(r,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...s})}function c0(t){return B.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function d0(t){const s={},n=Object.keys(t);let r;const a=n.length;let l;for(r=0;r<a;r++)l=n[r],s[l]=t[l];return s}function Tf(t){function s(n,r,a,l){let i=n[l++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),c=l>=n.length;return i=!i&&B.isArray(a)?a.length:i,c?(B.hasOwnProp(a,i)?a[i]=[a[i],r]:a[i]=r,!o):((!a[i]||!B.isObject(a[i]))&&(a[i]=[]),s(n,r,a[i],l)&&B.isArray(a[i])&&(a[i]=d0(a[i])),!o)}if(B.isFormData(t)&&B.isFunction(t.entries)){const n={};return B.forEachEntry(t,(r,a)=>{s(c0(r),a,n,0)}),n}return null}function u0(t,s,n){if(B.isString(t))try{return(s||JSON.parse)(t),B.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const sa={transitional:Mf,adapter:["xhr","http","fetch"],transformRequest:[function(s,n){const r=n.getContentType()||"",a=r.indexOf("application/json")>-1,l=B.isObject(s);if(l&&B.isHTMLForm(s)&&(s=new FormData(s)),B.isFormData(s))return a?JSON.stringify(Tf(s)):s;if(B.isArrayBuffer(s)||B.isBuffer(s)||B.isStream(s)||B.isFile(s)||B.isBlob(s)||B.isReadableStream(s))return s;if(B.isArrayBufferView(s))return s.buffer;if(B.isURLSearchParams(s))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(l){if(r.indexOf("application/x-www-form-urlencoded")>-1)return o0(s,this.formSerializer).toString();if((o=B.isFileList(s))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Kl(o?{"files[]":s}:s,c&&new c,this.formSerializer)}}return l||a?(n.setContentType("application/json",!1),u0(s)):s}],transformResponse:[function(s){const n=this.transitional||sa.transitional,r=n&&n.forcedJSONParsing,a=this.responseType==="json";if(B.isResponse(s)||B.isReadableStream(s))return s;if(s&&B.isString(s)&&(r&&!this.responseType||a)){const i=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(s)}catch(o){if(i)throw o.name==="SyntaxError"?me.from(o,me.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nt.classes.FormData,Blob:nt.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],t=>{sa.headers[t]={}});const m0=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),h0=t=>{const s={};let n,r,a;return t&&t.split(`
`).forEach(function(i){a=i.indexOf(":"),n=i.substring(0,a).trim().toLowerCase(),r=i.substring(a+1).trim(),!(!n||s[n]&&m0[n])&&(n==="set-cookie"?s[n]?s[n].push(r):s[n]=[r]:s[n]=s[n]?s[n]+", "+r:r)}),s},bu=Symbol("internals");function cr(t){return t&&String(t).trim().toLowerCase()}function za(t){return t===!1||t==null?t:B.isArray(t)?t.map(za):String(t)}function f0(t){const s=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)s[r[1]]=r[2];return s}const p0=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ki(t,s,n,r,a){if(B.isFunction(r))return r.call(this,s,n);if(a&&(s=n),!!B.isString(s)){if(B.isString(r))return s.indexOf(r)!==-1;if(B.isRegExp(r))return r.test(s)}}function x0(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,n,r)=>n.toUpperCase()+r)}function g0(t,s){const n=B.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(a,l,i){return this[r].call(this,s,a,l,i)},configurable:!0})})}let yt=class{constructor(s){s&&this.set(s)}set(s,n,r){const a=this;function l(o,c,d){const h=cr(c);if(!h)throw new Error("header name must be a non-empty string");const u=B.findKey(a,h);(!u||a[u]===void 0||d===!0||d===void 0&&a[u]!==!1)&&(a[u||c]=za(o))}const i=(o,c)=>B.forEach(o,(d,h)=>l(d,h,c));if(B.isPlainObject(s)||s instanceof this.constructor)i(s,n);else if(B.isString(s)&&(s=s.trim())&&!p0(s))i(h0(s),n);else if(B.isObject(s)&&B.isIterable(s)){let o={},c,d;for(const h of s){if(!B.isArray(h))throw TypeError("Object iterator must return a key-value pair");o[d=h[0]]=(c=o[d])?B.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}i(o,n)}else s!=null&&l(n,s,r);return this}get(s,n){if(s=cr(s),s){const r=B.findKey(this,s);if(r){const a=this[r];if(!n)return a;if(n===!0)return f0(a);if(B.isFunction(n))return n.call(this,a,r);if(B.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,n){if(s=cr(s),s){const r=B.findKey(this,s);return!!(r&&this[r]!==void 0&&(!n||ki(this,this[r],r,n)))}return!1}delete(s,n){const r=this;let a=!1;function l(i){if(i=cr(i),i){const o=B.findKey(r,i);o&&(!n||ki(r,r[o],o,n))&&(delete r[o],a=!0)}}return B.isArray(s)?s.forEach(l):l(s),a}clear(s){const n=Object.keys(this);let r=n.length,a=!1;for(;r--;){const l=n[r];(!s||ki(this,this[l],l,s,!0))&&(delete this[l],a=!0)}return a}normalize(s){const n=this,r={};return B.forEach(this,(a,l)=>{const i=B.findKey(r,l);if(i){n[i]=za(a),delete n[l];return}const o=s?x0(l):String(l).trim();o!==l&&delete n[l],n[o]=za(a),r[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const n=Object.create(null);return B.forEach(this,(r,a)=>{r!=null&&r!==!1&&(n[a]=s&&B.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,n])=>s+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...n){const r=new this(s);return n.forEach(a=>r.set(a)),r}static accessor(s){const r=(this[bu]=this[bu]={accessors:{}}).accessors,a=this.prototype;function l(i){const o=cr(i);r[o]||(g0(a,i),r[o]=!0)}return B.isArray(s)?s.forEach(l):l(s),this}};yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(yt.prototype,({value:t},s)=>{let n=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[n]=r}}});B.freezeMethods(yt);function Ei(t,s){const n=this||sa,r=s||n,a=yt.from(r.headers);let l=r.data;return B.forEach(t,function(o){l=o.call(n,l,a.normalize(),s?s.status:void 0)}),a.normalize(),l}function Of(t){return!!(t&&t.__CANCEL__)}function er(t,s,n){me.call(this,t??"canceled",me.ERR_CANCELED,s,n),this.name="CanceledError"}B.inherits(er,me,{__CANCEL__:!0});function Lf(t,s,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):s(new me("Request failed with status code "+n.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function v0(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function j0(t,s){t=t||10;const n=new Array(t),r=new Array(t);let a=0,l=0,i;return s=s!==void 0?s:1e3,function(c){const d=Date.now(),h=r[l];i||(i=d),n[a]=c,r[a]=d;let u=l,j=0;for(;u!==a;)j+=n[u++],u=u%t;if(a=(a+1)%t,a===l&&(l=(l+1)%t),d-i<s)return;const x=h&&d-h;return x?Math.round(j*1e3/x):void 0}}function y0(t,s){let n=0,r=1e3/s,a,l;const i=(d,h=Date.now())=>{n=h,a=null,l&&(clearTimeout(l),l=null),t(...d)};return[(...d)=>{const h=Date.now(),u=h-n;u>=r?i(d,h):(a=d,l||(l=setTimeout(()=>{l=null,i(a)},r-u)))},()=>a&&i(a)]}const Nl=(t,s,n=3)=>{let r=0;const a=j0(50,250);return y0(l=>{const i=l.loaded,o=l.lengthComputable?l.total:void 0,c=i-r,d=a(c),h=i<=o;r=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:c,rate:d||void 0,estimated:d&&o&&h?(o-i)/d:void 0,event:l,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(u)},n)},Nu=(t,s)=>{const n=t!=null;return[r=>s[0]({lengthComputable:n,total:t,loaded:r}),s[1]]},_u=t=>(...s)=>B.asap(()=>t(...s)),b0=nt.hasStandardBrowserEnv?((t,s)=>n=>(n=new URL(n,nt.origin),t.protocol===n.protocol&&t.host===n.host&&(s||t.port===n.port)))(new URL(nt.origin),nt.navigator&&/(msie|trident)/i.test(nt.navigator.userAgent)):()=>!0,N0=nt.hasStandardBrowserEnv?{write(t,s,n,r,a,l){const i=[t+"="+encodeURIComponent(s)];B.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),B.isString(r)&&i.push("path="+r),B.isString(a)&&i.push("domain="+a),l===!0&&i.push("secure"),document.cookie=i.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _0(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function w0(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Ff(t,s,n){let r=!_0(s);return t&&(r||n==!1)?w0(t,s):s}const wu=t=>t instanceof yt?{...t}:t;function fn(t,s){s=s||{};const n={};function r(d,h,u,j){return B.isPlainObject(d)&&B.isPlainObject(h)?B.merge.call({caseless:j},d,h):B.isPlainObject(h)?B.merge({},h):B.isArray(h)?h.slice():h}function a(d,h,u,j){if(B.isUndefined(h)){if(!B.isUndefined(d))return r(void 0,d,u,j)}else return r(d,h,u,j)}function l(d,h){if(!B.isUndefined(h))return r(void 0,h)}function i(d,h){if(B.isUndefined(h)){if(!B.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function o(d,h,u){if(u in s)return r(d,h);if(u in t)return r(void 0,d)}const c={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(d,h,u)=>a(wu(d),wu(h),u,!0)};return B.forEach(Object.keys({...t,...s}),function(h){const u=c[h]||a,j=u(t[h],s[h],h);B.isUndefined(j)&&u!==o||(n[h]=j)}),n}const Af=t=>{const s=fn({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:l,headers:i,auth:o}=s;s.headers=i=yt.from(i),s.url=Rf(Ff(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let c;if(B.isFormData(n)){if(nt.hasStandardBrowserEnv||nt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if((c=i.getContentType())!==!1){const[d,...h]=c?c.split(";").map(u=>u.trim()).filter(Boolean):[];i.setContentType([d||"multipart/form-data",...h].join("; "))}}if(nt.hasStandardBrowserEnv&&(r&&B.isFunction(r)&&(r=r(s)),r||r!==!1&&b0(s.url))){const d=a&&l&&N0.read(l);d&&i.set(a,d)}return s},S0=typeof XMLHttpRequest<"u",C0=S0&&function(t){return new Promise(function(n,r){const a=Af(t);let l=a.data;const i=yt.from(a.headers).normalize();let{responseType:o,onUploadProgress:c,onDownloadProgress:d}=a,h,u,j,x,y;function _(){x&&x(),y&&y(),a.cancelToken&&a.cancelToken.unsubscribe(h),a.signal&&a.signal.removeEventListener("abort",h)}let p=new XMLHttpRequest;p.open(a.method.toUpperCase(),a.url,!0),p.timeout=a.timeout;function m(){if(!p)return;const g=yt.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),b={data:!o||o==="text"||o==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:g,config:t,request:p};Lf(function(C){n(C),_()},function(C){r(C),_()},b),p=null}"onloadend"in p?p.onloadend=m:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(m)},p.onabort=function(){p&&(r(new me("Request aborted",me.ECONNABORTED,t,p)),p=null)},p.onerror=function(){r(new me("Network Error",me.ERR_NETWORK,t,p)),p=null},p.ontimeout=function(){let v=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const b=a.transitional||Mf;a.timeoutErrorMessage&&(v=a.timeoutErrorMessage),r(new me(v,b.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,t,p)),p=null},l===void 0&&i.setContentType(null),"setRequestHeader"in p&&B.forEach(i.toJSON(),function(v,b){p.setRequestHeader(b,v)}),B.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),o&&o!=="json"&&(p.responseType=a.responseType),d&&([j,y]=Nl(d,!0),p.addEventListener("progress",j)),c&&p.upload&&([u,x]=Nl(c),p.upload.addEventListener("progress",u),p.upload.addEventListener("loadend",x)),(a.cancelToken||a.signal)&&(h=g=>{p&&(r(!g||g.type?new er(null,t,p):g),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(h),a.signal&&(a.signal.aborted?h():a.signal.addEventListener("abort",h)));const f=v0(a.url);if(f&&nt.protocols.indexOf(f)===-1){r(new me("Unsupported protocol "+f+":",me.ERR_BAD_REQUEST,t));return}p.send(l||null)})},k0=(t,s)=>{const{length:n}=t=t?t.filter(Boolean):[];if(s||n){let r=new AbortController,a;const l=function(d){if(!a){a=!0,o();const h=d instanceof Error?d:this.reason;r.abort(h instanceof me?h:new er(h instanceof Error?h.message:h))}};let i=s&&setTimeout(()=>{i=null,l(new me(`timeout ${s} of ms exceeded`,me.ETIMEDOUT))},s);const o=()=>{t&&(i&&clearTimeout(i),i=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(l):d.removeEventListener("abort",l)}),t=null)};t.forEach(d=>d.addEventListener("abort",l));const{signal:c}=r;return c.unsubscribe=()=>B.asap(o),c}},E0=function*(t,s){let n=t.byteLength;if(n<s){yield t;return}let r=0,a;for(;r<n;)a=r+s,yield t.slice(r,a),r=a},P0=async function*(t,s){for await(const n of R0(t))yield*E0(n,s)},R0=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:n,value:r}=await s.read();if(n)break;yield r}}finally{await s.cancel()}},Su=(t,s,n,r)=>{const a=P0(t,s);let l=0,i,o=c=>{i||(i=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await a.next();if(d){o(),c.close();return}let u=h.byteLength;if(n){let j=l+=u;n(j)}c.enqueue(new Uint8Array(h))}catch(d){throw o(d),d}},cancel(c){return o(c),a.return()}},{highWaterMark:2})},Gl=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",$f=Gl&&typeof ReadableStream=="function",M0=Gl&&(typeof TextEncoder=="function"?(t=>s=>t.encode(s))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),If=(t,...s)=>{try{return!!t(...s)}catch{return!1}},T0=$f&&If(()=>{let t=!1;const s=new Request(nt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!s}),Cu=64*1024,Fo=$f&&If(()=>B.isReadableStream(new Response("").body)),_l={stream:Fo&&(t=>t.body)};Gl&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(s=>{!_l[s]&&(_l[s]=B.isFunction(t[s])?n=>n[s]():(n,r)=>{throw new me(`Response type '${s}' is not supported`,me.ERR_NOT_SUPPORT,r)})})})(new Response);const O0=async t=>{if(t==null)return 0;if(B.isBlob(t))return t.size;if(B.isSpecCompliantForm(t))return(await new Request(nt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(B.isArrayBufferView(t)||B.isArrayBuffer(t))return t.byteLength;if(B.isURLSearchParams(t)&&(t=t+""),B.isString(t))return(await M0(t)).byteLength},L0=async(t,s)=>{const n=B.toFiniteNumber(t.getContentLength());return n??O0(s)},F0=Gl&&(async t=>{let{url:s,method:n,data:r,signal:a,cancelToken:l,timeout:i,onDownloadProgress:o,onUploadProgress:c,responseType:d,headers:h,withCredentials:u="same-origin",fetchOptions:j}=Af(t);d=d?(d+"").toLowerCase():"text";let x=k0([a,l&&l.toAbortSignal()],i),y;const _=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let p;try{if(c&&T0&&n!=="get"&&n!=="head"&&(p=await L0(h,r))!==0){let b=new Request(s,{method:"POST",body:r,duplex:"half"}),k;if(B.isFormData(r)&&(k=b.headers.get("content-type"))&&h.setContentType(k),b.body){const[C,M]=Nu(p,Nl(_u(c)));r=Su(b.body,Cu,C,M)}}B.isString(u)||(u=u?"include":"omit");const m="credentials"in Request.prototype;y=new Request(s,{...j,signal:x,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:m?u:void 0});let f=await fetch(y,j);const g=Fo&&(d==="stream"||d==="response");if(Fo&&(o||g&&_)){const b={};["status","statusText","headers"].forEach(U=>{b[U]=f[U]});const k=B.toFiniteNumber(f.headers.get("content-length")),[C,M]=o&&Nu(k,Nl(_u(o),!0))||[];f=new Response(Su(f.body,Cu,C,()=>{M&&M(),_&&_()}),b)}d=d||"text";let v=await _l[B.findKey(_l,d)||"text"](f,t);return!g&&_&&_(),await new Promise((b,k)=>{Lf(b,k,{data:v,headers:yt.from(f.headers),status:f.status,statusText:f.statusText,config:t,request:y})})}catch(m){throw _&&_(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new me("Network Error",me.ERR_NETWORK,t,y),{cause:m.cause||m}):me.from(m,m&&m.code,t,y)}}),Ao={http:Yj,xhr:C0,fetch:F0};B.forEach(Ao,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const ku=t=>`- ${t}`,A0=t=>B.isFunction(t)||t===null||t===!1,Df={getAdapter:t=>{t=B.isArray(t)?t:[t];const{length:s}=t;let n,r;const a={};for(let l=0;l<s;l++){n=t[l];let i;if(r=n,!A0(n)&&(r=Ao[(i=String(n)).toLowerCase()],r===void 0))throw new me(`Unknown adapter '${i}'`);if(r)break;a[i||"#"+l]=r}if(!r){const l=Object.entries(a).map(([o,c])=>`adapter ${o} `+(c===!1?"is not supported by the environment":"is not available in the build"));let i=s?l.length>1?`since :
`+l.map(ku).join(`
`):" "+ku(l[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+i,"ERR_NOT_SUPPORT")}return r},adapters:Ao};function Pi(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new er(null,t)}function Eu(t){return Pi(t),t.headers=yt.from(t.headers),t.data=Ei.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Df.getAdapter(t.adapter||sa.adapter)(t).then(function(r){return Pi(t),r.data=Ei.call(t,t.transformResponse,r),r.headers=yt.from(r.headers),r},function(r){return Of(r)||(Pi(t),r&&r.response&&(r.response.data=Ei.call(t,t.transformResponse,r.response),r.response.headers=yt.from(r.response.headers))),Promise.reject(r)})}const zf="1.11.0",Yl={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{Yl[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const Pu={};Yl.transitional=function(s,n,r){function a(l,i){return"[Axios v"+zf+"] Transitional option '"+l+"'"+i+(r?". "+r:"")}return(l,i,o)=>{if(s===!1)throw new me(a(i," has been removed"+(n?" in "+n:"")),me.ERR_DEPRECATED);return n&&!Pu[i]&&(Pu[i]=!0,console.warn(a(i," has been deprecated since v"+n+" and will be removed in the near future"))),s?s(l,i,o):!0}};Yl.spelling=function(s){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function $0(t,s,n){if(typeof t!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let a=r.length;for(;a-- >0;){const l=r[a],i=s[l];if(i){const o=t[l],c=o===void 0||i(o,l,t);if(c!==!0)throw new me("option "+l+" must be "+c,me.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new me("Unknown option "+l,me.ERR_BAD_OPTION)}}const Ua={assertOptions:$0,validators:Yl},Jt=Ua.validators;let ln=class{constructor(s){this.defaults=s||{},this.interceptors={request:new yu,response:new yu}}async request(s,n){try{return await this._request(s,n)}catch(r){if(r instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const l=a.stack?a.stack.replace(/^.+\n/,""):"";try{r.stack?l&&!String(r.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+l):r.stack=l}catch{}}throw r}}_request(s,n){typeof s=="string"?(n=n||{},n.url=s):n=s||{},n=fn(this.defaults,n);const{transitional:r,paramsSerializer:a,headers:l}=n;r!==void 0&&Ua.assertOptions(r,{silentJSONParsing:Jt.transitional(Jt.boolean),forcedJSONParsing:Jt.transitional(Jt.boolean),clarifyTimeoutError:Jt.transitional(Jt.boolean)},!1),a!=null&&(B.isFunction(a)?n.paramsSerializer={serialize:a}:Ua.assertOptions(a,{encode:Jt.function,serialize:Jt.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Ua.assertOptions(n,{baseUrl:Jt.spelling("baseURL"),withXsrfToken:Jt.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=l&&B.merge(l.common,l[n.method]);l&&B.forEach(["delete","get","head","post","put","patch","common"],y=>{delete l[y]}),n.headers=yt.concat(i,l);const o=[];let c=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(n)===!1||(c=c&&_.synchronous,o.unshift(_.fulfilled,_.rejected))});const d=[];this.interceptors.response.forEach(function(_){d.push(_.fulfilled,_.rejected)});let h,u=0,j;if(!c){const y=[Eu.bind(this),void 0];for(y.unshift(...o),y.push(...d),j=y.length,h=Promise.resolve(n);u<j;)h=h.then(y[u++],y[u++]);return h}j=o.length;let x=n;for(u=0;u<j;){const y=o[u++],_=o[u++];try{x=y(x)}catch(p){_.call(this,p);break}}try{h=Eu.call(this,x)}catch(y){return Promise.reject(y)}for(u=0,j=d.length;u<j;)h=h.then(d[u++],d[u++]);return h}getUri(s){s=fn(this.defaults,s);const n=Ff(s.baseURL,s.url,s.allowAbsoluteUrls);return Rf(n,s.params,s.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(s){ln.prototype[s]=function(n,r){return this.request(fn(r||{},{method:s,url:n,data:(r||{}).data}))}});B.forEach(["post","put","patch"],function(s){function n(r){return function(l,i,o){return this.request(fn(o||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}ln.prototype[s]=n(),ln.prototype[s+"Form"]=n(!0)});let I0=class Uf{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const r=this;this.promise.then(a=>{if(!r._listeners)return;let l=r._listeners.length;for(;l-- >0;)r._listeners[l](a);r._listeners=null}),this.promise.then=a=>{let l;const i=new Promise(o=>{r.subscribe(o),l=o}).then(a);return i.cancel=function(){r.unsubscribe(l)},i},s(function(l,i,o){r.reason||(r.reason=new er(l,i,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const n=this._listeners.indexOf(s);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const s=new AbortController,n=r=>{s.abort(r)};return this.subscribe(n),s.signal.unsubscribe=()=>this.unsubscribe(n),s.signal}static source(){let s;return{token:new Uf(function(a){s=a}),cancel:s}}};function D0(t){return function(n){return t.apply(null,n)}}function z0(t){return B.isObject(t)&&t.isAxiosError===!0}const $o={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($o).forEach(([t,s])=>{$o[s]=t});function Bf(t){const s=new ln(t),n=vf(ln.prototype.request,s);return B.extend(n,ln.prototype,s,{allOwnKeys:!0}),B.extend(n,s,null,{allOwnKeys:!0}),n.create=function(a){return Bf(fn(t,a))},n}const De=Bf(sa);De.Axios=ln;De.CanceledError=er;De.CancelToken=I0;De.isCancel=Of;De.VERSION=zf;De.toFormData=Kl;De.AxiosError=me;De.Cancel=De.CanceledError;De.all=function(s){return Promise.all(s)};De.spread=D0;De.isAxiosError=z0;De.mergeConfig=fn;De.AxiosHeaders=yt;De.formToJSON=t=>Tf(B.isHTMLForm(t)?new FormData(t):t);De.getAdapter=Df.getAdapter;De.HttpStatusCode=$o;De.default=De;const{Axios:by,AxiosError:Ny,CanceledError:_y,isCancel:wy,CancelToken:Sy,VERSION:Cy,all:ky,Cancel:Ey,isAxiosError:Py,spread:Ry,toFormData:My,AxiosHeaders:Ty,HttpStatusCode:Oy,formToJSON:Ly,getAdapter:Fy,mergeConfig:Ay}=De,U0="http://localhost:8000",ee=De.create({baseURL:U0,timeout:1e4,headers:{"Content-Type":"application/json"}});ee.interceptors.request.use(t=>{const s=localStorage.getItem("token");return s&&(t.headers.Authorization=`Token ${s}`),t},t=>Promise.reject(t));ee.interceptors.response.use(t=>t,t=>{var s,n,r,a;return((s=t.response)==null?void 0:s.status)===401?(localStorage.removeItem("token"),window.location.href="/login"):((n=t.response)==null?void 0:n.status)===403?q.error("      "):((r=t.response)==null?void 0:r.status)===404?q.error("   "):((a=t.response)==null?void 0:a.status)>=500?q.error("   .   "):t.code==="NETWORK_ERROR"&&q.error("   "),Promise.reject(t)});const Qf=E.createContext(),B0={user:null,token:localStorage.getItem("token"),loading:!0,error:null};function Q0(t,s){switch(s.type){case"LOGIN_START":return{...t,loading:!0,error:null};case"LOGIN_SUCCESS":return{...t,user:s.payload.user,token:s.payload.token,loading:!1,error:null};case"LOGIN_ERROR":return{...t,user:null,token:null,loading:!1,error:s.payload};case"LOGOUT":return{...t,user:null,token:null,loading:!1,error:null};case"SET_LOADING":return{...t,loading:s.payload};case"UPDATE_USER":return{...t,user:{...t.user,...s.payload}};default:return t}}function q0({children:t}){const[s,n]=E.useReducer(Q0,B0);E.useEffect(()=>{const d=localStorage.getItem("token");d?(ee.defaults.headers.common.Authorization=`Token ${d}`,r()):n({type:"SET_LOADING",payload:!1})},[]);const r=async()=>{try{const d=await ee.get("/api/auth/profile/");n({type:"LOGIN_SUCCESS",payload:{user:d.data,token:localStorage.getItem("token")}})}catch(d){console.error("Failed to fetch profile:",d),localStorage.removeItem("token"),delete ee.defaults.headers.common.Authorization,n({type:"LOGOUT"})}},c={...s,login:async d=>{var h,u,j,x;n({type:"LOGIN_START"});try{const y={username:d.phone,password:d.password};console.log("Logging in with data:",y);const _=new AbortController,p=setTimeout(()=>_.abort(),1e4),m=await ee.post("/api/auth/login/",y,{signal:_.signal});clearTimeout(p),console.log("Login response:",m.data);const{token:f,user:g}=m.data;return localStorage.setItem("token",f),ee.defaults.headers.common.Authorization=`Token ${f}`,n({type:"LOGIN_SUCCESS",payload:{user:g,token:f}}),q.success("   "),setTimeout(()=>{let v="/dashboard";g.role==="doctor"?v="/doctor/dashboard":g.role==="admin"?v="/admin/dashboard":g.role==="accountant"&&(v="/accountant/dashboard"),window.location.href=v},100),{success:!0}}catch(y){console.error("Login error:",y);let _="   ";return y.name==="AbortError"?_="  .    .":(u=(h=y.response)==null?void 0:h.data)!=null&&u.detail?_=y.response.data.detail:(x=(j=y.response)==null?void 0:j.data)!=null&&x.error?_=y.response.data.error:y.message&&(_=y.message),n({type:"LOGIN_ERROR",payload:_}),q.error(_),{success:!1,error:_}}},register:async d=>{var h,u,j,x,y,_;n({type:"LOGIN_START"});try{const p={...d,username:d.phone,role:"patient",gender:d.gender||"male",height:d.height?parseFloat(d.height):175,current_weight:d.current_weight?parseFloat(d.current_weight):70,goal:d.goal||"maintain_weight"};console.log("Registering with data:",p);const m=new AbortController,f=setTimeout(()=>m.abort(),1e4),g=await ee.post("/api/auth/register/",p,{signal:m.signal});return clearTimeout(f),console.log("Registration response:",g.data),n({type:"SET_LOADING",payload:!1}),q.success("   .     ."),setTimeout(()=>{window.location.href="/login"},2e3),{success:!0}}catch(p){console.error("Registration error:",p);let m="   ";if(p.name==="AbortError")m="  .    .";else if((u=(h=p.response)==null?void 0:h.data)!=null&&u.detail)m=p.response.data.detail;else if((x=(j=p.response)==null?void 0:j.data)!=null&&x.error)m=p.response.data.error;else if((y=p.response)!=null&&y.data){const f=Object.values(p.response.data).flat();f.length>0&&(m=f.join(", "))}else p.message&&(m=p.message);return n({type:"LOGIN_ERROR",payload:m}),q.error(m),{success:!1,error:((_=p.response)==null?void 0:_.data)||{detail:m}}}},logout:async()=>{try{await ee.post("/api/auth/logout/")}catch(d){console.error("Logout error:",d)}finally{localStorage.removeItem("token"),delete ee.defaults.headers.common.Authorization,n({type:"LOGOUT"}),q.success("   ")}},updateUser:d=>{n({type:"UPDATE_USER",payload:d})}};return e.jsx(Qf.Provider,{value:c,children:t})}const Qe=()=>{const t=E.useContext(Qf);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},qf=E.createContext(),W0={ar:{dashboard:" ",profile:" ",appointments:"",meal_plans:" ",payments:"",patients:"",doctors:"",users:"",reports:"",settings:"",logout:" ",welcome:"",loading:" ...",save:"",cancel:"",edit:"",delete:"",view:"",search:"",filter:"",export:"",import:"",add:"",create:"",update:"",submit:"",close:"",yes:"",no:"",confirm:"",login:" ",register:" ",email:" ",password:" ",confirm_password:"  ",first_name:" ",last_name:" ",phone:" ",role:"",patient:"",doctor:"",admin:"",accountant:"",my_appointments:"",my_meal_plans:" ",my_payments:"",book_appointment:" ",medical_history:" ",measurements:"",progress:"",my_patients:"",create_meal_plan:"  ",patient_appointments:" ",availability:" ",financial_dashboard:" ",user_management:" ",payment_management:" ",system_reports:" ",pending:" ",confirmed:"",completed:"",cancelled:"",paid:"",unpaid:" ",active:"",inactive:" "},en:{dashboard:"Dashboard",profile:"Profile",appointments:"Appointments",meal_plans:"Meal Plans",payments:"Payments",patients:"Patients",doctors:"Doctors",users:"Users",reports:"Reports",settings:"Settings",logout:"Logout",welcome:"Welcome",loading:"Loading...",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",view:"View",search:"Search",filter:"Filter",export:"Export",import:"Import",add:"Add",create:"Create",update:"Update",submit:"Submit",close:"Close",yes:"Yes",no:"No",confirm:"Confirm",login:"Login",register:"Register",email:"Email",password:"Password",confirm_password:"Confirm Password",first_name:"First Name",last_name:"Last Name",phone:"Phone",role:"Role",patient:"Patient",doctor:"Doctor",admin:"Admin",accountant:"Accountant",my_appointments:"My Appointments",my_meal_plans:"My Meal Plans",my_payments:"My Payments",book_appointment:"Book Appointment",medical_history:"Medical History",measurements:"Measurements",progress:"Progress",my_patients:"My Patients",create_meal_plan:"Create Meal Plan",patient_appointments:"Patient Appointments",availability:"Availability",financial_dashboard:"Financial Dashboard",user_management:"User Management",payment_management:"Payment Management",system_reports:"System Reports",pending:"Pending",confirmed:"Confirmed",completed:"Completed",cancelled:"Cancelled",paid:"Paid",unpaid:"Unpaid",active:"Active",inactive:"Inactive"}};function H0({children:t}){const[s,n]=E.useState(()=>localStorage.getItem("language")||"ar"),r=s==="ar"?"rtl":"ltr";E.useEffect(()=>{localStorage.setItem("language",s)},[s]);const i={language:s,direction:r,toggleLanguage:()=>{n(o=>o==="ar"?"en":"ar")},t:o=>W0[s][o]||o};return e.jsx(qf.Provider,{value:i,children:t})}const ze=()=>{const t=E.useContext(qf);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},V0=()=>{const{user:t,logout:s}=Qe(),{t:n,toggleLanguage:r,language:a}=ze(),l=()=>{window.confirm(n("confirm_logout")||"     ")&&s()};return e.jsx("nav",{className:"navbar navbar-expand-lg navbar-dark",children:e.jsxs("div",{className:"container-fluid",children:[e.jsxs("a",{className:"navbar-brand d-flex align-items-center",href:"/",children:[e.jsx("img",{src:"/logo.svg",alt:"Dr MAYS Logo",style:{width:"120px",height:"120px"},className:"me-2"}),e.jsx("span",{className:"fw-bold",children:"Dr MAYS - Nutrition & Wellness"})]}),e.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav",children:e.jsx("span",{className:"navbar-toggler-icon"})}),e.jsx("div",{className:"collapse navbar-collapse",id:"navbarNav",children:e.jsxs("ul",{className:"navbar-nav ms-auto",children:[e.jsx("li",{className:"nav-item",children:e.jsx("button",{className:"nav-link btn btn-link text-white",onClick:r,children:a==="ar"?"EN":""})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:"btn btn-outline-light btn-sm d-flex align-items-center",onClick:l,title:" ",children:[e.jsx("i",{className:"fas fa-sign-out-alt me-2"}),e.jsx("span",{className:"d-none d-lg-inline",children:""})]})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsxs("a",{className:"nav-link dropdown-toggle d-flex align-items-center",href:"#",role:"button","data-bs-toggle":"dropdown",children:[e.jsx("div",{className:"bg-white rounded-circle p-1 me-2",children:e.jsx("i",{className:"fas fa-user text-success"})}),e.jsxs("span",{children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]})]}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-end",children:[e.jsx("li",{children:e.jsxs("h6",{className:"dropdown-header",children:[n(t==null?void 0:t.role)," - ",t==null?void 0:t.email]})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsx("li",{children:e.jsxs("a",{className:"dropdown-item",href:"/profile",children:[e.jsx("i",{className:"fas fa-user me-2"}),n("profile")]})}),e.jsx("li",{children:e.jsxs("a",{className:"dropdown-item",href:"/settings",children:[e.jsx("i",{className:"fas fa-cog me-2"}),n("settings")]})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),e.jsx("li",{children:e.jsxs("button",{className:"dropdown-item text-danger",onClick:l,children:[e.jsx("i",{className:"fas fa-sign-out-alt me-2"}),n("logout")]})})]})]})]})})]})})},K0=()=>{const{user:t,logout:s}=Qe(),{t:n}=ze(),a=(()=>{switch(t==null?void 0:t.role){case"patient":return[{path:"/dashboard",icon:"fas fa-tachometer-alt",label:n("dashboard")},{path:"/profile",icon:"fas fa-user",label:n("profile")},{path:"/meal-plans",icon:"fas fa-utensils",label:n("meal_plans")},{path:"/appointments",icon:"fas fa-calendar-check",label:n("appointments")},{path:"/payments",icon:"fas fa-credit-card",label:n("payments")}];case"doctor":return[{path:"/doctor/dashboard",icon:"fas fa-tachometer-alt",label:n("dashboard")},{path:"/doctor/profile",icon:"fas fa-user",label:n("profile")},{path:"/doctor/patients",icon:"fas fa-users",label:n("patients")},{path:"/doctor/meal-plans",icon:"fas fa-utensils",label:n("meal_plans")},{path:"/iraqi-nutrition/meal-planner",icon:"fas fa-calendar-day",label:"  "}];case"admin":return[{path:"/admin/dashboard",icon:"fas fa-tachometer-alt",label:n("dashboard")},{path:"/admin/users",icon:"fas fa-users",label:n("users")},{path:"/admin/doctors",icon:"fas fa-user-md",label:n("doctors")},{path:"/admin/payments",icon:"fas fa-credit-card",label:n("payments")},{path:"/admin/reports",icon:"fas fa-chart-bar",label:n("reports")},{path:"/iraqi-nutrition/meal-planner",icon:"fas fa-calendar-day",label:"  "},{path:"/admin/settings",icon:"fas fa-cog",label:n("settings")}];case"accountant":return[{path:"/accountant/dashboard",icon:"fas fa-tachometer-alt",label:n("dashboard")},{path:"/accountant/payments",icon:"fas fa-credit-card",label:n("payments")},{path:"/accountant/reports",icon:"fas fa-chart-bar",label:n("reports")}];default:return[]}})();return e.jsx("div",{className:"sidebar bg-dark",style:{minWidth:"250px",minHeight:"100vh"},children:e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"d-inline-flex align-items-center justify-content-center",children:e.jsx("img",{src:"/logo.svg",alt:"Dr MAYS Logo",style:{width:"160px",height:"160px"}})}),e.jsx("h6",{className:"text-white mt-2 mb-0",children:"Dr MAYS"}),e.jsx("small",{className:"text-white-50",children:"Nutrition & Wellness"})]}),e.jsx("nav",{className:"nav flex-column",children:a.map(l=>e.jsxs(wv,{to:l.path,className:({isActive:i})=>`nav-link text-white d-flex align-items-center p-3 rounded mb-1 ${i?"bg-success":""}`,children:[e.jsx("i",{className:`${l.icon} me-3`}),e.jsx("span",{children:l.label})]},l.path))}),e.jsxs("div",{className:"mt-4 pt-4 border-top border-secondary",children:[e.jsxs("div",{className:"d-flex align-items-center mb-3",children:[e.jsx("div",{className:"bg-success rounded-circle p-2 me-2",children:e.jsx("i",{className:"fas fa-user text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-white small fw-bold",children:[t==null?void 0:t.first_name," ",t==null?void 0:t.last_name]}),e.jsx("div",{className:"text-white-50 small",children:n(t==null?void 0:t.role)})]})]}),e.jsxs("button",{className:"btn btn-outline-light btn-sm w-100 d-flex align-items-center justify-content-center",onClick:()=>{window.confirm("     ")&&s()},children:[e.jsx("i",{className:"fas fa-sign-out-alt me-2"}),e.jsx("span",{children:" "})]})]})]})})},ve=({size:t="md",color:s="primary"})=>{const n={sm:"spinner-border-sm",md:"",lg:"spinner-border-lg"},r={primary:"text-primary",secondary:"text-secondary",success:"text-success",danger:"text-danger",warning:"text-warning",info:"text-info",light:"text-light",dark:"text-dark"};return e.jsx("div",{className:"d-flex justify-content-center align-items-center",children:e.jsx("div",{className:`spinner-border ${n[t]} ${r[s]}`,role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})},Ue=({children:t,allowedRoles:s=[]})=>{const{user:n,loading:r}=Qe(),a=gn();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(ve,{size:"lg"})}):n?s.length>0&&!s.includes(n.role)?e.jsx(Nt,{to:"/dashboard",replace:!0}):t:e.jsx(Nt,{to:"/login",state:{from:a},replace:!0})},G0=()=>{const{login:t,loading:s,user:n}=Qe(),{t:r,language:a}=ze(),[l,i]=E.useState({phone:"",password:""});if(n){let d="/dashboard";return n.role==="doctor"?d="/doctor/dashboard":n.role==="admin"?d="/admin/dashboard":n.role==="accountant"&&(d="/accountant/dashboard"),e.jsx(Nt,{to:d,replace:!0})}const o=d=>{i({...l,[d.target.name]:d.target.value})},c=async d=>{d.preventDefault(),await t(l)};return e.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center py-5",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-6 col-lg-5",children:e.jsx("div",{className:"card shadow-lg border-0 rounded-4",children:e.jsxs("div",{className:"card-body p-5",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"d-inline-flex align-items-center justify-content-center mb-3",children:e.jsx("img",{src:"/logo.svg",alt:"Dr MAYS Logo",style:{width:"240px",height:"240px"}})}),e.jsx("h4",{className:"text-primary mb-3",children:a==="ar"?"  ":"Patient Login"})]}),e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:a==="ar"?":":"Note:"}),a==="ar"?"       .       .":" Use your registered phone number to login. Phone number is your username."]}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"phone",className:"form-label",children:a==="ar"?" ":"Phone Number"}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-light border-end-0",children:e.jsx("i",{className:"fas fa-phone text-muted"})}),e.jsx("input",{type:"tel",className:"form-control border-start-0",id:"phone",name:"phone",value:l.phone,onChange:o,required:!0,placeholder:a==="ar"?"  ":"Enter phone number"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:r("password")}),e.jsxs("div",{className:"input-group",children:[e.jsx("span",{className:"input-group-text bg-light border-end-0",children:e.jsx("i",{className:"fas fa-lock text-muted"})}),e.jsx("input",{type:"password",className:"form-control border-start-0",id:"password",name:"password",value:l.password,onChange:o,required:!0,placeholder:a==="ar"?"  ":"Enter password"})]})]}),e.jsx("button",{type:"submit",className:"btn btn-success w-100 py-2 fw-bold",disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(ve,{size:"sm",color:"light"}),e.jsx("span",{className:"ms-2",children:a==="ar"?"  ...":"Logging in..."})]}):r("login")}),s&&e.jsx("div",{className:"text-center mt-2",children:e.jsx("small",{className:"text-muted",children:a==="ar"?" ...":"Please wait..."})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-muted mb-0",children:[a==="ar"?"  ":"Don't have an account?",e.jsx(tn,{to:"/register",className:"text-success fw-bold ms-1",children:r("register")})]})})]})})})})})})},Y0=()=>{const{register:t,loading:s,user:n}=Qe(),{t:r,language:a}=ze(),l=Lc(),[i,o]=E.useState({username:"",first_name:"",last_name:"",phone:"",password:"",password_confirm:"",role:"patient",date_of_birth:"",gender:"",height:"",current_weight:"",goal:""}),[c,d]=E.useState({}),[h,u]=E.useState(!1),[j,x]=E.useState(3);if(n)return e.jsx(Nt,{to:"/dashboard"});E.useEffect(()=>{if(h&&j>0){const p=setTimeout(()=>{x(j-1)},1e3);return()=>clearTimeout(p)}else h&&j===0&&l("/login")},[h,j,l]);const y=p=>{o({...i,[p.target.name]:p.target.value}),c[p.target.name]&&d({...c,[p.target.name]:null})},_=async p=>{p.preventDefault(),d({}),u(!1),console.log("Submitting registration form:",i);try{const m=await t(i);console.log("Registration result:",m),m.success?(u(!0),x(3)):m.error&&d(m.error)}catch(m){console.error("Registration error:",m),d({general:["   .    ."]})}};return e.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center py-5",children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-md-8 col-lg-6",children:e.jsx("div",{className:"card shadow-lg border-0 rounded-4",children:e.jsxs("div",{className:"card-body p-5",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"d-inline-flex align-items-center justify-content-center mb-3",children:e.jsx("img",{src:"/logo.svg",alt:"Dr MAYS Logo",style:{width:"240px",height:"240px"}})}),e.jsx("h2",{className:"text-success fw-bold mb-2",children:"Dr MAYS"}),e.jsx("p",{className:"text-muted",children:"Nutrition & Wellness"}),e.jsx("h4",{className:"text-primary mb-3",children:a==="ar"?"   ":"Register New Patient Account"})]}),e.jsxs("form",{onSubmit:_,children:[c.general&&e.jsx("div",{className:"alert alert-danger mb-3",children:c.general.map((p,m)=>e.jsx("div",{children:p},m))}),h&&e.jsxs("div",{className:"alert alert-success mb-3 text-center",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-center",children:[e.jsx("i",{className:"fas fa-check-circle me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"   !"}),e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["      ",j," ..."]})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"button",className:"btn btn-outline-success btn-sm",onClick:()=>l("/login"),children:"  "})})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{htmlFor:"first_name",className:"form-label",children:r("first_name")}),e.jsx("input",{type:"text",className:`form-control ${c.first_name?"is-invalid":""}`,id:"first_name",name:"first_name",value:i.first_name,onChange:y,required:!0}),c.first_name&&e.jsx("div",{className:"invalid-feedback",children:c.first_name[0]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{htmlFor:"last_name",className:"form-label",children:r("last_name")}),e.jsx("input",{type:"text",className:`form-control ${c.last_name?"is-invalid":""}`,id:"last_name",name:"last_name",value:i.last_name,onChange:y,required:!0}),c.last_name&&e.jsx("div",{className:"invalid-feedback",children:c.last_name[0]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"username",className:"form-label",children:a==="ar"?" ":"Username"}),e.jsx("input",{type:"text",className:`form-control ${c.username?"is-invalid":""}`,id:"username",name:"username",value:i.username,onChange:y,required:!0}),c.username&&e.jsx("div",{className:"invalid-feedback",children:c.username[0]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{htmlFor:"phone",className:"form-label",children:[r("phone")," *"]}),e.jsx("input",{type:"tel",className:`form-control ${c.phone?"is-invalid":""}`,id:"phone",name:"phone",value:i.phone,onChange:y,required:!0}),c.phone&&e.jsx("div",{className:"invalid-feedback",children:c.phone[0]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"date_of_birth",className:"form-label",children:a==="ar"?"  *":"Date of Birth *"}),e.jsx("input",{type:"date",className:`form-control ${c.date_of_birth?"is-invalid":""}`,id:"date_of_birth",name:"date_of_birth",value:i.date_of_birth,onChange:y,style:{direction:a==="ar"?"rtl":"ltr"},required:!0}),c.date_of_birth&&e.jsx("div",{className:"invalid-feedback",children:c.date_of_birth[0]})]}),e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-ruler me-2"}),a==="ar"?" ":"Physical Information"]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{htmlFor:"gender",className:"form-label",children:a==="ar"?" *":"Gender *"}),e.jsxs("select",{className:`form-control ${c.gender?"is-invalid":""}`,id:"gender",name:"gender",value:i.gender,onChange:y,required:!0,children:[e.jsx("option",{value:"",children:a==="ar"?" ":"Select Gender"}),e.jsx("option",{value:"male",children:a==="ar"?"":"Male"}),e.jsx("option",{value:"female",children:a==="ar"?"":"Female"})]}),c.gender&&e.jsx("div",{className:"invalid-feedback",children:c.gender[0]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{htmlFor:"height",className:"form-label",children:a==="ar"?" () *":"Height (cm) *"}),e.jsx("input",{type:"number",className:`form-control ${c.height?"is-invalid":""}`,id:"height",name:"height",value:i.height,onChange:y,placeholder:"170",min:"100",max:"250",required:!0}),c.height&&e.jsx("div",{className:"invalid-feedback",children:c.height[0]})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{htmlFor:"current_weight",className:"form-label",children:a==="ar"?" () *":"Weight (kg) *"}),e.jsx("input",{type:"number",className:`form-control ${c.current_weight?"is-invalid":""}`,id:"current_weight",name:"current_weight",value:i.current_weight,onChange:y,placeholder:"70",min:"30",max:"300",required:!0}),c.current_weight&&e.jsx("div",{className:"invalid-feedback",children:c.current_weight[0]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{htmlFor:"goal",className:"form-label",children:a==="ar"?"  *":"Fitness Goals *"}),e.jsxs("select",{className:`form-control ${c.goal?"is-invalid":""}`,id:"goal",name:"goal",value:i.goal,onChange:y,required:!0,children:[e.jsx("option",{value:"",children:a==="ar"?" ":"Select Goal"}),e.jsx("option",{value:"lose_weight",children:a==="ar"?" ":"Lose Weight"}),e.jsx("option",{value:"gain_weight",children:a==="ar"?" ":"Gain Weight"}),e.jsx("option",{value:"maintain_weight",children:a==="ar"?"  ":"Maintain Weight"}),e.jsx("option",{value:"build_muscle",children:a==="ar"?" ":"Build Muscle"}),e.jsx("option",{value:"improve_health",children:a==="ar"?"  ":"Improve Health"})]}),c.goal&&e.jsx("div",{className:"invalid-feedback",children:c.goal[0]})]})]})]})]}),e.jsx("input",{type:"hidden",name:"role",value:"patient"}),e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:a==="ar"?":":"Note:"}),a==="ar"?"    .     .      .":" Registration is available for patients only. A patient account will be created automatically. Phone number will be used as username for login."]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:r("password")}),e.jsx("input",{type:"password",className:`form-control ${c.password?"is-invalid":""}`,id:"password",name:"password",value:i.password,onChange:y,required:!0}),c.password&&e.jsx("div",{className:"invalid-feedback",children:c.password[0]})]}),e.jsxs("div",{className:"col-md-6 mb-4",children:[e.jsx("label",{htmlFor:"password_confirm",className:"form-label",children:r("confirm_password")}),e.jsx("input",{type:"password",className:`form-control ${c.password_confirm?"is-invalid":""}`,id:"password_confirm",name:"password_confirm",value:i.password_confirm,onChange:y,required:!0}),c.password_confirm&&e.jsx("div",{className:"invalid-feedback",children:c.password_confirm[0]})]})]}),e.jsx("button",{type:"submit",className:"btn btn-success w-100 py-2 fw-bold",disabled:s||h,children:s?e.jsxs(e.Fragment,{children:[e.jsx(ve,{size:"sm",color:"light"}),e.jsx("span",{className:"ms-2",children:a==="ar"?"  ...":"Creating account..."})]}):h?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-check me-2"}),a==="ar"?"  !":"Account Created!"]}):r("register")}),(s||h)&&e.jsx("div",{className:"text-center mt-2",children:e.jsx("small",{className:"text-muted",children:s?a==="ar"?"      ...":"Please wait, this may take a few seconds...":a==="ar"?"    ...":"You will be redirected to login page..."})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("p",{className:"text-muted mb-0",children:[a==="ar"?"  ":"Already have an account?",e.jsx(tn,{to:"/login",className:"text-success fw-bold ms-1",children:r("login")})]})})]})})})})})})},Je=t=>{if(!t)return"--";try{const s=new Date(t);if(isNaN(s.getTime()))return"--";const n=s.getDate().toString().padStart(2,"0"),r=(s.getMonth()+1).toString().padStart(2,"0"),a=s.getFullYear();return`${n}/${r}/${a}`}catch(s){return console.error("Error formatting date:",s),"--"}},Bt=t=>{if(!t)return"--";try{const s=t.split(" ")[0],[n,r]=s.split(":"),a=parseInt(n),l=parseInt(r);let i="",o=a;return a<12?(i="",a===0&&(o=12)):(i="",a>12&&(o=a-12)),`${o.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")} ${i}`}catch(s){return console.error("Error formatting time:",s),"--"}},J0=()=>{const{user:t}=Qe(),[s,n]=E.useState(new Date().toISOString().split("T")[0]),{data:r}=xe(["patient-profile",t==null?void 0:t.id],()=>ee.get(`/api/accounts/patients/${t==null?void 0:t.id}/profile/`).then(p=>{const m=p.data;return console.log(" Patient Profile loaded:",{daily_calories:m==null?void 0:m.daily_calories,calculated_daily_calories:m==null?void 0:m.calculated_daily_calories,nutrition_targets:m==null?void 0:m.nutrition_targets}),m}),{enabled:!!(t!=null&&t.id)}),{data:a,isLoading:l,error:i}=xe(["patient-selected-meals",t==null?void 0:t.id,s],()=>ee.get(`/api/meals/patients/${t==null?void 0:t.id}/selected-meals/?date=${s}`).then(p=>{var v;console.log("Patient selected meals API response:",p.data);const m=p.data,f=(m==null?void 0:m.selections)||m||[],g=m==null?void 0:m.required_calories;return console.log(" Extracted data:",{selectionsCount:Array.isArray(f)?f.length:0,requiredCalories:g,isArray:Array.isArray(m)}),Array.isArray(f)&&f.length>0&&(f.forEach((b,k)=>{var C;console.log(`Selection ${k+1}: ${b.meal_name} - Calories: ${b.calories}, Ingredients: ${((C=b.ingredients)==null?void 0:C.length)||0}`)}),console.log("First selection ingredients:",(v=f[0])==null?void 0:v.ingredients)),{selections:f,required_calories:g}}),{enabled:!!(t!=null&&t.id),refetchInterval:3e4}),o=(a==null?void 0:a.selections)||[],c=a==null?void 0:a.required_calories,d=p=>{if(p.calories&&p.calories>0)return p.calories;const m=p.calories_per_100g||0,f=p.amount||p.quantity||0;return m>0&&f>0?m*f/100:0},h=p=>{var f,g;if(p.calories&&p.calories>0)return p.calories;if((f=p.nutrition_info)!=null&&f.calories&&p.nutrition_info.calories>0)return p.nutrition_info.calories;if(!p.ingredients||p.ingredients.length===0)return 0;const m=p.ingredients.reduce((v,b)=>v+d(b),0);return console.log(` Meal: ${p.meal_name} - Saved: ${p.calories}, Nutrition_info: ${(g=p.nutrition_info)==null?void 0:g.calories}, Calculated: ${m}`),m},u=()=>!o||o.length===0?0:o.reduce((p,m)=>p+h(m),0),j=()=>{var N;if(!r)return null;const p=r.current_weight,m=r.height,f=r.gender,g=r.activity_level,v=r.goal;if(!p||!m||!f||!g)return null;const b=(N=r.user)==null?void 0:N.date_of_birth;let k=30;if(b){const H=new Date(b),L=new Date;k=L.getFullYear()-H.getFullYear();const R=L.getMonth()-H.getMonth();(R<0||R===0&&L.getDate()<H.getDate())&&k--}let C;f==="male"?C=10*p+6.25*m-5*k+5:C=10*p+6.25*m-5*k-161;const U={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9}[g]||1.55,Q=Math.round(C*U),J={lose_weight:-500,gain_weight:500,build_muscle:300,maintain_weight:0,improve_health:0}[v]||0,O=Q+J;return Math.max(O,1200)},x=()=>{if(c&&c>0)return console.log(" Using required_calories from API (Daily calories):",c),c;const p=j();return p&&p>0?(console.log(" Using calculated daily calories (TDEE + goal adjustment):",p),p):r!=null&&r.daily_calories&&r.daily_calories>0?(console.log(" Using daily_calories from profile:",r.daily_calories),r.daily_calories):r!=null&&r.calculated_daily_calories&&r.calculated_daily_calories>0?(console.log(" Using calculated_daily_calories from profile:",r.calculated_daily_calories),r.calculated_daily_calories):(console.log(" No required calories found"),null)},y=p=>new Date(p).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),_=p=>({breakfast:"",lunch:"",dinner:"",snack:" "})[p]||p;return l?e.jsx(ve,{}):i?e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"    "]}):e.jsxs("div",{className:"patient-selected-meals",children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-shopping-cart me-2"})," "]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:" :"}),e.jsx("input",{type:"date",className:"form-control",value:s,onChange:p=>n(p.target.value)})]}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"d-flex align-items-end h-100",children:e.jsx("div",{className:"alert alert-info mb-0 w-100",children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-info-circle me-1"})," : ",new Date().toLocaleTimeString("ar-SA")]})})})})]})})]})})}),o&&o.length>0?e.jsx("div",{className:"row",children:o.map((p,m)=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:e.jsxs("div",{className:"card h-100 border-success",children:[e.jsx("div",{className:"card-header bg-success text-white",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-utensils me-2"}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0",children:_(p.meal_type)}),e.jsx("small",{children:y(p.selected_at)})]})]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-primary",children:p.meal_name}),e.jsxs("p",{className:"card-text text-muted small",children:[" : ",new Date(p.selected_at).toLocaleTimeString("ar-SA")]}),(()=>{var g;console.log("Rendering selection:",p.meal_name,"Ingredients:",p.ingredients);const f=((g=p.ingredients)==null?void 0:g.filter(v=>v&&(v.food_name_ar||v.food_name||v.name)))||[];return f.length>0?e.jsxs("div",{className:"ingredients-section mb-3",children:[e.jsxs("h6",{className:"text-primary mb-2",children:[e.jsx("i",{className:"fas fa-shopping-basket me-1"}),":"]}),e.jsx("div",{className:"ingredients-list",children:f.map((v,b)=>{console.log("Rendering ingredient:",v);const k=v.food_name_ar||v.food_name||v.name||"  ",C=v.amount||v.quantity||0,M=d(v),U=v.protein||(v.protein_per_100g&&C?v.protein_per_100g*C/100:0);return e.jsxs("div",{className:"ingredient-item d-flex justify-content-between align-items-center mb-1 p-2 bg-light rounded",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-circle text-success me-2",style:{fontSize:"0.5rem"}}),e.jsx("span",{className:"fw-bold",children:k})]}),e.jsxs("div",{className:"text-muted",children:[e.jsxs("span",{className:"badge bg-primary",children:[C,"g"]}),e.jsxs("small",{className:"text-info ms-1",children:[": ",Math.round(M)," | : ",Math.round(U),"g"]})]})]},b)})})]}):e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"     "]})})(),(()=>{const f=h(p);return f>0&&e.jsx("div",{className:"mt-3 p-2 bg-info bg-opacity-10 rounded",children:e.jsxs("small",{className:"text-info fw-bold",children:[e.jsx("i",{className:"fas fa-fire me-1"})," : ",Math.round(f)," "]})})})()]}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-clock me-1"}),new Date(p.selected_at).toLocaleTimeString("ar-SA")]}),e.jsxs("span",{className:"badge bg-success",children:[e.jsx("i",{className:"fas fa-check me-1"}),""]})]})})]})},m))}):e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-shopping-cart text-muted",style:{fontSize:"4rem"}}),e.jsx("h5",{className:"text-muted mt-3",children:"   "}),e.jsx("p",{className:"text-muted",children:"     "})]})})}),o&&o.length>0&&(()=>{const p=u(),m=x(),f=m!==null?p-m:null,g=f!==null&&Math.abs(f)<=5;return console.log(" Calories Summary:",{totalCalories:Math.round(p),requiredCalories:m,difference:f?Math.round(f):null,isWithinTolerance:g,selectionsCount:o.length,selectionsCalories:o.map(v=>({name:v.meal_name,savedCalories:v.calories,calculatedCalories:h(v)}))}),e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-info",children:[e.jsx("div",{className:"card-header bg-info text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-chart-bar me-2"}),"  "]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row text-center mb-3",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-primary fs-4",children:o.length}),e.jsx("small",{className:"text-muted",children:"  "})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-success fs-4",children:o.filter(v=>v.meal_type==="breakfast").length}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-info fs-4",children:o.filter(v=>v.meal_type==="lunch").length}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-warning fs-4",children:o.filter(v=>v.meal_type==="dinner").length}),e.jsx("small",{className:"text-muted",children:" "})]})})]}),m!==null&&e.jsxs("div",{className:`alert ${g?"alert-success":"alert-warning"} mb-0`,children:[e.jsxs("div",{className:"row text-center",children:[e.jsxs("div",{className:"col-md-4",children:[e.jsx("strong",{children:" :"})," ",m," "]}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("strong",{children:" :"})," ",Math.round(p)," "]}),f!==null&&e.jsxs("div",{className:`col-md-4 ${f===0?"text-success":f>0?"text-danger":"text-warning"}`,children:[e.jsx("strong",{children:":"})," ",f>0?"+":"",Math.round(f)," "]})]}),!g&&e.jsx("div",{className:"mt-2 text-center",children:e.jsx("small",{className:"text-muted",children:"       (  5  )"})})]})]})]})})})})()]})},X0=()=>{var v;const{t}=ze(),{user:s}=Qe(),{data:n,isLoading:r}=xe("patient-meal-plans",()=>ee.get(`/api/meals/meal-plans/?patient=${s==null?void 0:s.id}`).then(b=>(console.log(" Dashboard: Fetched meal plans:",b.data.results),b.data.results.forEach((k,C)=>{console.log(`Dashboard Plan ${C+1} (ID: ${k.id}): ${k.title} - Start: ${k.start_date}, End: ${k.end_date} - Active: ${k.is_active}`)}),b.data.results)),{enabled:!!s,staleTime:0,cacheTime:0,refetchOnWindowFocus:!0}),{data:a,isLoading:l}=xe("patient-appointments",()=>ee.get("/api/bookings/appointments/").then(b=>b.data.results),{enabled:!!s}),{data:i,isLoading:o}=xe("patient-measurements",()=>ee.get("/api/auth/measurements/").then(b=>b.data.results),{enabled:!!s}),c=()=>{if(console.log(" getCurrentPlans called with mealPlans:",n),!n)return console.log(" No mealPlans data"),[];const b=new Date;b.setHours(0,0,0,0),console.log(" Today:",b.toISOString());const k=n.filter(M=>{if(console.log(` Processing plan ${M.id}: ${M.title}`),console.log(`  - is_active: ${M.is_active}`),console.log(`  - start_date: ${M.start_date}`),console.log(`  - end_date: ${M.end_date}`),!M.is_active)return console.log(`   Plan ${M.id} is not active`),!1;const U=new Date(M.start_date),Q=new Date(M.end_date);U.setHours(0,0,0,0),Q.setHours(23,59,59,999),console.log(`  - startDate: ${U.toISOString()}`),console.log(`  - endDate: ${Q.toISOString()}`);const K=U<=b&&Q>=b,J=U>=b,O=K||J;return console.log(`  - isCurrentlyActive: ${K}`),console.log(`  - isFuturePlan: ${J}`),console.log(`  - shouldInclude: ${O}`),O});console.log(` Found ${k.length} active plans`);const C=k.sort((M,U)=>new Date(M.start_date)-new Date(U.start_date));return console.log(" Sorted plans:",C.map(M=>`${M.id}: ${M.title}`)),C},d=()=>{if(!a)return[];const b=new Date;return a.filter(k=>new Date(k.scheduled_date)>=b&&k.status!=="cancelled")},h=()=>(i==null?void 0:i[0])||null,u=b=>{const k=new Date;k.setHours(0,0,0,0);const C=new Date(b.start_date),M=new Date(b.end_date);return C.setHours(0,0,0,0),M.setHours(23,59,59,999),C>k?"future":C<=k&&M>=k?"active":"expired"},j=b=>{switch(u(b)){case"future":return"";case"active":return"";case"expired":return"";default:return" "}},x=b=>{switch(u(b)){case"future":return"bg-warning text-dark";case"active":return"bg-success";case"expired":return"bg-secondary";default:return"bg-light text-dark"}},y=b=>{switch(u(b)){case"future":return"alert-warning";case"active":return"alert-success";case"expired":return"alert-secondary";default:return"alert-info"}},_=b=>{switch(u(b)){case"future":return"fa-clock";case"active":return"fa-check-circle";case"expired":return"fa-times-circle";default:return"fa-info-circle"}},p=b=>{switch(u(b)){case"future":return"  ";case"active":return"  ";case"expired":return"  ";default:return" "}};if(r||l||o)return e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})});const m=c(),f=d(),g=h();return e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card bg-gradient-primary text-white",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsxs("h2",{className:"mb-2",children:[e.jsx("i",{className:"fas fa-heart me-2"})," ",s==null?void 0:s.first_name,"!"]}),e.jsx("p",{className:"mb-0 fs-5",children:"     .     "})]}),e.jsxs("div",{className:"col-md-4 text-center",children:[e.jsx("div",{className:"display-4",children:e.jsx("i",{className:"fas fa-user-circle"})}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"badge bg-light text-dark fs-6",children:""})})]})]})})})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"alert alert-success",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-credit-card me-3 fs-4"}),e.jsxs("div",{children:[e.jsx("h5",{className:"mb-2",children:e.jsx("strong",{children:"  "})}),e.jsx("p",{className:"mb-2",children:"     Qcard :"}),e.jsx("div",{className:"p-3 bg-white rounded border",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-university text-success me-2"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-success",children:"Qcard -  "}),e.jsx("br",{}),e.jsx("span",{className:"text-primary fs-5 fw-bold",children:"7113596071"})]})]})}),e.jsxs("small",{className:"text-muted mt-2 d-block",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"   Qcard      "]})]})]})})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-3 mb-3",children:e.jsx("div",{className:"card text-center border-primary",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[e.jsx("i",{className:"fas fa-utensils text-primary fs-1 me-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold text-primary fs-2",children:m.length}),e.jsx("small",{className:"text-muted",children:"  "})]})]}),m.length>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("small",{className:"text-muted",children:[" : ",((v=m[0])==null?void 0:v.title)||" "]})})]})})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsx("div",{className:"card text-center border-success",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[e.jsx("i",{className:"fas fa-calendar-check text-success fs-1 me-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold text-success fs-2",children:f.length}),e.jsx("small",{className:"text-muted",children:" "})]})]})})})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsx("div",{className:"card text-center border-info",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[e.jsx("i",{className:"fas fa-chart-line text-info fs-1 me-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold text-info fs-2",children:(i==null?void 0:i.length)||0}),e.jsx("small",{className:"text-muted",children:" "})]})]})})})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsx("div",{className:"card text-center border-warning",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[e.jsx("i",{className:"fas fa-weight text-warning fs-1 me-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold text-warning fs-2",children:(g==null?void 0:g.weight)||"--"}),e.jsx("small",{className:"text-muted",children:"  ()"})]})]})})})})]}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-12 mb-3",children:e.jsx("div",{className:"card text-center border-primary h-100",children:e.jsxs("div",{className:"card-body d-flex flex-column",children:[e.jsx("i",{className:"fas fa-utensils text-primary fs-1 mb-3"}),e.jsx("h6",{className:"text-primary mb-2",children:" "}),e.jsx("p",{className:"text-muted small mb-3",children:"   "}),e.jsxs("a",{href:"/meal-plans",className:"btn btn-outline-primary btn-sm mt-auto",children:[e.jsx("i",{className:"fas fa-utensils me-1"})," "]})]})})})}),n&&n.length>0&&e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-list me-2"}),"  "]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row",children:n.map(b=>{var k;return e.jsx("div",{className:"col-md-6 mb-3",children:e.jsxs("div",{className:`card h-100 ${u(b)==="active"?"border-success":u(b)==="future"?"border-warning":"border-secondary"}`,children:[e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("h6",{className:"card-title",children:b.title}),e.jsx("span",{className:`badge ${x(b)}`,children:j(b)})]}),e.jsxs("p",{className:"card-text small text-muted",children:[(k=b.description)==null?void 0:k.substring(0,100),"..."]}),e.jsxs("div",{className:"row text-center mb-2",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("small",{className:"text-muted",children:""}),e.jsxs("div",{className:"fw-bold text-primary",children:[b.target_calories," "]})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("small",{className:"text-muted",children:""}),e.jsxs("div",{className:"fw-bold text-success",children:[b.target_protein,"g"]})]}),e.jsxs("div",{className:"col-4",children:[e.jsx("small",{className:"text-muted",children:" "}),e.jsx("div",{className:"fw-bold text-info",children:b.diet_plan_display||b.diet_plan||" "})]})]}),e.jsxs("p",{className:"small text-muted mb-0",children:[e.jsx("i",{className:"fas fa-calendar me-1"})," ",new Date(b.start_date).toLocaleDateString("ar-SA",{calendar:"gregory"}),"  ",new Date(b.end_date).toLocaleDateString("ar-SA",{calendar:"gregory"})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("a",{href:"/meal-plans",className:"btn btn-primary btn-sm flex-fill",children:[e.jsx("i",{className:"fas fa-eye me-2"})," "]}),u(b)==="active"&&e.jsx("a",{href:"/iraqi-nutrition/meal-planner",className:"btn btn-success btn-sm",children:e.jsx("i",{className:"fas fa-utensils"})})]})})]})},b.id)})})})]})})}),m.length>0&&e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-success text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-utensils me-2"}),"  "]})}),e.jsxs("div",{className:"card-body",children:[m[0]&&e.jsxs("div",{className:`alert ${y(m[0])} mb-4`,children:[e.jsxs("h6",{className:"alert-heading",children:[e.jsx("i",{className:`fas ${_(m[0])} me-2`}),p(m[0])]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:" :"})," ",m[0].title]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:":"})," ",m[0].description||"  "]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:":"}),"  ",new Date(m[0].start_date).toLocaleDateString("ar-SA",{calendar:"gregory"}),"  ",new Date(m[0].end_date).toLocaleDateString("ar-SA",{calendar:"gregory"})]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:":"})," ",e.jsx("span",{className:`badge ${x(m[0])}`,children:j(m[0])})]})]}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"row text-center",children:[e.jsxs("div",{className:"col-4",children:[e.jsx("div",{className:"fw-bold text-primary",children:m[0].target_calories}),e.jsx("small",{className:"text-muted",children:""})]}),e.jsxs("div",{className:"col-4",children:[e.jsxs("div",{className:"fw-bold text-success",children:[m[0].target_protein,"g"]}),e.jsx("small",{className:"text-muted",children:""})]}),e.jsxs("div",{className:"col-4",children:[e.jsxs("div",{className:"fw-bold text-warning",children:[m[0].target_carbs||"--","g"]}),e.jsx("small",{className:"text-muted",children:""})]})]})})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("a",{href:"/meal-plans",className:"btn btn-primary btn-sm",children:[e.jsx("i",{className:"fas fa-eye me-2"}),"  "]}),e.jsxs("a",{href:"/iraqi-nutrition/meal-planner",className:"btn btn-success btn-sm",children:[e.jsx("i",{className:"fas fa-utensils me-2"}),"  "]})]})]}),e.jsx("div",{className:"row",children:m.slice(0,3).map(b=>{var k;return e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"card h-100 border-success",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title text-success",children:b.title}),e.jsxs("p",{className:"card-text small text-muted",children:[(k=b.description)==null?void 0:k.substring(0,100),"..."]}),e.jsxs("div",{className:"row text-center",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:""}),e.jsxs("div",{className:"fw-bold text-primary",children:[b.target_calories," "]})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:""}),e.jsxs("div",{className:"fw-bold text-success",children:[b.target_protein,"g"]})]})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("a",{href:"/meal-plans",className:"btn btn-success btn-sm flex-fill",children:[e.jsx("i",{className:"fas fa-eye me-2"})," "]}),e.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>{const C=`
                                  <div class="meal-plan-details">
                                    <h5>${b.title}</h5>
                                    <p><strong>:</strong> ${b.description||"  "}</p>
                                    <p><strong> :</strong> ${b.target_calories} </p>
                                    <p><strong> :</strong> ${b.target_protein}g</p>
                                    <p><strong> :</strong> ${b.target_carbs||" "}g</p>
                                    <p><strong> :</strong> ${b.target_fat||" "}g</p>
                                    <p><strong>:</strong> ${new Date(b.start_date).toLocaleDateString("ar-SA",{calendar:"gregory"})}</p>
                                    <p><strong>:</strong> ${new Date(b.end_date).toLocaleDateString("ar-SA",{calendar:"gregory"})}</p>
                                    <p><strong>:</strong> ${b.is_active?"":" "}</p>
                                  </div>
                                `,M=document.createElement("div");M.className="modal fade",M.innerHTML=`
                                  <div class="modal-dialog modal-lg">
                                    <div class="modal-content">
                                      <div class="modal-header">
                                        <h5 class="modal-title">  </h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                      </div>
                                      <div class="modal-body">
                                        ${C}
                                      </div>
                                      <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"></button>
                                        <a href="/meal-plans" class="btn btn-primary"> </a>
                                      </div>
                                    </div>
                                  </div>
                                `,document.body.appendChild(M),new bootstrap.Modal(M).show(),M.addEventListener("hidden.bs.modal",()=>{document.body.removeChild(M)})},children:e.jsx("i",{className:"fas fa-info-circle"})})]})})]})},b.id)})}),m.length>3&&e.jsx("div",{className:"text-center mt-3",children:e.jsxs("a",{href:"/meal-plans",className:"btn btn-outline-success",children:[e.jsx("i",{className:"fas fa-list me-2"}),"   (",m.length,")"]})})]})]})})}),f.length>0&&e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-check me-2"})," "]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:f.slice(0,5).map(b=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsxs("div",{className:"fw-bold",children:[". ",b.doctor_name]}),e.jsx("small",{className:"text-muted",children:b.doctor_specialization})]}),e.jsx("td",{children:Je(b.scheduled_date)}),e.jsx("td",{children:Bt(b.scheduled_time)}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-info",children:b.appointment_type==="consultation"?"":b.appointment_type==="follow_up"?"":b.appointment_type})}),e.jsx("td",{children:b.status==="confirmed"?e.jsx("span",{className:"badge bg-success",children:""}):e.jsx("span",{className:"badge bg-warning",children:" "})}),e.jsx("td",{children:e.jsxs("a",{href:"/appointments",className:"btn btn-sm btn-outline-primary",children:[e.jsx("i",{className:"fas fa-eye me-1"}),""]})})]},b.id))})]})}),f.length>5&&e.jsx("div",{className:"text-center mt-3",children:e.jsxs("a",{href:"/appointments",className:"btn btn-outline-primary",children:[e.jsx("i",{className:"fas fa-list me-2"}),"   (",f.length,")"]})})]})]})})}),g&&e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-info text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-chart-line me-2"}),"  "]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3 text-center mb-3",children:e.jsxs("div",{className:"p-3 bg-primary text-white rounded",children:[e.jsxs("div",{className:"fw-bold fs-4",children:[g.weight," "]}),e.jsx("small",{children:""})]})}),e.jsx("div",{className:"col-md-3 text-center mb-3",children:e.jsxs("div",{className:"p-3 bg-success text-white rounded",children:[e.jsxs("div",{className:"fw-bold fs-4",children:[g.body_fat_percentage,"%"]}),e.jsx("small",{children:" "})]})}),e.jsx("div",{className:"col-md-3 text-center mb-3",children:e.jsxs("div",{className:"p-3 bg-warning text-white rounded",children:[e.jsxs("div",{className:"fw-bold fs-4",children:[g.waist_circumference||"--"," "]}),e.jsx("small",{children:" "})]})}),e.jsx("div",{className:"col-md-3 text-center mb-3",children:e.jsxs("div",{className:"p-3 bg-danger text-white rounded",children:[e.jsx("div",{className:"fw-bold fs-4",children:g.blood_pressure_systolic&&g.blood_pressure_diastolic?`${g.blood_pressure_systolic}/${g.blood_pressure_diastolic}`:"--"}),e.jsx("small",{children:" "})]})})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("a",{href:"/measurements",className:"btn btn-outline-info",children:[e.jsx("i",{className:"fas fa-chart-area me-2"}),"  "]})})]})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx(J0,{})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h6",{className:"text-muted mb-3",children:[e.jsx("i",{className:"fas fa-lightbulb text-warning me-2"})," "]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("i",{className:"fas fa-check-circle text-success me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{children:"  :"}),e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"8-10      "})]})]})}),e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("i",{className:"fas fa-check-circle text-success me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{children:"  :"}),e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"30    "})]})]})}),e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"d-flex",children:[e.jsx("i",{className:"fas fa-check-circle text-success me-2 mt-1"}),e.jsxs("div",{children:[e.jsx("strong",{children:"  :"}),e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:"   "})]})]})})]})]})})})})]})},Z0=()=>{const{t}=ze(),{user:s,updateUser:n}=Qe(),r=ss(),[a,l]=E.useState(!1),[i,o]=E.useState({first_name:"",last_name:"",phone:"",date_of_birth:"",gender:"",address:"",allergies:"",medical_conditions:"",medications:"",target_weight:""}),{data:c,isLoading:d,refetch:h}=xe("patient-profile",async()=>{var p,m;try{const f=await ee.get("/api/auth/patient-profile/");return console.log("Patient profile API Response:",f.data),console.log("Patient height:",(p=f.data)==null?void 0:p.height),console.log("Patient weight:",(m=f.data)==null?void 0:m.current_weight),f.data}catch(f){throw console.error("Error fetching patient profile:",f),f}},{enabled:!!s,staleTime:0,cacheTime:0,refetchOnWindowFocus:!0,retry:3,retryDelay:1e3}),u=ct(async p=>{try{return await ee.put("/api/auth/patient-profile/",p)}catch(m){throw console.error("Profile update API error:",m),m}},{onSuccess:p=>{console.log("Profile update success:",p.data),q.success("    "),r.invalidateQueries("patient-profile"),r.invalidateQueries("user-profile"),setTimeout(()=>{h()},100),l(!1)},onError:p=>{var f,g,v,b;console.error("Profile update error:",p),console.error("Error response:",(f=p.response)==null?void 0:f.data);let m="    ";if((v=(g=p.response)==null?void 0:g.data)!=null&&v.detail)m=p.response.data.detail;else if((b=p.response)!=null&&b.data){const k=Object.values(p.response.data).flat();k.length>0&&(m=k.join(", "))}q.error(m)}}),j=ct(async p=>{try{return await ee.put("/api/auth/user/",p)}catch(m){throw console.error("User update API error:",m),m}},{onSuccess:p=>{console.log("User update success:",p.data),q.success("    "),r.invalidateQueries("patient-profile"),r.invalidateQueries("user-profile"),setTimeout(()=>{h()},100),n(p.data)},onError:p=>{var f,g,v,b;console.error("User update error:",p),console.error("Error response:",(f=p.response)==null?void 0:f.data);let m="    ";if((v=(g=p.response)==null?void 0:g.data)!=null&&v.detail)m=p.response.data.detail;else if((b=p.response)!=null&&b.data){const k=Object.values(p.response.data).flat();k.length>0&&(m=k.join(", "))}q.error(m)}});E.useEffect(()=>{var p,m,f,g,v;c&&(console.log("Loading patient profile data:",c),o({first_name:((p=c.user)==null?void 0:p.first_name)||"",last_name:((m=c.user)==null?void 0:m.last_name)||"",phone:((f=c.user)==null?void 0:f.phone)||"",date_of_birth:(g=c.user)!=null&&g.date_of_birth?typeof c.user.date_of_birth=="string"?c.user.date_of_birth:c.user.date_of_birth.split("T")[0]:"",gender:c.gender||"",address:((v=c.user)==null?void 0:v.address)||"",allergies:c.dietary_restrictions||"",medical_conditions:c.medical_conditions||"",medications:c.medications||"",target_weight:c.target_weight||""}))},[c]),E.useEffect(()=>{const p=setInterval(()=>{s&&h()},3e4);return()=>clearInterval(p)},[s,h]);const x=p=>{const{name:m,value:f}=p.target;console.log(`Updating field ${m} to:`,f),o(g=>({...g,[m]:f}))},y=async p=>{var m,f,g,v;p.preventDefault(),console.log("Submitting profile update with data:",i);try{const b={first_name:i.first_name,last_name:i.last_name,phone:i.phone,date_of_birth:i.date_of_birth,address:i.address};console.log("Updating user data:",b),await j.mutateAsync(b),console.log("User update completed successfully");const k={target_weight:i.target_weight?parseFloat(i.target_weight):null,medical_conditions:i.medical_conditions||"",dietary_restrictions:i.allergies||"",medications:i.medications||""};console.log("Updating profile data:",k),await u.mutateAsync(k),console.log("Profile update completed successfully")}catch(b){console.error("Submit error:",b),console.error("Error details:",(m=b.response)==null?void 0:m.data);let k="    ";if((g=(f=b.response)==null?void 0:f.data)!=null&&g.detail)k=b.response.data.detail;else if((v=b.response)!=null&&v.data){const C=Object.values(b.response.data).flat();C.length>0&&(k=C.join(", "))}q.error(k)}},_=()=>{var p,m,f,g;c&&(console.log("Cancelling edit, resetting form data"),o({first_name:((p=c.user)==null?void 0:p.first_name)||"",last_name:((m=c.user)==null?void 0:m.last_name)||"",phone:((f=c.user)==null?void 0:f.phone)||"",date_of_birth:(g=c.user)!=null&&g.date_of_birth?typeof c.user.date_of_birth=="string"?c.user.date_of_birth:c.user.date_of_birth.split("T")[0]:"",gender:c.gender||"",address:"",allergies:c.dietary_restrictions||"",medical_conditions:c.medical_conditions||"",medications:c.medications||"",target_weight:c.target_weight||""})),l(!1),q.info("  ")};return d?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})}):e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user text-success me-2"})," "]}),e.jsx("p",{className:"text-muted",children:"   "})]}),e.jsx("div",{className:"d-flex gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn btn-secondary",onClick:_,children:[e.jsx("i",{className:"fas fa-times me-2"}),""]}),e.jsx("button",{className:"btn btn-success",onClick:y,disabled:u.isLoading||j.isLoading,children:u.isLoading||j.isLoading?e.jsx(ve,{size:"sm",color:"light"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save me-2"})," "]})})]}):e.jsxs("button",{className:"btn btn-success",onClick:()=>l(!0),children:[e.jsx("i",{className:"fas fa-edit me-2"})," "]})})]})})}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user me-2"})," "]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"text",name:"first_name",className:"form-control",value:i.first_name,onChange:x,required:!0,disabled:!a})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"text",name:"last_name",className:"form-control",value:i.last_name,onChange:x,required:!0,disabled:!a})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"tel",name:"phone",className:"form-control",value:i.phone,onChange:x,required:!0,disabled:!a,placeholder:"+964 750 123 4567"})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("input",{type:"date",name:"date_of_birth",className:"form-control",value:i.date_of_birth,onChange:x,disabled:!a})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:" *"}),e.jsxs("select",{name:"gender",className:"form-select",value:i.gender,onChange:x,required:!0,disabled:!a,children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"male",children:""}),e.jsx("option",{value:"female",children:""})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:""}),e.jsx("textarea",{name:"address",className:"form-control",rows:"2",value:i.address,onChange:x,disabled:!a,placeholder:" "})]})]})]})}),e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header bg-danger text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-heartbeat me-2"})," "]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:""}),e.jsx("textarea",{name:"allergies",className:"form-control",rows:"2",value:i.allergies,onChange:x,disabled:!a,placeholder:"    (  )"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"medical_conditions",className:"form-control",rows:"2",value:i.medical_conditions,onChange:x,disabled:!a,placeholder:"      "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"medications",className:"form-control",rows:"2",value:i.medications,onChange:x,disabled:!a,placeholder:"    "})]})]})]})}),e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header bg-info text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-ruler me-2"})," ",e.jsxs("span",{className:"ms-2",children:[e.jsx("i",{className:"fas fa-lock"}),"()"]})]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:" () *"}),e.jsx("div",{className:"form-control-plaintext bg-light p-2 rounded",children:c!=null&&c.height?`${c.height} `:" "})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:" () *"}),e.jsx("div",{className:"form-control-plaintext bg-light p-2 rounded",children:c!=null&&c.current_weight?`${c.current_weight} `:" "})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("div",{className:"form-control-plaintext bg-light p-2 rounded",children:(c==null?void 0:c.goal)==="lose_weight"?" ":(c==null?void 0:c.goal)==="gain_weight"?" ":(c==null?void 0:c.goal)==="maintain_weight"?"  ":(c==null?void 0:c.goal)==="build_muscle"?" ":(c==null?void 0:c.goal)==="improve_health"?"  ":" "})]}),e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsxs("small",{children:[e.jsx("strong",{children:":"}),"    (*)       .       ."]})]})]})]})})]}),!a&&c&&e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h6",{className:"text-muted mb-3",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"  "]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-3 text-center",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-primary fs-4",children:c.height?`${c.height} `:" "}),e.jsx("small",{className:"text-muted",children:""})]})}),e.jsx("div",{className:"col-md-3 text-center",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-success fs-4",children:c.current_weight?`${c.current_weight} `:" "}),e.jsx("small",{className:"text-muted",children:""})]})}),e.jsx("div",{className:"col-md-3 text-center",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-warning fs-4",children:c.gender==="male"?"":c.gender==="female"?"":" "}),e.jsx("small",{className:"text-muted",children:""})]})})]})]})})})})]})]})},ey=()=>{const{t}=ze(),{user:s}=Qe(),n=ss(),r=C=>({weight_loss:" ",weight_maintenance:" ",weight_gain:" ",health_maintenance:"  ",pregnant:"",breastfeeding:"",diabetic:" ",keto:"",balanced:"",low_carb:" ",muscle_gain:" ",muscle_building:" "})[C]||C,[a,l]=E.useState(null),[i,o]=E.useState([]),[c,d]=E.useState(!1),{data:h}=xe("patient-profile",()=>ee.get(`/api/accounts/patients/${s.id}/profile/`).then(C=>C.data),{enabled:!!(s!=null&&s.id)}),{data:u,isLoading:j,error:x,refetch:y}=xe("patient-meal-plans",()=>ee.get(`/api/meals/patients/${s.id}/meal-plans/`).then(C=>(console.log(" API response:",C.data),C.data&&C.data.results&&Array.isArray(C.data.results)?(console.log(" Found meal plans:",C.data.results.length),C.data.results.forEach((M,U)=>{var Q;console.log(` Plan ${U+1}: ${M.title} - Diet: ${M.diet_plan} - Meals: ${((Q=M.meals)==null?void 0:Q.length)||0}`),M.meals&&M.meals.length>0&&(console.log(` Debug - Plan ${U+1} meals breakdown:`),M.meals.forEach((K,J)=>{console.log(`   Meal ${J+1}: ${K.name} - Day: ${K.day_of_week} - Total Nutrition:`,K.total_nutrition)}))}),C.data.results):(console.log(" No meal plans found or invalid response format"),[]))),{enabled:!!(s!=null&&s.id),refetchInterval:1e4,initialData:[],staleTime:0,cacheTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,retry:3}),_=(C,M)=>i.some(U=>U.meal.id===C.id&&U.mealType===M),p=(C,M)=>{console.log(" Selecting meal:",C.name,"Type:",M),console.log(" Meal nutrition data:",{mealName:C.name,nutrition_info:C.nutrition_info,total_nutrition:C.total_nutrition,calories:C.calories,protein:C.protein,carbs:C.carbs,fat:C.fat});const U=i.findIndex(Q=>Q.meal.id===C.id&&Q.mealType===M);if(U>=0){const Q=i.filter((K,J)=>J!==U);o(Q),q.info(`   ${C.name}`)}else{const Q={meal:C,mealType:M,selectedAt:new Date().toISOString()};o([...i,Q]),q.success(`  ${C.name}`)}},m=C=>{var M,U;return!C.ingredients||C.ingredients.length===0?((M=C.nutrition_info)==null?void 0:M.calories)||((U=C.total_nutrition)==null?void 0:U.calories)||C.calories||0:C.ingredients.reduce((Q,K)=>{var O;let J=K.calories||0;if(J===0){const $=K.calories_per_100g||((O=K.food)==null?void 0:O.calories_per_100g)||0,N=K.amount||K.quantity||0;$>0&&N>0&&(J=$*N/100)}return Q+J},0)},f=async()=>{var C,M,U,Q;if(i.length===0){q.warning("     ");return}try{const K=i.map(O=>{var V;console.log(" Patient - Sending meal data:",{mealName:O.meal.name,ingredients:O.meal.ingredients,ingredientsLength:((V=O.meal.ingredients)==null?void 0:V.length)||0,mealData:O.meal});let $=O.meal.ingredients||[];(!$||$.length===0)&&(console.log(" Patient - No ingredients found, trying alternative sources"),O.meal.meal_ingredients?$=O.meal.meal_ingredients:O.meal.ingredients_list&&($=O.meal.ingredients_list));const N=$.map(z=>{var Z,D,X;return z.food&&typeof z.food=="object"?{...z,food_id:z.food.id||z.food_id||z.id,food_name:z.food.name||z.food_name||z.name,food_name_ar:z.food.name_ar||z.food_name_ar,amount:z.amount||z.quantity||0,calories_per_100g:z.calories_per_100g||z.food.calories_per_100g||0,protein_per_100g:z.protein_per_100g||z.food.protein_per_100g||0,carbs_per_100g:z.carbs_per_100g||z.food.carbs_per_100g||0,fat_per_100g:z.fat_per_100g||z.food.fat_per_100g||0,calories:z.calories||(z.calories_per_100g&&z.amount?z.calories_per_100g*z.amount/100:0),protein:z.protein||(z.protein_per_100g&&z.amount?z.protein_per_100g*z.amount/100:0),carbs:z.carbs||(z.carbs_per_100g&&z.amount?z.carbs_per_100g*z.amount/100:0),fat:z.fat||(z.fat_per_100g&&z.amount?z.fat_per_100g*z.amount/100:0)}:{...z,food_id:z.food_id||((Z=z.food)==null?void 0:Z.id)||z.id,food_name:z.food_name||((D=z.food)==null?void 0:D.name)||z.name,food_name_ar:z.food_name_ar||((X=z.food)==null?void 0:X.name_ar),amount:z.amount||z.quantity||0,calories_per_100g:z.calories_per_100g||0,protein_per_100g:z.protein_per_100g||0,carbs_per_100g:z.carbs_per_100g||0,fat_per_100g:z.fat_per_100g||0,calories:z.calories||0,protein:z.protein||0,carbs:z.carbs||0,fat:z.fat||0}});console.log(" Patient - Final ingredients to send:",N);const H=m(O.meal),L=N.reduce((z,Z)=>z+(Z.protein||0),0),R=N.reduce((z,Z)=>z+(Z.carbs||0),0),T=N.reduce((z,Z)=>z+(Z.fat||0),0);return{meal_id:O.meal.id,meal_name:O.meal.name,meal_type:O.mealType,nutrition_info:{calories:H,protein:L,carbs:R,fat:T},ingredients:N,notes:O.meal.description||""}}),J=await ee.post(`/api/meals/patients/${s.id}/selected-meals/`,{meal_plan_id:a.id,selected_meals:K});if(J.data){if(J.data.adjustment_info&&J.data.adjustment_info.adjusted){const{original_calories:O,adjusted_calories:$,required_calories:N}=J.data.adjustment_info;q.success(`   !      ${O}  ${$}    (${N} )`,{autoClose:5e3})}else q.success("   !");d(!1),o([]),n.invalidateQueries("patient-meal-plans")}}catch(K){console.error("Error saving selected meals:",K);const J=((M=(C=K.response)==null?void 0:C.data)==null?void 0:M.error)||K.message||"    ";if(q.error(J),(Q=(U=K.response)==null?void 0:U.data)!=null&&Q.required_calories){const{required_calories:O,total_calories:$,difference:N}=K.response.data;console.log("Calories validation error:",{required_calories:O,total_calories:$,difference:N})}}},g=C=>({breakfast:"",Breakfast:"",lunch:"",Lunch:"",dinner:"",Dinner:"",snack:" ",Snack:" ","Morning Snack":"  ","Afternoon Snack":"   ","Evening Snack":"  ","Pre-Workout":" ","Post-Workout":" "})[C]||C,v=C=>({keto:"",balanced:"",muscle_gain:" ",diabetic:" ",low_carb:" ",high_protein:" ",weight_gain:" ",muscle_building:" ",health_maintenance:"  ",weight_maintenance:"  ",diabetes:" ",heart_healthy:" ",mediterranean:"  ",vegetarian:"",vegan:" ",paleo:"",intermittent_fasting:" "})[C]||C,k=(()=>{if(!u||!Array.isArray(u))return[];const C=new Date;return C.setHours(0,0,0,0),u.filter(M=>{if(!M.start_date||!M.end_date)return!1;const U=new Date(M.start_date),Q=new Date(M.end_date);return U<=C&&Q>=C||U>C}).sort((M,U)=>new Date(U.start_date)-new Date(M.start_date))})();return j?e.jsx("div",{className:"container-fluid py-4",children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-12 text-center",children:[e.jsx(ve,{}),e.jsx("p",{className:"mt-3",children:"   ..."})]})})}):x?e.jsx("div",{className:"container-fluid py-4",children:e.jsx("div",{className:"row justify-content-center",children:e.jsx("div",{className:"col-12 text-center",children:e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("h5",{children:"   "}),e.jsx("p",{children:x.message}),e.jsx("button",{className:"btn btn-primary",onClick:()=>y(),children:" "})]})})})}):e.jsx("div",{className:"container-fluid py-4",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-utensils me-2"})," "]}),e.jsxs("button",{className:"btn btn-outline-primary",onClick:()=>y(),children:[e.jsx("i",{className:"fas fa-sync-alt me-2"})," "]})]}),k.length>0?e.jsx("div",{className:"row",children:k.map((C,M)=>{var U;return e.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:e.jsxs("div",{className:"card h-100 border-primary",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-alt me-2"}),r(C.title)]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",C.diet_plan_display||v(C.diet_plan)]}),e.jsxs("p",{children:[e.jsx("strong",{children:":"}),"  ",new Date(C.start_date).toLocaleDateString("ar-SA",{calendar:"gregory"}),"  ",new Date(C.end_date).toLocaleDateString("ar-SA",{calendar:"gregory"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",((U=C.meals)==null?void 0:U.length)||0]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("button",{className:"btn btn-primary w-100",onClick:()=>{l(C),d(!0)},children:[e.jsx("i",{className:"fas fa-utensils me-2"})," "]})})]})},M)})}):e.jsx("div",{className:"text-center py-5",children:e.jsxs("div",{className:"alert alert-info",children:[e.jsx("h5",{children:"    "}),e.jsx("p",{children:"        ."})]})}),c&&a&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-xl",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header bg-primary text-white",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-utensils me-2"}),r(a.title)]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>d(!1)})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-info",children:[e.jsx("div",{className:"card-header bg-info text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-info-circle me-2"})," "]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",a.diet_plan_display||v(a.diet_plan)]}),e.jsxs("p",{children:[e.jsx("strong",{children:":"}),"  ",new Date(a.start_date).toLocaleDateString("ar-SA",{calendar:"gregory"}),"  ",new Date(a.end_date).toLocaleDateString("ar-SA",{calendar:"gregory"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:":"})," ",a.description||"  "]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card border-success",children:[e.jsx("div",{className:"card-header bg-success text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-check-circle me-2"})," "]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",i.length]}),e.jsxs("p",{children:[e.jsx("strong",{children:":"})," ",i.map(C=>C.meal.name).join(", ")||" "]})]})]})})]}),a.meals&&a.meals.length>0?e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("h6",{className:"mb-3",children:[e.jsx("i",{className:"fas fa-utensils me-2"}),"   "]}),e.jsxs("p",{className:"text-muted mb-4",children:["     (",a.diet_plan_display||v(a.diet_plan),")        :"]}),(()=>{var U;console.log(" Debug - selectedPlan.meals:",(U=a.meals)==null?void 0:U.length,a.meals);const C={};return a.meals.forEach(Q=>{const K=Q.day_of_week||1;console.log(` Debug - Meal: ${Q.name}, Day: ${K}`),C[K]||(C[K]=[]),C[K].push(Q)}),console.log(" Debug - mealsByDay:",C),Object.keys(C).sort((Q,K)=>parseInt(Q)-parseInt(K)).map(Q=>{const K=C[Q],O=["","","","","","","",""][parseInt(Q)]||` ${Q}`;return e.jsx("div",{className:"mb-5",children:e.jsxs("div",{className:"card border-primary",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-day me-2"}),O," - ",K.length," "]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row",children:K.map(($,N)=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:e.jsxs("div",{className:"card h-100 border-success",children:[e.jsxs("div",{className:"card-header bg-success text-white",children:[e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-utensils me-2"}),$.meal_type_name_ar||g($.meal_type_name||$.meal_type||"breakfast")]}),e.jsx("small",{className:"text-light",children:$.name})]}),e.jsxs("div",{className:"card-body",children:[$.ingredients&&$.ingredients.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"text-primary mb-2",children:[e.jsx("i",{className:"fas fa-shopping-basket me-1"}),":"]}),e.jsx("div",{className:"ingredients-list",children:$.ingredients.map((H,L)=>{var V,z,Z,D;const R=H.calories||(H.calories_per_100g&&H.amount?H.calories_per_100g*H.amount/100:(V=H.food)!=null&&V.calories_per_100g&&H.amount?H.food.calories_per_100g*H.amount/100:0),T=H.protein||(H.protein_per_100g&&H.amount?H.protein_per_100g*H.amount/100:(z=H.food)!=null&&z.protein_per_100g&&H.amount?H.food.protein_per_100g*H.amount/100:0);return e.jsxs("div",{className:"ingredient-item d-flex justify-content-between align-items-center mb-1 p-1 bg-light rounded small",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-circle text-success me-1",style:{fontSize:"0.4rem"}}),e.jsx("span",{className:"fw-bold",children:H.food_name_ar||H.food_name||((Z=H.food)==null?void 0:Z.name_ar)||((D=H.food)==null?void 0:D.name)||H.name||"  "})]}),e.jsxs("div",{className:"text-muted",children:[e.jsxs("span",{className:"badge bg-primary small",children:[H.amount||H.quantity||0,"g"]}),e.jsxs("small",{className:"text-info ms-1",children:[": ",Math.round(R)," | : ",Math.round(T),"g"]}),H.notes&&e.jsxs("small",{className:"text-info ms-1",children:["- ",H.notes]})]})]},L)})})]}),(()=>{const H=m($);return H>0&&e.jsx("div",{className:"mt-2 p-2 bg-info bg-opacity-10 rounded",children:e.jsxs("small",{className:"text-info fw-bold",children:[e.jsx("i",{className:"fas fa-fire me-1"})," : ",Math.round(H)," "]})})})()]}),e.jsx("div",{className:"card-footer",children:e.jsxs("button",{className:`btn w-100 ${_($,"breakfast")?"btn-success":"btn-outline-success"}`,onClick:()=>p($,"breakfast"),children:[e.jsx("i",{className:`fas ${_($,"breakfast")?"fa-check":"fa-plus"} me-2`}),_($,"breakfast")?" ":" "]})})]})},N))})})]})},Q)})})()]})}):e.jsx("div",{className:"text-center py-4",children:e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("h6",{children:"     "}),e.jsx("p",{children:"       ."})]})}),i.length>0&&e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-primary",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-shopping-cart me-2"}),"  (",i.length,")"]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"row",children:i.map((C,M)=>{const U=m(C.meal);return e.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:e.jsx("div",{className:"card border-success",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h6",{className:"card-title text-success",children:[e.jsx("i",{className:"fas fa-check-circle me-2"}),C.meal.name]}),e.jsxs("p",{className:"card-text small text-muted",children:[" : ",g(C.mealType)]}),e.jsxs("p",{className:"card-text small text-info",children:[e.jsx("i",{className:"fas fa-fire me-1"}),": ",Math.round(U)," "]}),e.jsxs("p",{className:"card-text small text-muted",children:[" : ",new Date(C.selectedAt).toLocaleTimeString("ar-SA")]})]})})},M)})})})]})})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:""}),e.jsxs("button",{type:"button",className:"btn btn-success",onClick:f,disabled:i.length===0,children:[e.jsx("i",{className:"fas fa-save me-2"}),"  (",i.length,")"]})]})]})})})]})})})},ty=()=>{const{t}=ze(),{user:s}=Qe(),n=ss(),[r,a]=E.useState(null),[l,i]=E.useState("upcoming"),[o,c]=E.useState(!1),[d,h]=E.useState(!1),[u,j]=E.useState({appointment_type:"consultation",doctor:"",preferred_date:"",preferred_time:"",chief_complaint:" ",notes:"",payment_method:"",phone_number:""}),[x,y]=E.useState([]),_=()=>{j({appointment_type:"consultation",doctor:"",preferred_date:"",preferred_time:"",chief_complaint:" ",notes:"",payment_method:"",phone_number:""}),y([])},{data:p,isLoading:m}=xe("patient-appointments",()=>ee.get("/api/bookings/appointments/").then(D=>D.data.results),{enabled:!!s}),{data:f,isLoading:g,refetch:v,error:b}=xe("doctors-list",()=>ee.get("/api/auth/doctors/").then(D=>D.data),{enabled:!!s,staleTime:0,cacheTime:0,refetchOnWindowFocus:!0,onError:D=>{console.error("Error loading doctors:",D),q.error("    ")}});let k=Array.isArray(f)?f:(f==null?void 0:f.results)||[];(!k||k.length===0)&&(k=[{id:2,user:{id:10,first_name:"Dr Mays",last_name:"Al-rubay",get_full_name:()=>"Dr Mays Al-rubay"},specialization:"Therapeutic nutrition",consultation_fee:5e4,years_of_experience:8}]),console.log("Doctors Response:",f),console.log("Doctors Array:",k),console.log("Doctors Length:",k==null?void 0:k.length),console.log("Is Array:",Array.isArray(k)),console.log("Doctors Details:",k==null?void 0:k.map(D=>{var X,te,ie;return{id:D.id,user_id:(X=D.user)==null?void 0:X.id,name:`${(te=D.user)==null?void 0:te.first_name} ${(ie=D.user)==null?void 0:ie.last_name}`}}));const C=ct(D=>ee.post(`/api/bookings/appointments/${D}/cancel/`),{onSuccess:()=>{q.success("   "),n.invalidateQueries("patient-appointments"),a(null)},onError:D=>{q.error("   "),console.error("Cancel error:",D)}}),M=ct(D=>ee.post("/api/bookings/appointments/",D),{onSuccess:()=>{q.success("    !      ."),n.invalidateQueries("patient-appointments"),h(!1),j({appointment_type:"consultation",doctor:"",preferred_date:"",preferred_time:"",chief_complaint:" ",notes:"",payment_method:"",phone_number:""}),y([])},onError:D=>{var te,ie,ue,$e;console.error("Booking error:",D),console.error("Error response:",(te=D.response)==null?void 0:te.data);let X="    ";if((ue=(ie=D.response)==null?void 0:ie.data)!=null&&ue.detail)X=D.response.data.detail;else if(($e=D.response)!=null&&$e.data){const Pt=Object.values(D.response.data).flat();Pt.length>0&&(X=Pt.join(", "))}q.error(X)}}),U=()=>{if(!p)return[];const D=new Date;return p.filter(X=>new Date(X.scheduled_date)>=D&&X.status!=="cancelled")},Q=()=>{if(!p)return[];const D=new Date;return p.filter(X=>new Date(X.scheduled_date)<D||X.status==="cancelled")},K=D=>{switch(D){case"confirmed":return e.jsx("span",{className:"badge bg-success",children:""});case"pending":return e.jsx("span",{className:"badge bg-warning",children:" "});case"cancelled":return e.jsx("span",{className:"badge bg-danger",children:""});case"completed":return e.jsx("span",{className:"badge bg-info",children:""});default:return e.jsx("span",{className:"badge bg-secondary",children:D})}},J=D=>{switch(D){case"consultation":return"";case"follow_up":return"";default:return D}},O=D=>{if(!D||!D.user)return" ";const X=D.user.first_name||"",te=D.user.last_name||"";return X&&te?`.${X} ${te}`:`. ${X} ${te}`.trim()},$=D=>{if(!D)return" ";let X=D.replace(/^\.?\s*/,"");const te=X.trim().split(/\s+/);if(te.length>=2){const ie=te[0],ue=te.slice(1).join(" ");return`.${ie} ${ue}`}return`.${X}`},N=D=>{window.confirm("      ")&&C.mutate(D)},H=D=>new Date(D).getDay()!==5,L=()=>{const D=[];for(let ie=17;ie<20;ie++)for(let ue=0;ue<60;ue+=30){const $e=`${ie.toString().padStart(2,"0")}:${ue.toString().padStart(2,"0")}`;D.push({time:$e,end_time:ue===30?`${ie.toString().padStart(2,"0")}:00`:`${(ie+1).toString().padStart(2,"0")}:00`,duration:30,available:!0})}return D},R=async(D,X)=>{if(!D||!X){y([]);return}if(!H(X)){y([]);return}const te=L();y(te),console.log("Generated time slots:",te)},T=D=>{const{name:X,value:te}=D.target;if(console.log(`Form field changed: ${X} = ${te}`),X==="doctor"){if(console.log("Doctor selected:",te),console.log("Available doctors:",k==null?void 0:k.map(ie=>{var ue,$e,Pt;return{id:(ue=ie.user)==null?void 0:ue.id,name:`${($e=ie.user)==null?void 0:$e.first_name} ${(Pt=ie.user)==null?void 0:Pt.last_name}`}})),j(ie=>({...ie,[X]:te,preferred_time:""})),te&&u.preferred_date){const ie=k.find(ue=>ue.id.toString()===te.toString());ie&&R(ie.user.id,u.preferred_date)}}else if(X==="preferred_date"){if(te&&!H(te)){q.error("   .        ."),j(ie=>({...ie,preferred_date:"",preferred_time:""})),y([]);return}if(te&&u.doctor){const ie=k.find(ue=>ue.id.toString()===u.doctor.toString());ie&&R(ie.user.id,te)}j(ie=>({...ie,[X]:te,preferred_time:""}))}else j(ie=>({...ie,[X]:te}))},V=D=>{if(D.preventDefault(),!u.doctor||!u.preferred_date||!u.preferred_time){q.error("     ");return}if(!u.payment_method){q.error("   ");return}if(!H(u.preferred_date)){q.error("      ");return}if(!k||k.length===0){q.error("    .   .");return}const X=k.find(ie=>ie.id.toString()===u.doctor.toString());if(!X){q.error("   ");return}const te={doctor:X.user.id,appointment_type:u.appointment_type,scheduled_date:u.preferred_date,scheduled_time:u.preferred_time,duration:30,chief_complaint:u.chief_complaint||"",notes_from_patient:u.notes||"",payment_method:u.payment_method};console.log("=== Booking Data Debug ==="),console.log("bookingForm:",u),console.log("bookingData:",te),console.log("doctor value type:",typeof te.doctor),console.log("doctor value:",te.doctor),M.mutate(te)};if(m)return e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})});const z=U(),Z=Q();return e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-check text-success me-2"}),""]}),e.jsx("p",{className:"text-muted",children:"   "})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{className:"btn btn-outline-primary",onClick:()=>c(!0),children:[e.jsx("i",{className:"fas fa-calendar-plus me-2"}),"  "]}),e.jsxs("button",{className:"btn btn-outline-success",onClick:()=>{const D=[["",""," ","",""],...(p||[]).map(ue=>[Je(ue.scheduled_date),Bt(ue.scheduled_time),J(ue.appointment_type),$(ue.doctor_name),ue.status])].map(ue=>ue.join(",")).join(`
`),X=new Blob([D],{type:"text/csv;charset=utf-8;"}),te=document.createElement("a"),ie=URL.createObjectURL(X);te.setAttribute("href",ie),te.setAttribute("download",`_${s==null?void 0:s.first_name}_${new Date().toISOString().split("T")[0]}.csv`),te.style.visibility="hidden",document.body.appendChild(te),te.click(),document.body.removeChild(te),q.success("   ")},children:[e.jsx("i",{className:"fas fa-download me-2"})," "]})]})]})})}),s&&e.jsx("div",{className:"alert alert-info mb-4",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsxs("div",{children:[e.jsxs("strong",{children:[" ",s.first_name,"!"]}),e.jsx("br",{}),e.jsx("small",{children:"      ."}),e.jsx("br",{}),e.jsxs("small",{className:"text-primary",children:[e.jsx("i",{className:"fas fa-phone me-1"}),": ",e.jsx("strong",{children:"07766551551"})]})]})]})}),e.jsxs("ul",{className:"nav nav-tabs mb-4",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${l==="upcoming"?"active":""}`,onClick:()=>i("upcoming"),children:[e.jsx("i",{className:"fas fa-calendar-plus me-2"})," ",z.length>0&&e.jsx("span",{className:"badge bg-primary ms-2",children:z.length})]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${l==="past"?"active":""}`,onClick:()=>i("past"),children:[e.jsx("i",{className:"fas fa-calendar-times me-2"})," ",Z.length>0&&e.jsx("span",{className:"badge bg-secondary ms-2",children:Z.length})]})})]}),l==="upcoming"&&e.jsx("div",{className:"row",children:z.length>0?z.map(D=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:e.jsxs("div",{className:"card h-100 border-primary",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar me-2"}),J(D.appointment_type)]}),K(D.status)]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("h6",{className:"card-title text-primary",children:[$(D.doctor_name),D.doctor_specialization&&e.jsx("small",{className:"text-muted d-block",children:{nutrition:" ",general:" ",specialist:""}[D.doctor_specialization]||D.doctor_specialization})]}),e.jsx("p",{className:"card-text text-muted",children:D.chief_complaint||"   "}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsx("div",{className:"fw-bold text-primary",children:Je(D.scheduled_date)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsx("div",{className:"fw-bold text-info",children:Bt(D.scheduled_time)})]}),e.jsx("div",{className:"row text-center mb-3",children:e.jsxs("div",{className:"col-12",children:[e.jsx("small",{className:"text-muted",children:""}),e.jsxs("div",{className:"fw-bold text-success",children:[D.duration," "]})]})}),D.notes&&e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsx("div",{className:"small text-muted",children:D.notes})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{className:"btn btn-primary flex-fill",onClick:()=>a(D),children:[e.jsx("i",{className:"fas fa-eye me-2"})," "]}),D.status==="confirmed"&&e.jsxs("button",{className:"btn btn-outline-danger",onClick:()=>N(D.id),disabled:C.isLoading,children:[e.jsx("i",{className:"fas fa-times me-1"}),""]})]})})]})},D.id)):e.jsxs("div",{className:"col-12 text-center py-5",children:[e.jsx("i",{className:"fas fa-calendar-check text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:"   "}),e.jsx("p",{className:"text-muted",children:"     "}),e.jsx("div",{className:"mt-4",children:e.jsxs("button",{className:"btn btn-success btn-lg",onClick:()=>c(!0),children:[e.jsx("i",{className:"fas fa-calendar-plus me-2"}),"  "]})}),e.jsxs("div",{className:"mt-3 p-3 bg-light rounded",children:[e.jsx("h6",{className:"text-muted",children:" :"}),e.jsxs("p",{className:"text-muted small mb-0",children:[e.jsx("strong",{children:":"})," ",s==null?void 0:s.first_name," ",s==null?void 0:s.last_name,e.jsx("br",{}),e.jsx("strong",{children:" :"})," ",s==null?void 0:s.id,e.jsx("br",{}),e.jsx("strong",{children:" :"})," ",s==null?void 0:s.email]})]})]})}),l==="past"&&e.jsx("div",{className:"row",children:Z.length>0?Z.map(D=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:e.jsxs("div",{className:"card h-100 border-secondary",children:[e.jsx("div",{className:"card-header bg-secondary text-white",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar me-2"}),J(D.appointment_type)]}),K(D.status)]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("h6",{className:"card-title text-secondary",children:[$(D.doctor_name),D.doctor_specialization&&e.jsx("small",{className:"text-muted d-block",children:{nutrition:" ",general:" ",specialist:""}[D.doctor_specialization]||D.doctor_specialization})]}),e.jsx("p",{className:"card-text text-muted",children:D.chief_complaint||"   "}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsx("div",{className:"fw-bold text-secondary",children:Je(D.scheduled_date)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsx("div",{className:"fw-bold text-info",children:Bt(D.scheduled_time)})]}),e.jsx("div",{className:"row text-center",children:e.jsxs("div",{className:"col-12",children:[e.jsx("small",{className:"text-muted",children:""}),e.jsxs("div",{className:"fw-bold text-success",children:[D.duration," "]})]})})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("button",{className:"btn btn-outline-secondary w-100",onClick:()=>a(D),children:[e.jsx("i",{className:"fas fa-eye me-2"})," "]})})]})},D.id)):e.jsxs("div",{className:"col-12 text-center py-5",children:[e.jsx("i",{className:"fas fa-calendar-times text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:"   "}),e.jsx("p",{className:"text-muted",children:"   "}),e.jsxs("div",{className:"mt-3 p-3 bg-light rounded",children:[e.jsx("h6",{className:"text-muted",children:" :"}),e.jsxs("p",{className:"text-muted small mb-0",children:[e.jsx("strong",{children:":"})," ",s==null?void 0:s.first_name," ",s==null?void 0:s.last_name,e.jsx("br",{}),e.jsx("strong",{children:" :"})," ",s==null?void 0:s.id,e.jsx("br",{}),e.jsx("strong",{children:" :"})," ",s==null?void 0:s.email]})]})]})}),r&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-calendar-check text-success me-2"})," "]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>a(null)})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"text-primary mb-3",children:" "}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:" :"})," ",J(r.appointment_type)]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:":"})," ",Je(r.scheduled_date)]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:":"})," ",Bt(r.scheduled_time)]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:":"})," ",r.duration," "]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:":"})," ",K(r.status)]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"text-success mb-3",children:" "}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:" :"})," ",$(r.doctor_name)]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:":"})," ",(()=>{const D=r.doctor_specialization;return{nutrition:" ",general:" ",specialist:""}[D]||D||" "})()]})]})]}),e.jsxs("div",{className:"border-top pt-4",children:[e.jsx("h6",{className:"mb-3",children:" "}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:" :"}),e.jsx("div",{className:"text-muted",children:r.chief_complaint||"   "})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{children:":"}),e.jsx("div",{className:"text-muted",children:r.notes||"  "})]})})]})]}),r.status==="completed"&&r.diagnosis&&e.jsxs("div",{className:"border-top pt-4",children:[e.jsx("h6",{className:"mb-3",children:" "}),e.jsxs("div",{className:"p-3 bg-light rounded",children:[e.jsx("strong",{children:":"})," ",r.diagnosis]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>a(null),children:""}),r.status==="confirmed"&&e.jsxs("button",{className:"btn btn-danger",onClick:()=>N(r.id),disabled:C.isLoading,children:[e.jsx("i",{className:"fas fa-times me-2"})," "]}),e.jsxs("button",{className:"btn btn-success",onClick:()=>{const D=`
 
================
 : ${J(r.appointment_type)}
: ${Je(r.scheduled_date)}
: ${Bt(r.scheduled_time)}
: ${r.duration} 
: ${r.status}

 
================
 : ${$(r.doctor_name)}
: ${(()=>{const ue=r.doctor_specialization;return{nutrition:" ",general:" ",specialist:""}[ue]||ue||" "})()}

 
================
 : ${r.chief_complaint||"   "}
: ${r.notes||"  "}

${r.status==="completed"&&r.diagnosis?`
 
================
: ${r.diagnosis}
`:""}
                    `.trim(),X=new Blob([D],{type:"text/plain;charset=utf-8;"}),te=document.createElement("a"),ie=URL.createObjectURL(X);te.setAttribute("href",ie),te.setAttribute("download",`__${Je(r.scheduled_date)}.txt`),te.style.visibility="hidden",document.body.appendChild(te),te.click(),document.body.removeChild(te),q.success("    ")},children:[e.jsx("i",{className:"fas fa-download me-2"})," "]})]})]})})}),o&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9999},children:e.jsx("div",{className:"modal-dialog modal-lg",style:{zIndex:1e4},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-calendar-plus text-success me-2"}),"  "]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>c(!1)})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:" :"}),"         ."]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"card border-success mx-auto",style:{maxWidth:"400px"},children:[e.jsx("div",{className:"card-header bg-success text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-alt me-2"})," "]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"card-text",children:"   "}),e.jsx("div",{className:"d-grid",children:e.jsxs("button",{className:"btn btn-outline-success",onClick:()=>{c(!1),h(!0)},children:[e.jsx("i",{className:"fas fa-external-link-alt me-2"}),"  "]})})]})]})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h6",{className:"text-muted",children:" :"}),e.jsx("div",{className:"p-3 bg-light rounded",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:":"})," ",s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"})," ",s==null?void 0:s.id]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"})," ",s==null?void 0:s.email]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"})," ",(s==null?void 0:s.phone)||" "]})]})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:""}),e.jsxs("button",{className:"btn btn-success",onClick:()=>{q.success("    !      ."),c(!1)},children:[e.jsx("i",{className:"fas fa-calendar-check me-2"})," "]})]})]})})}),d&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9999},children:e.jsx("div",{className:"modal-dialog modal-lg",style:{zIndex:1e4},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-calendar-plus text-success me-2"}),"  "]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{h(!1),_()}})]}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:" :"}),"     .      ."]}),e.jsx("div",{className:"alert alert-success mb-3",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-phone text-success me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"   :"}),e.jsx("br",{}),e.jsx("span",{className:"text-success fw-bold",children:"07766551551"}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-success ms-2",onClick:()=>window.open("tel:07766551551","_self"),children:[e.jsx("i",{className:"fas fa-phone me-1"}),""]})]})]})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsxs("label",{className:"form-label",children:["  *",e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>v(),disabled:g,title:"  ",children:e.jsx("i",{className:`fas fa-sync-alt ${g?"fa-spin":""}`})})]}),e.jsxs("select",{className:"form-select",name:"doctor",value:u.doctor,onChange:T,required:!0,style:{minHeight:"40px"},onFocus:()=>{console.log("Select focused, doctors:",k),console.log("Doctors count:",k==null?void 0:k.length),console.log("Doctors details:",k==null?void 0:k.map(D=>{var X,te,ie;return{id:D.id,user_id:(X=D.user)==null?void 0:X.id,name:`${(te=D.user)==null?void 0:te.first_name} ${(ie=D.user)==null?void 0:ie.last_name}`,specialization:D.specialization,fee:D.consultation_fee}}))},children:[e.jsx("option",{value:"",children:" "}),k&&Array.isArray(k)&&k.map(D=>e.jsx("option",{value:D.id,children:O(D)},D.id))]}),g&&e.jsxs("div",{className:"form-text",children:[e.jsx("i",{className:"fas fa-spinner fa-spin me-1"}),"   ..."]}),!g&&(!k||!Array.isArray(k)||k.length===0)&&e.jsxs("div",{className:"form-text text-warning",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-1"}),"    ",e.jsxs("button",{type:"button",className:"btn btn-sm btn-link p-0 ms-2",onClick:()=>v(),children:[e.jsx("i",{className:"fas fa-redo"})," "]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsxs("select",{className:"form-select",name:"appointment_type",value:u.appointment_type,onChange:T,required:!0,children:[e.jsx("option",{value:"consultation",children:""}),e.jsx("option",{value:"follow_up",children:""})]})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"date",className:"form-control",name:"preferred_date",value:u.preferred_date,onChange:T,min:new Date().toISOString().split("T")[0],required:!0}),e.jsxs("div",{className:"form-text text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"       (   )"]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsxs("select",{className:"form-select",name:"preferred_time",value:u.preferred_time,onChange:T,required:!0,disabled:!u.doctor||!u.preferred_date,children:[e.jsx("option",{value:"",children:!u.doctor||!u.preferred_date?"   ":H(u.preferred_date)?x.length===0?"   ":" ":"      "}),x.map((D,X)=>{const te=D.time,ie=Bt(te);return e.jsx("option",{value:te,children:ie},X)})]}),u.doctor&&u.preferred_date&&e.jsx("div",{className:"form-text",children:x.length>0?` ${x.length}  `:H(u.preferred_date)?"      ":"      "})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("input",{type:"text",className:"form-control",name:"chief_complaint",value:u.chief_complaint,onChange:T,placeholder:"  "})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsxs("select",{className:"form-select",name:"payment_method",value:u.payment_method,onChange:T,required:!0,children:[e.jsx("option",{value:"",children:"  "}),e.jsx("option",{value:"online",children:" "}),e.jsx("option",{value:"visit",children:"  "})]}),e.jsxs("div",{className:"form-text text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"    "]})]})})]}),u.payment_method==="online"&&e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"alert alert-info",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-credit-card me-2"}),e.jsxs("div",{children:[e.jsx("strong",{children:"  "}),e.jsx("div",{className:"mt-2 p-3 bg-white rounded border",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-university text-success me-2"}),e.jsxs("div",{children:[e.jsx("strong",{className:"text-success",children:"Qcard -  "}),e.jsx("br",{}),e.jsx("span",{className:"text-primary fs-5 fw-bold",children:"7113596071"})]})]})}),e.jsxs("small",{className:"text-muted mt-2 d-block",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"   Qcard   "]})]})]})})})})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{className:"form-control",name:"notes",value:u.notes,onChange:T,rows:"3",placeholder:"      "})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h6",{className:"text-muted",children:" :"}),e.jsx("div",{className:"p-3 bg-light rounded",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:":"})," ",s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"})," ",s==null?void 0:s.id]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"})," ",(s==null?void 0:s.phone)||" "]}),u.doctor&&k&&Array.isArray(k)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"}),(()=>{if(!k||!Array.isArray(k))return" ";const D=k.find(X=>X.id===parseInt(u.doctor));return D?O(D):" "})()]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"}),u.appointment_type==="consultation"?"":u.appointment_type==="follow_up"?"":" "]})]})]})})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{h(!1),_()},children:""}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:M.isLoading,children:M.isLoading?e.jsx(ve,{size:"sm",color:"light"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-calendar-check me-2"}),"  "]})})]})]})]})})})]})},sy=()=>{const{t}=ze(),{user:s}=Qe(),n=ss(),[r,a]=E.useState("invoices"),[l,i]=E.useState(!1),[o,c]=E.useState(!1),[d,h]=E.useState(null),[u,j]=E.useState(""),[x,y]=E.useState(""),{data:_,isLoading:p,error:m}=xe("patient-invoices",()=>ee.get("/api/payments/invoices/").then(L=>{var R;return console.log("Invoices API response:",L.data),((R=L.data)==null?void 0:R.results)||[]}).catch(L=>(console.error("Invoices API error:",L),[])),{enabled:!!s}),{data:f,isLoading:g,error:v}=xe("patient-payments",()=>ee.get("/api/payments/payments/").then(L=>{var R;return console.log("Payments API response:",L.data),((R=L.data)==null?void 0:R.results)||[]}).catch(L=>(console.error("Payments API error:",L),[])),{enabled:!!s}),{data:b,isLoading:k,error:C}=xe("payment-providers",()=>ee.get("/api/payments/providers/").then(L=>{var R;return console.log("Payment providers API response:",L.data),console.log("Payment providers API response type:",typeof L.data),console.log("Payment providers API response isArray:",Array.isArray(L.data)),Array.isArray(L.data)?L.data:((R=L.data)==null?void 0:R.results)||[]}).catch(L=>{var R;return console.error("Payment providers API error:",L),console.error("Payment providers API error response:",(R=L.response)==null?void 0:R.data),[]}),{enabled:!!s}),M=ct(L=>ee.post("/api/payments/coupons/validate/",L),{onSuccess:L=>{q.success(`  !  ${L.data.discount_amount} .`)},onError:L=>{var R,T;q.error(((T=(R=L.response)==null?void 0:R.data)==null?void 0:T.error)||"  ")}}),U=ct(L=>ee.post("/api/payments/payments/",L),{onSuccess:L=>{q.success("    "),n.invalidateQueries("patient-payments"),n.invalidateQueries("patient-invoices"),i(!1),window.open(`/payment-gateway/${L.data.payment_id}`,"_blank")},onError:L=>{q.error("   ")}}),Q=()=>{!u.trim()||!d||M.mutate({code:u,amount:d.total_amount,service_type:d.service_type})},K=()=>{!x||!d||U.mutate({invoice:d.id,provider:x,amount:d.outstanding_amount})},J=L=>{const R={draft:"bg-secondary",pending:"bg-warning",paid:"bg-success",partially_paid:"bg-info",cancelled:"bg-danger",refunded:"bg-dark",completed:"bg-success",failed:"bg-danger"},T={draft:"",pending:" ",paid:"",partially_paid:" ",cancelled:"",refunded:"",completed:"",failed:"",processing:" "};return{className:`badge ${R[L]||"bg-secondary"}`,text:T[L]||L}},O=L=>new Date(L).toLocaleDateString("ar-SA",{calendar:"gregory",year:"numeric",month:"2-digit",day:"2-digit"}),$=L=>({consultation:"",meal_plan:" ",subscription:""})[L]||L,N=L=>{h(L),c(!0)},H=async L=>{try{const R=`
        <!DOCTYPE html>
        <html dir="rtl" lang="ar">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title> ${L.invoice_number}</title>
          <style>
            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');
            * {
              margin: 0;
              padding: 0;
              box-sizing: border-box;
            }
            body {
              font-family: 'Cairo', Arial, sans-serif;
              direction: rtl;
              text-align: right;
              background: white;
              color: #333;
              line-height: 1.6;
            }
            .invoice-container {
              max-width: 800px;
              margin: 0 auto;
              padding: 40px;
              background: white;
            }
            .header {
              text-align: center;
              margin-bottom: 40px;
              border-bottom: 3px solid #007bff;
              padding-bottom: 20px;
            }
            .header h1 {
              color: #007bff;
              font-size: 32px;
              font-weight: 700;
              margin-bottom: 10px;
            }
            .header h2 {
              color: #666;
              font-size: 24px;
              font-weight: 600;
            }
            .invoice-info {
              display: flex;
              justify-content: space-between;
              margin-bottom: 30px;
              flex-wrap: wrap;
            }
            .info-section {
              flex: 1;
              min-width: 300px;
              margin: 10px;
            }
            .info-section h3 {
              color: #007bff;
              font-size: 18px;
              font-weight: 600;
              margin-bottom: 15px;
              border-bottom: 2px solid #e9ecef;
              padding-bottom: 5px;
            }
            .info-row {
              display: flex;
              justify-content: space-between;
              margin-bottom: 8px;
              padding: 5px 0;
            }
            .info-label {
              font-weight: 600;
              color: #555;
            }
            .info-value {
              color: #333;
            }
            .amounts-section {
              background: #f8f9fa;
              padding: 20px;
              border-radius: 8px;
              margin: 30px 0;
            }
            .amount-row {
              display: flex;
              justify-content: space-between;
              padding: 10px 0;
              border-bottom: 1px solid #dee2e6;
            }
            .amount-row:last-child {
              border-bottom: none;
              font-weight: 700;
              font-size: 18px;
              color: #dc3545;
            }
            .amount-label {
              font-weight: 600;
            }
            .amount-value {
              font-weight: 600;
            }
            .status-badge {
              display: inline-block;
              padding: 5px 15px;
              border-radius: 20px;
              font-weight: 600;
              font-size: 14px;
            }
            .status-pending { background: #fff3cd; color: #856404; }
            .status-paid { background: #d4edda; color: #155724; }
            .status-partially_paid { background: #cce7ff; color: #004085; }
            .status-cancelled { background: #f8d7da; color: #721c24; }
            .status-refunded { background: #e2e3e5; color: #383d41; }
            .description-section {
              margin: 30px 0;
              padding: 20px;
              background: #f8f9fa;
              border-radius: 8px;
            }
            .description-section h3 {
              color: #007bff;
              margin-bottom: 15px;
            }
            .notes-section {
              margin: 30px 0;
              padding: 20px;
              background: #fff3cd;
              border-radius: 8px;
              border-right: 4px solid #ffc107;
            }
            .notes-section h3 {
              color: #856404;
              margin-bottom: 15px;
            }
            .footer {
              text-align: center;
              margin-top: 40px;
              padding-top: 20px;
              border-top: 2px solid #e9ecef;
              color: #666;
              font-size: 14px;
            }
            @media print {
              body { margin: 0; }
              .invoice-container { padding: 20px; }
            }
          </style>
        </head>
        <body>
          <div class="invoice-container">
            <div class="header">
              <h1> </h1>
              <h2> : ${L.invoice_number}</h2>
            </div>

            <div class="invoice-info">
              <div class="info-section">
                <h3> </h3>
                <div class="info-row">
                  <span class="info-label"> :</span>
                  <span class="info-value">${L.invoice_number}</span>
                </div>
                <div class="info-row">
                  <span class="info-label"> :</span>
                  <span class="info-value">${$(L.service_type)}</span>
                </div>
                <div class="info-row">
                  <span class="info-label">:</span>
                  <span class="info-value">
                    <span class="status-badge status-${L.status}">
                      ${J(L.status).text}
                    </span>
                  </span>
                </div>
                <div class="info-row">
                  <span class="info-label"> :</span>
                  <span class="info-value">${O(L.issue_date)}</span>
                </div>
                <div class="info-row">
                  <span class="info-label"> :</span>
                  <span class="info-value">${O(L.due_date)}</span>
                </div>
              </div>

              <div class="info-section">
                <h3> </h3>
                <div class="amounts-section">
                  <div class="amount-row">
                    <span class="amount-label"> :</span>
                    <span class="amount-value">${L.total_amount} .</span>
                  </div>
                  <div class="amount-row">
                    <span class="amount-label"> :</span>
                    <span class="amount-value">${L.paid_amount} .</span>
                  </div>
                  ${L.discount_amount>0?`
                  <div class="amount-row">
                    <span class="amount-label"> :</span>
                    <span class="amount-value">-${L.discount_amount} .</span>
                  </div>
                  `:""}
                  <div class="amount-row">
                    <span class="amount-label"> :</span>
                    <span class="amount-value">${L.outstanding_amount} .</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="description-section">
              <h3> </h3>
              <p>${L.service_description}</p>
            </div>

            ${L.notes?`
            <div class="notes-section">
              <h3></h3>
              <p>${L.notes}</p>
            </div>
            `:""}

            <div class="footer">
              <p>        </p>
              <p> : ${new Date().toLocaleDateString("ar-SA",{calendar:"gregory"})}</p>
            </div>
          </div>
        </body>
        </html>
      `,T=window.open("","_blank");T.document.write(R),T.document.close(),T.onload=()=>{setTimeout(()=>{T.print(),setTimeout(()=>{T.close()},1e3)},500)},q.success("       PDF")}catch(R){console.error("Error downloading invoice:",R),q.error("    ")}};return p||g||k?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})}):(m&&console.error("Invoices error:",m),v&&console.error("Payments error:",v),C&&console.error("Payment providers error:",C),m||v?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("h5",{children:"    "}),e.jsx("p",{children:"        "}),e.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"  "})]})})}):e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-credit-card text-warning me-2"})," "]}),e.jsx("p",{className:"text-muted",children:"  "})]})}),e.jsxs("ul",{className:"nav nav-tabs mb-4",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${r==="invoices"?"active":""}`,onClick:()=>a("invoices"),children:[e.jsx("i",{className:"fas fa-file-invoice me-2"}),""]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${r==="payments"?"active":""}`,onClick:()=>a("payments"),children:[e.jsx("i",{className:"fas fa-credit-card me-2"}),""]})})]}),r==="invoices"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:""})}),e.jsx("div",{className:"card-body",children:(_==null?void 0:_.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:(_||[]).map(L=>{const R=J(L.status);return e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:L.invoice_number}),e.jsx("td",{children:$(L.service_type)}),e.jsxs("td",{children:[L.total_amount," ."]}),e.jsxs("td",{children:[L.paid_amount," ."]}),e.jsxs("td",{className:"fw-bold text-danger",children:[L.outstanding_amount," ."]}),e.jsx("td",{children:e.jsx("span",{className:R.className,children:R.text})}),e.jsx("td",{children:O(L.issue_date)}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>N(L),title:" ",children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>H(L),title:" ",children:e.jsx("i",{className:"fas fa-download"})}),L.status==="pending"&&L.outstanding_amount>0&&e.jsxs("button",{className:"btn btn-sm btn-success",onClick:()=>{h(L),i(!0)},title:" ",children:[e.jsx("i",{className:"fas fa-credit-card me-1"}),""]})]})})]},L.id)})})]})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-file-invoice text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:"  "}),e.jsx("p",{className:"text-muted",children:"    "})]})})]}),r==="payments"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:(f==null?void 0:f.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:(f||[]).map(L=>{const R=J(L.status);return e.jsxs("tr",{children:[e.jsxs("td",{className:"font-monospace small",children:[L.payment_id.slice(0,8),"..."]}),e.jsx("td",{children:L.invoice_number}),e.jsxs("td",{className:"fw-bold",children:[L.amount," ."]}),e.jsxs("td",{className:"text-muted",children:[L.fee_amount," ."]}),e.jsxs("td",{children:[L.net_amount," ."]}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-credit-card text-primary me-2"}),L.provider_name]})}),e.jsx("td",{children:e.jsx("span",{className:R.className,children:R.text})}),e.jsx("td",{children:O(L.created_at)})]},L.id)})})]})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-credit-card text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:"  "}),e.jsx("p",{className:"text-muted",children:"    "})]})})]}),l&&d&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:" "}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),h(null),j(""),y("")}})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{children:" "}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{className:"fw-bold",children:d.invoice_number})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{children:$(d.service_type)})]}),e.jsxs("div",{className:"col-6 mt-2",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{children:[d.subtotal," ."]})]}),e.jsxs("div",{className:"col-6 mt-2",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{className:"text-success",children:[d.discount_amount," ."]})]}),e.jsxs("div",{className:"col-12 mt-2",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:"  :"}),e.jsxs("strong",{className:"text-primary",children:[d.outstanding_amount," ."]})]})]})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsxs("div",{className:"input-group",children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"  ",value:u,onChange:L=>j(L.target.value)}),e.jsx("button",{className:"btn btn-outline-secondary",type:"button",onClick:Q,disabled:!u.trim()||M.isLoading,children:M.isLoading?e.jsx(ve,{size:"sm"}):""})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("div",{className:"row mb-3",children:(b||[]).filter(L=>L.name==="qicard").map(L=>e.jsx("div",{className:"col-6 mb-2",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"paymentProvider",id:`provider-${L.id}`,value:L.id,checked:x==L.id,onChange:R=>y(R.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:`provider-${L.id}`,children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-credit-card text-primary me-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:L.display_name}),e.jsxs("small",{className:"text-muted",children:[": ",L.transaction_fee_percentage,"% + ",L.transaction_fee_fixed," ."]})]})]})})]})},L.id))}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-muted mb-2",children:"   ( ):"}),e.jsx("div",{className:"row",children:(b||[]).filter(L=>L.name!=="qicard").map(L=>e.jsx("div",{className:"col-6 mb-2",children:e.jsx("div",{className:"card border-secondary",children:e.jsx("div",{className:"card-body p-2",children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-credit-card text-secondary me-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold text-secondary",children:L.display_name}),e.jsxs("small",{className:"text-muted",children:[": ",L.transaction_fee_percentage,"% + ",L.transaction_fee_fixed," ."]})]})]})})})},L.id))})]})]}),x&&e.jsxs("div",{className:"alert alert-info",children:[e.jsx("h6",{children:" :"}),(()=>{const L=(b||[]).find(z=>z.id==x),R=d.outstanding_amount,T=L?R*L.transaction_fee_percentage/100+L.transaction_fee_fixed:0,V=R+T;return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:" :"}),e.jsxs("span",{children:[R," ."]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:" :"}),e.jsxs("span",{children:[T.toFixed(2)," ."]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between fw-bold",children:[e.jsx("span",{children:":"}),e.jsxs("span",{children:[V.toFixed(2)," ."]})]})]})})()]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(!1),h(null),j(""),y("")},children:""}),e.jsx("button",{type:"button",className:"btn btn-success",onClick:K,disabled:!x||U.isLoading,children:U.isLoading?e.jsx(ve,{size:"sm",color:"light"}):" "})]})]})})}),o&&d&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:e.jsx("div",{className:"modal-dialog modal-lg",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:" "}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{c(!1),h(null)}})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"text-primary",children:" "}),e.jsx("table",{className:"table table-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:" :"}),e.jsx("td",{children:d.invoice_number})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:" :"}),e.jsx("td",{children:$(d.service_type)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:":"}),e.jsx("td",{children:e.jsx("span",{className:J(d.status).className,children:J(d.status).text})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:" :"}),e.jsx("td",{children:O(d.issue_date)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:" :"}),e.jsx("td",{children:O(d.due_date)})]})]})})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("h6",{className:"text-primary",children:" "}),e.jsx("table",{className:"table table-sm",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:" :"}),e.jsxs("td",{className:"text-success fw-bold",children:[d.total_amount," ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:" :"}),e.jsxs("td",{className:"text-info",children:[d.paid_amount," ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:" :"}),e.jsxs("td",{className:"text-danger fw-bold",children:[d.outstanding_amount," ."]})]}),d.discount_amount>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:" :"}),e.jsxs("td",{className:"text-warning",children:["-",d.discount_amount," ."]})]})]})})]})]}),e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h6",{className:"text-primary",children:" "}),e.jsx("p",{className:"text-muted",children:d.service_description})]})}),d.notes&&e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"col-12",children:[e.jsx("h6",{className:"text-primary",children:""}),e.jsx("p",{className:"text-muted",children:d.notes})]})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{c(!1),h(null)},children:""}),e.jsxs("button",{type:"button",className:"btn btn-outline-primary",onClick:()=>H(d),children:[e.jsx("i",{className:"fas fa-download me-1"})," "]}),d.status==="pending"&&d.outstanding_amount>0&&e.jsxs("button",{type:"button",className:"btn btn-success",onClick:()=>{c(!1),i(!0)},children:[e.jsx("i",{className:"fas fa-credit-card me-1"})," "]})]})]})})})]}))},ny=()=>{const{t}=ze(),{user:s}=Qe(),{data:n,isLoading:r}=xe("doctor-appointments",()=>ee.get("/api/bookings/appointments/?limit=5").then(d=>d.data.results),{enabled:!!s}),{data:a,isLoading:l}=xe("doctor-patients",()=>ee.get("/api/bookings/appointments/?status=completed").then(d=>{const h=[],u=new Set;return d.data.results.forEach(j=>{u.has(j.patient)||(u.add(j.patient),h.push({id:j.patient,name:j.patient_name,lastVisit:j.scheduled_date}))}),h.slice(0,5)}),{enabled:!!s}),{data:i,isLoading:o}=xe("doctor-meal-plans",()=>ee.get("/api/meals/meal-plans/?limit=5").then(d=>d.data.results),{enabled:!!s}),c=d=>{const h={pending:"bg-warning",confirmed:"bg-info",completed:"bg-success",cancelled:"bg-danger"},u={pending:" ",confirmed:"",completed:"",cancelled:""};return{className:`badge ${h[d]||"bg-secondary"}`,text:u[d]||d}};return r||l||o?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})}):e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"bg-gradient-success text-white rounded-4 p-4",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsxs("h2",{className:"mb-2",children:[" . ",s==null?void 0:s.first_name," ",s==null?void 0:s.last_name,"!"]}),e.jsx("p",{className:"mb-0 opacity-75",children:"   -     "})]}),e.jsx("div",{className:"col-md-4 text-end",children:e.jsx("div",{className:"bg-white bg-opacity-25 rounded-circle p-3 d-inline-block",children:e.jsx("i",{className:"fas fa-user-md fs-1"})})})]})})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-primary mb-2",children:e.jsx("i",{className:"fas fa-calendar-check fs-2"})}),e.jsx("h4",{className:"text-primary mb-1",children:(n==null?void 0:n.length)||0}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-success mb-2",children:e.jsx("i",{className:"fas fa-users fs-2"})}),e.jsx("h4",{className:"text-success mb-1",children:(a==null?void 0:a.length)||0}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-warning mb-2",children:e.jsx("i",{className:"fas fa-utensils fs-2"})}),e.jsx("h4",{className:"text-warning mb-1",children:(i==null?void 0:i.length)||0}),e.jsx("p",{className:"text-muted mb-0",children:"  "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-info mb-2",children:e.jsx("i",{className:"fas fa-star fs-2"})}),e.jsx("h4",{className:"text-info mb-1",children:"4.8"}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsxs("div",{className:"card-header bg-transparent d-flex justify-content-between align-items-center",children:[e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-check text-primary me-2"})," "]}),e.jsx(tn,{to:"/appointments",className:"btn btn-sm btn-outline-primary",children:" "})]}),e.jsx("div",{className:"card-body",children:(n==null?void 0:n.length)>0?e.jsx("div",{className:"list-group list-group-flush",children:n.map(d=>{const h=c(d.status);return e.jsx("div",{className:"list-group-item px-0 border-0",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"mb-1",children:d.patient_name}),e.jsxs("p",{className:"mb-1 small text-muted",children:[e.jsx("i",{className:"fas fa-clock me-1"}),Bt(d.scheduled_time)]}),e.jsx("p",{className:"mb-0 small",children:d.appointment_type_display})]}),e.jsx("div",{className:"text-end",children:e.jsx("span",{className:h.className,children:h.text})})]})},d.id)})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-calendar-plus text-muted fs-2 mb-3"}),e.jsx("p",{className:"text-muted",children:"   "})]})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsxs("div",{className:"card-header bg-transparent d-flex justify-content-between align-items-center",children:[e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-users text-success me-2"})," "]}),e.jsx(tn,{to:"/patients",className:"btn btn-sm btn-outline-success",children:" "})]}),e.jsx("div",{className:"card-body",children:(a==null?void 0:a.length)>0?e.jsx("div",{className:"list-group list-group-flush",children:a.map(d=>e.jsx("div",{className:"list-group-item px-0 border-0",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"bg-success bg-opacity-10 rounded-circle p-2 me-3",children:e.jsx("i",{className:"fas fa-user text-success"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0",children:d.name}),e.jsxs("small",{className:"text-muted",children:[" : ",Je(d.lastVisit)]})]})]}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary",children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{className:"btn btn-sm btn-outline-success",children:e.jsx("i",{className:"fas fa-utensils"})})]})]})},d.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-users text-muted fs-2 mb-3"}),e.jsx("p",{className:"text-muted",children:"   "}),e.jsx("div",{className:"alert alert-info mt-3",children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:":"}),"        .           ."]})})]})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsxs("div",{className:"card-header bg-transparent d-flex justify-content-between align-items-center",children:[e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-utensils text-warning me-2"}),"  "]}),e.jsx(tn,{to:"/meal-plans",className:"btn btn-sm btn-outline-warning",children:" "})]}),e.jsx("div",{className:"card-body",children:(i==null?void 0:i.length)>0?e.jsx("div",{className:"list-group list-group-flush",children:i.map(d=>e.jsx("div",{className:"list-group-item px-0 border-0",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"mb-1",children:d.title}),e.jsxs("p",{className:"mb-1 small text-muted",children:[e.jsx("i",{className:"fas fa-user me-1"}),d.patient_name]}),e.jsxs("p",{className:"mb-0 small",children:[e.jsx("i",{className:"fas fa-fire me-1"}),d.target_calories,"  "]})]}),e.jsx("span",{className:`badge ${d.is_active?"bg-success":"bg-secondary"}`,children:d.is_active?"":" "})]})},d.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-utensils text-muted fs-2 mb-3"}),e.jsx("p",{className:"text-muted",children:"    "})]})})]})})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-week text-primary me-2"})," "]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"row text-center",children:["","","","","","",""].map((d,h)=>e.jsx("div",{className:"col",children:e.jsxs("div",{className:"border rounded p-3 mb-2",children:[e.jsx("h6",{className:"mb-2",children:d}),e.jsxs("div",{className:"small text-muted",children:[e.jsx("div",{children:"9:00 - 17:00"}),e.jsx("div",{className:"text-success",children:""})]})]})},h))}),e.jsx("div",{className:"text-center mt-3",children:e.jsx(tn,{to:"/availability",className:"btn btn-outline-primary",children:"  "})})]})]})})})]})},ry=()=>{const{t}=ze(),{user:s,updateUser:n}=Qe(),r=ss(),[a,l]=E.useState("profile"),[i,o]=E.useState({weekday:"",start_time:"",end_time:""}),[c,d]=E.useState({Mon:!1,Tue:!1,Wed:!1,Thu:!1,Fri:!1,Sat:!1,Sun:!1}),{data:h,isLoading:u}=xe("doctor-profile",()=>ee.get("/api/auth/doctor-profile/").then(f=>f.data),{enabled:!!s});ce.useEffect(()=>{if(h!=null&&h.available_days){const f=h.available_days.split(","),g={Mon:f.includes("Mon"),Tue:f.includes("Tue"),Wed:f.includes("Wed"),Thu:f.includes("Thu"),Fri:f.includes("Fri"),Sat:f.includes("Sat"),Sun:f.includes("Sun")};d(g)}else d({Mon:!0,Tue:!0,Wed:!0,Thu:!0,Fri:!0,Sat:!1,Sun:!1})},[h]);const j=ct(f=>ee.put("/api/auth/doctor-profile/",f),{onSuccess:f=>{q.success("    "),r.invalidateQueries("doctor-profile"),f.user&&n(f.user)},onError:f=>{var g;if(console.error("Profile update error:",f),(g=f.response)!=null&&g.data){const v=f.response.data;typeof v=="object"?Object.keys(v).forEach(b=>{Array.isArray(v[b])?q.error(`${b}: ${v[b][0]}`):q.error(`${b}: ${v[b]}`)}):q.error("    ")}else q.error("    ")}}),x=ct(f=>ee.post("/api/bookings/availability/",f),{onSuccess:()=>{q.success("    "),o({weekday:"",start_time:"",end_time:""})},onError:f=>{q.error("    ")}}),y=f=>{d(g=>({...g,[f]:!g[f]}))},_=f=>{var k,C,M;f.preventDefault();const g=new FormData(f.target),v=Object.keys(c).filter(U=>c[U]),b={};for(let[U,Q]of g.entries())U!=="available_days"&&(b[U]=Q);if(b.available_days=v.join(","),!((k=b.license_number)!=null&&k.trim())){q.error("  ");return}if(!((C=b.specialization)!=null&&C.trim())){q.error(" ");return}if(!((M=b.education)!=null&&M.trim())){q.error("  ");return}if(v.length===0){q.error("     ");return}if(b.years_of_experience){const U=parseInt(b.years_of_experience);if(isNaN(U)||U<0){q.error("      ");return}b.years_of_experience=U}else b.years_of_experience=0;if(b.consultation_fee){const U=parseFloat(b.consultation_fee);if(isNaN(U)||U<0){q.error("      ");return}b.consultation_fee=U}else b.consultation_fee=0;b.certifications=b.certifications||"",b.bio=b.bio||"",b.available_hours_start&&!b.available_hours_start.includes(":")&&(b.available_hours_start=b.available_hours_start+":00"),b.available_hours_end&&!b.available_hours_end.includes(":")&&(b.available_hours_end=b.available_hours_end+":00"),console.log("Profile form data being sent:",b),console.log("Available days state:",c),console.log("Selected days:",v),j.mutate(b)},p=f=>{f.preventDefault(),x.mutate(i)},m=f=>{o({...i,[f.target.name]:f.target.value})};return u?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})}):e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user-md text-primary me-2"}),"  "]}),e.jsx("p",{className:"text-muted",children:"    "})]})}),e.jsxs("ul",{className:"nav nav-tabs mb-4",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${a==="profile"?"active":""}`,onClick:()=>l("profile"),children:[e.jsx("i",{className:"fas fa-user me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${a==="availability"?"active":""}`,onClick:()=>l("availability"),children:[e.jsx("i",{className:"fas fa-calendar me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${a==="stats"?"active":""}`,onClick:()=>l("stats"),children:[e.jsx("i",{className:"fas fa-chart-bar me-2"}),""]})})]}),a==="profile"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"text",name:"license_number",className:"form-control",defaultValue:(h==null?void 0:h.license_number)||"",required:!0,placeholder:"  "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" *"}),e.jsx("input",{type:"text",name:"specialization",className:"form-control",defaultValue:(h==null?void 0:h.specialization)||"",required:!0,placeholder:":    "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"number",name:"years_of_experience",className:"form-control",defaultValue:(h==null?void 0:h.years_of_experience)||"",min:"0",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  (.) *"}),e.jsx("input",{type:"number",step:"0.01",name:"consultation_fee",className:"form-control",defaultValue:(h==null?void 0:h.consultation_fee)||"",min:"0",required:!0})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("textarea",{name:"education",className:"form-control",rows:"3",defaultValue:(h==null?void 0:h.education)||"",required:!0,placeholder:"   ..."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"certifications",className:"form-control",rows:"3",defaultValue:(h==null?void 0:h.certifications)||"",placeholder:"    ..."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"bio",className:"form-control",rows:"3",defaultValue:(h==null?void 0:h.bio)||"",placeholder:"    ..."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("div",{className:"row",children:[{value:"Mon",label:""},{value:"Tue",label:""},{value:"Wed",label:""},{value:"Thu",label:""},{value:"Fri",label:""},{value:"Sat",label:""},{value:"Sun",label:""}].map(f=>e.jsx("div",{className:"col-6 col-md-4 col-lg-3",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",name:"available_days",value:f.value,id:`day_${f.value}`,checked:c[f.value],onChange:()=>y(f.value)}),e.jsx("label",{className:"form-check-label",htmlFor:`day_${f.value}`,children:f.label})]})},f.value))}),e.jsx("small",{className:"text-muted",children:"      "})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("input",{type:"time",name:"available_hours_start",className:"form-control",defaultValue:(h==null?void 0:h.available_hours_start)||"09:00"})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("input",{type:"time",name:"available_hours_end",className:"form-control",defaultValue:(h==null?void 0:h.available_hours_end)||"17:00"})]})})]})]})]}),e.jsx("div",{className:"text-end",children:e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:j.isLoading,children:j.isLoading?e.jsx(ve,{size:"sm",color:"light"}):" "})})]})})]}),a==="availability"&&e.jsx("div",{children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-plus text-success me-2"}),"  "]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:":"}),'       " "  " "    .       .']}),e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{className:"form-label",children:" *"}),e.jsxs("select",{name:"weekday",className:"form-select",value:i.weekday,onChange:m,required:!0,children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"0",children:""}),e.jsx("option",{value:"1",children:""}),e.jsx("option",{value:"2",children:""}),e.jsx("option",{value:"3",children:""}),e.jsx("option",{value:"4",children:""}),e.jsx("option",{value:"5",children:""}),e.jsx("option",{value:"6",children:""})]})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"time",name:"start_time",className:"form-control",value:i.start_time,onChange:m,required:!0})]}),e.jsxs("div",{className:"col-md-4 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"time",name:"end_time",className:"form-control",value:i.end_time,onChange:m,required:!0})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-8",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-lightbulb me-1"}),"       (:    )"]})}),e.jsx("div",{className:"col-md-4 text-end",children:e.jsx("button",{type:"submit",className:"btn btn-success",disabled:x.isLoading,children:x.isLoading?e.jsx(ve,{size:"sm",color:"light"}):"  "})})]})]})]})]})}),a==="stats"&&e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row text-center",children:[e.jsx("div",{className:"col-6 mb-3",children:e.jsxs("div",{className:"bg-primary bg-opacity-10 rounded-3 p-3",children:[e.jsx("h3",{className:"text-primary mb-1",children:"156"}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-6 mb-3",children:e.jsxs("div",{className:"bg-success bg-opacity-10 rounded-3 p-3",children:[e.jsx("h3",{className:"text-success mb-1",children:"142"}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"bg-warning bg-opacity-10 rounded-3 p-3",children:[e.jsx("h3",{className:"text-warning mb-1",children:"8"}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"bg-info bg-opacity-10 rounded-3 p-3",children:[e.jsx("h3",{className:"text-info mb-1",children:"91%"}),e.jsx("small",{className:"text-muted",children:" "})]})})]})})]})}),e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:""})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("h2",{className:"text-warning mb-1",children:"4.8"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("i",{className:"fas fa-star text-warning"}),e.jsx("i",{className:"fas fa-star text-warning"}),e.jsx("i",{className:"fas fa-star text-warning"}),e.jsx("i",{className:"fas fa-star text-warning"}),e.jsx("i",{className:"fas fa-star text-warning"})]}),e.jsx("p",{className:"text-muted",children:" 47 "})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"5 "}),e.jsx("span",{children:"35"})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar bg-warning",style:{width:"74%"}})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"4 "}),e.jsx("span",{children:"8"})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar bg-warning",style:{width:"17%"}})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"3 "}),e.jsx("span",{children:"3"})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar bg-warning",style:{width:"6%"}})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"2 "}),e.jsx("span",{children:"1"})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar bg-warning",style:{width:"2%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("span",{children:"1 "}),e.jsx("span",{children:"0"})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar bg-warning",style:{width:"0%"}})})]})]})]})}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row text-center",children:[e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"bg-success bg-opacity-10 rounded-3 p-3",children:[e.jsx("h3",{className:"text-success mb-1",children:"23"}),e.jsx("small",{className:"text-muted",children:"  "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"bg-primary bg-opacity-10 rounded-3 p-3",children:[e.jsx("h3",{className:"text-primary mb-1",children:"18"}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"bg-info bg-opacity-10 rounded-3 p-3",children:[e.jsx("h3",{className:"text-info mb-1",children:"67"}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"bg-warning bg-opacity-10 rounded-3 p-3",children:[e.jsx("h3",{className:"text-warning mb-1",children:"78%"}),e.jsx("small",{className:"text-muted",children:" "})]})})]})})]})})]})]})},ay=()=>{var N,H,L,R;const{t}=ze(),{user:s}=Qe(),n=ss(),[r,a]=E.useState(!1),[l,i]=E.useState(null),[o,c]=E.useState(null),[d,h]=E.useState(!1),[u,j]=E.useState(null),[x,y]=E.useState({date:"",weight:"",waist:"",hip:"",fatPercentage:"",autoUpdateProfile:!0}),[_,p]=E.useState([{id:1,date:"15/01/2024",weight:"80 ",waist:"95 ",hip:"105 ",fatPercentage:"22%"},{id:2,date:"08/01/2024",weight:"82 ",waist:"97 ",hip:"107 ",fatPercentage:"24%"},{id:3,date:"01/01/2024",weight:"85 ",waist:"100 ",hip:"110 ",fatPercentage:"26%"}]),{data:m,refetch:f}=xe("doctor-patient-appointments",async()=>{try{console.log("Fetching appointments for doctor:",s==null?void 0:s.id);const T=await ee.get("/api/bookings/appointments/");return console.log("Appointments API Response:",T.data),T.data}catch(T){return console.error("Error fetching appointments:",T),[]}},{enabled:!!s&&(s==null?void 0:s.role)==="doctor",retry:1,staleTime:0,cacheTime:0,refetchOnWindowFocus:!0,refetchInterval:3e4}),{data:g,isLoading:v}=xe(["patient-details",l],async()=>{var T,V;if(!l)return null;try{const z=await ee.get(`/api/auth/doctor-patient-profile/?patient_id=${l}`);return console.log("Patient details API Response:",z.data),console.log("Patient height:",(T=z.data)==null?void 0:T.height),console.log("Patient weight:",(V=z.data)==null?void 0:V.current_weight),z.data}catch(z){return console.error("Error fetching patient details:",z),null}},{enabled:!!l,staleTime:0,cacheTime:0,refetchOnWindowFocus:!0,refetchInterval:3e4}),{data:b,refetch:k}=xe(["patient-measurements",l],async()=>{if(!l)return[];try{const T=await ee.get(`/api/auth/measurements/?patient_id=${l}`);return console.log("Patient measurements API Response:",T.data),Array.isArray(T.data)?T.data:[]}catch(T){return console.error("Error fetching patient measurements:",T),[]}},{enabled:!!l,staleTime:0,cacheTime:0,initialData:[]}),{data:C,isLoading:M,error:U,refetch:Q}=xe("doctor-patients",async()=>{var T,V,z,Z;try{if(console.log("Fetching patients for user:",s==null?void 0:s.id,"role:",s==null?void 0:s.role),console.log("Token exists:",!!localStorage.getItem("token")),!s||s.role!=="doctor")throw new Error("User not authenticated as doctor");const D=await ee.get("/api/auth/patients/");return console.log("API Response:",D),D.data}catch(D){throw console.error("API Error:",D),console.error("Error response:",(T=D.response)==null?void 0:T.data),console.error("Error status:",(V=D.response)==null?void 0:V.status),((z=D.response)==null?void 0:z.status)===403?(console.error("403 Forbidden - Check user permissions"),q.error("      ")):((Z=D.response)==null?void 0:Z.status)===401?(console.error("401 Unauthorized - Token may be invalid"),q.error("  .     ")):D.code==="NETWORK_ERROR"&&(console.error("Network Error"),q.error("   ")),D}},{enabled:!!s&&(s==null?void 0:s.role)==="doctor"&&!!localStorage.getItem("token"),retry:2,staleTime:0,cacheTime:0,refetchOnWindowFocus:!0,refetchInterval:3e4,onSuccess:T=>{console.log("Patients data received:",T),console.log("Patients count:",(T==null?void 0:T.length)||0)},onError:T=>{console.error("Error fetching patients:",T)}}),K=ce.useMemo(()=>{console.log("Processing patients data..."),console.log("Raw patients data:",C),console.log("Raw patientAppointments data:",m);const T=Array.isArray(C)?C:(C==null?void 0:C.results)||[];if(console.log("Patients array:",T),console.log("Patients array length:",T.length),!T||T.length===0)return console.log("No patients found"),[];const V=T.map(z=>{const Z=(m==null?void 0:m.results)||m||[];console.log(`Processing patient ${z.id} (${z.first_name} ${z.last_name})`),console.log("Available appointments:",Z);const D=Z.filter(ie=>ie.patient===z.id);console.log(`Appointments for patient ${z.id}:`,D);const X=D.sort((ie,ue)=>new Date(ue.scheduled_date)-new Date(ie.scheduled_date))[0],te={...z,last_appointment:(X==null?void 0:X.scheduled_date)||null,last_appointment_time:(X==null?void 0:X.scheduled_time)||null,consultation_fee:(X==null?void 0:X.consultation_fee)||0,total_appointments:D.length};return console.log("Processed patient:",te),te});return console.log("Final processed patients:",V),V},[C,m]);E.useEffect(()=>{s&&s.role==="doctor"&&(console.log("Component mounted, forcing data refresh..."),Q(),f(),n.invalidateQueries("doctor-patients"),n.invalidateQueries("doctor-patient-appointments"))},[s,Q,f,n]),E.useEffect(()=>{const T=()=>{s&&s.role==="doctor"&&(console.log("Window focused, refreshing data..."),Q(),f(),n.invalidateQueries("doctor-patients"),n.invalidateQueries("doctor-patient-appointments"))};return window.addEventListener("focus",T),()=>window.removeEventListener("focus",T)},[s,Q,f,n]),console.log("Modal Debug:",{showPatientModal:r,selectedPatient:l});const J=T=>{j(T),y({date:T.date,weight:T.weight,waist:T.waist,hip:T.hip,fatPercentage:T.fatPercentage,autoUpdateProfile:!0}),h(!0)},O=async T=>{T.preventDefault();try{if(u)p(V=>V.map(z=>z.id===u.id?{...z,...x}:z)),q.success("   ");else{const V={weight:parseFloat(x.weight),waist_circumference:x.waist?parseFloat(x.waist):null,hip_circumference:x.hip?parseFloat(x.hip):null,body_fat_percentage:x.fatPercentage?parseFloat(x.fatPercentage):null,measured_at:x.date,auto_update_profile:x.autoUpdateProfile},Z={id:(await ee.post("/api/auth/measurements/",{...V,patient_id:l})).data.id,date:x.date,weight:`${x.weight} `,waist:x.waist?`${x.waist} `:"",hip:x.hip?`${x.hip} `:"",fatPercentage:x.fatPercentage?`${x.fatPercentage}%`:""};p(D=>[Z,...D]),k(),q.success("   ")}h(!1),j(null),y({date:"",weight:"",waist:"",hip:"",fatPercentage:"",autoUpdateProfile:!0})}catch(V){console.error("Error saving measurement:",V),q.error("   ")}},$=T=>{const{name:V,value:z,type:Z,checked:D}=T.target;y(X=>({...X,[V]:Z==="checkbox"?D:z}))};return M?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})}):e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-users text-success me-2"}),""]}),e.jsx("p",{className:"text-muted",children:"  "})]})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[e.jsxs("h5",{className:"mb-0",children:["  (",(K==null?void 0:K.length)||0,")"]}),e.jsxs("div",{children:[e.jsxs("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:async()=>{try{console.log("Manual refresh triggered..."),await Promise.all([Q(),f()]),n.invalidateQueries("doctor-patients"),n.invalidateQueries("doctor-patient-appointments"),q.success("   ")}catch(T){console.error("Error refreshing data:",T),q.error("   ")}},disabled:M,children:[e.jsx("i",{className:"fas fa-refresh me-1"}),""]}),e.jsxs("button",{className:"btn btn-sm btn-success",onClick:async()=>{try{console.log("Force refresh triggered..."),n.clear(),await Promise.all([Q(),f()]),q.success("    ")}catch(T){console.error("Error force refreshing data:",T),q.error("    ")}},disabled:M,children:[e.jsx("i",{className:"fas fa-sync-alt me-1"})," "]})]})]}),e.jsxs("div",{className:"card-body",children:[U&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsxs("h6",{children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"   "]}),e.jsx("p",{className:"mb-2",children:((N=U.response)==null?void 0:N.status)===403?"      ":((H=U.response)==null?void 0:H.status)===401?"  .     ":U.message||"   "}),e.jsxs("div",{className:"small",children:[e.jsx("strong",{children:" :"}),e.jsx("br",{}),e.jsxs("code",{children:["Status: ",((L=U.response)==null?void 0:L.status)||" "]}),e.jsx("br",{}),e.jsx("code",{children:"URL: /api/auth/patients/"}),e.jsx("br",{}),e.jsxs("code",{children:["User Role: ",(s==null?void 0:s.role)||" "]}),e.jsx("br",{}),e.jsxs("code",{children:["User ID: ",(s==null?void 0:s.id)||" "]}),e.jsx("br",{}),e.jsxs("code",{children:["Token Exists: ",localStorage.getItem("token")?"":""]})]}),e.jsxs("button",{className:"btn btn-sm btn-outline-danger mt-2",onClick:()=>{Q(),f(),n.invalidateQueries("doctor-patients"),n.invalidateQueries("doctor-patient-appointments")},children:[e.jsx("i",{className:"fas fa-redo me-1"})," "]})]}),(K==null?void 0:K.length)>0?e.jsx("div",{children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:K.map(T=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"bg-success bg-opacity-10 rounded-circle p-2 me-3",children:e.jsx("i",{className:"fas fa-user text-success"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"fw-bold",children:[T.first_name," ",T.last_name]}),e.jsx("small",{className:"text-muted",children:T.email})]})]})}),e.jsx("td",{children:e.jsx("span",{className:"text-muted",children:Je(T.last_appointment)})}),e.jsx("td",{children:e.jsx("span",{className:"text-muted",children:Bt(T.last_appointment_time)})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:T.total_appointments||0})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-success",children:" "})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{console.log("Opening modal for patient:",T.id),i(T.id),a(!0),console.log("Modal state:",{selectedPatient:T.id,showModal:!0})},title:"  ",children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{className:"btn btn-sm btn-outline-success",title:"  ",children:e.jsx("i",{className:"fas fa-utensils"})}),e.jsx("button",{className:"btn btn-sm btn-outline-info",title:" ",children:e.jsx("i",{className:"fas fa-calendar-plus"})})]})})]},T.id))})]})})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-users text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:"  "}),e.jsx("p",{className:"text-muted",children:M?" ...":"      "}),e.jsx("div",{className:"alert alert-info mt-3",children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:"  :"}),"         .                ."]})}),e.jsx("div",{className:"alert alert-success mt-2",children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-check-circle me-2"}),e.jsx("strong",{children:" :"}),e.jsxs("ol",{className:"mb-0 mt-2",children:[e.jsx("li",{children:"     "}),e.jsx("li",{children:"   ()   "}),e.jsx("li",{children:"   "}),e.jsx("li",{children:"     "})]})]})}),e.jsx("div",{className:"alert alert-warning mt-2",children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),e.jsx("strong",{children:" :"}),"      Django Admin               ."]})}),e.jsx("div",{className:"alert alert-info mt-2",children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:" :"}),e.jsx("br",{})," : ",s==null?void 0:s.first_name," ",s==null?void 0:s.last_name," (ID: ",s==null?void 0:s.id,")",e.jsx("br",{}),"  : ",(K==null?void 0:K.length)||0,e.jsx("br",{})," : ",M?" ...":""]})}),!M&&!U&&e.jsx("div",{className:"mt-3",children:e.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:async()=>{try{await Promise.all([Q(),f()]),n.invalidateQueries("doctor-patients"),n.invalidateQueries("doctor-patient-appointments"),q.success("  ")}catch(T){console.error("Error refreshing data:",T),q.error("   ")}},children:[e.jsx("i",{className:"fas fa-refresh me-1"})," "]})}),!M&&!U&&e.jsxs("div",{className:"mt-3 p-3 bg-light rounded",children:[e.jsx("h6",{className:"text-muted",children:" :"}),e.jsxs("p",{className:"text-muted small mb-0",children:[e.jsx("strong",{children:":"})," ",s==null?void 0:s.first_name," ",s==null?void 0:s.last_name,e.jsx("br",{}),e.jsx("strong",{children:":"})," ",(s==null?void 0:s.role)==="doctor"?"":s==null?void 0:s.role,e.jsx("br",{}),e.jsx("strong",{children:":"})," ",((R=s==null?void 0:s.doctor_profile)==null?void 0:R.specialization)||" ",e.jsx("br",{}),e.jsx("strong",{children:" :"})," ",s==null?void 0:s.email]})]})]})]})]})})}),r&&l&&(()=>{const T=K.find(Z=>Z.id===l),z=((m==null?void 0:m.results)||m||[]).filter(Z=>Z.patient===l);return e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1050},children:e.jsx("div",{className:"modal-dialog modal-xl",onClick:Z=>Z.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-user text-success me-2"})," "]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{console.log("Closing modal"),a(!1),i(null)}})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"alert alert-success",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("h6",{className:"mb-1",children:[e.jsx("i",{className:"fas fa-user me-2"})," : ",T==null?void 0:T.first_name," ",T==null?void 0:T.last_name]}),e.jsxs("small",{children:[" : ",Je(T==null?void 0:T.last_appointment),"  ",Bt(T==null?void 0:T.last_appointment_time)]})]}),e.jsxs("span",{className:"badge bg-primary",children:[(T==null?void 0:T.total_appointments)||0," "]})]})}),e.jsxs("ul",{className:"nav nav-tabs mb-4",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:"nav-link active",onClick:()=>{},children:[e.jsx("i",{className:"fas fa-user me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:"nav-link",onClick:()=>{},children:[e.jsx("i",{className:"fas fa-calendar-check me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:"nav-link",onClick:()=>{},children:[e.jsx("i",{className:"fas fa-weight me-2"}),""]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user text-primary me-2"}),"  "]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{n.invalidateQueries(["patient-details",l]),q.success("  ")},children:[e.jsx("i",{className:"fas fa-refresh me-1"}),""]}),e.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>{window.location.href=`/doctor/patient/${T==null?void 0:T.id}`},style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white",fontWeight:"bold"},children:[e.jsx("i",{className:"fas fa-edit me-1"}),""]})]})]}),e.jsx("div",{className:"card-body",children:v?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(ve,{}),e.jsx("p",{className:"text-muted mt-2",children:"   ..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{className:"fw-bold",children:[T==null?void 0:T.first_name," ",T==null?void 0:T.last_name]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{className:"fw-bold text-primary",children:(T==null?void 0:T.total_appointments)||0})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsx("div",{children:(g==null?void 0:g.gender)==="male"?"":(g==null?void 0:g.gender)==="female"?"":" "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsx("div",{children:g!=null&&g.height?`${g.height} `:" "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{className:"fw-bold text-success",children:g!=null&&g.current_weight?`${g.current_weight} `:" "})]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-top",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsx("div",{className:"fw-bold",children:(g==null?void 0:g.goal)==="lose_weight"?" ":(g==null?void 0:g.goal)==="gain_weight"?" ":(g==null?void 0:g.goal)==="maintain_weight"?"  ":(g==null?void 0:g.goal)==="build_muscle"?" ":(g==null?void 0:g.goal)==="improve_health"?"  ":" "})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{children:(g==null?void 0:g.medical_conditions)||" "})]})]})})]})})]}),e.jsxs("div",{className:"card mt-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calendar-check text-primary me-2"})," "]})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:z.length>0?z.map(Z=>e.jsxs("tr",{children:[e.jsx("td",{children:Je(Z.scheduled_date)}),e.jsx("td",{children:Bt(Z.scheduled_time)}),e.jsx("td",{children:e.jsx("span",{className:`badge ${Z.status==="completed"?"bg-success":Z.status==="pending"?"bg-warning":Z.status==="cancelled"?"bg-danger":"bg-info"}`,children:Z.status==="completed"?"":Z.status==="pending"?" ":Z.status==="cancelled"?"":Z.status})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-sm btn-outline-primary",children:e.jsx("i",{className:"fas fa-eye"})})})]},Z.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center text-muted",children:"  "})})})]})})})]}),e.jsxs("div",{className:"card mt-4",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-weight text-primary me-2"})," "]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("h5",{className:"text-primary",children:""}),e.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>J({date:"15/01/2024",weight:"80",waist:"95",hip:"105",fatPercentage:"22"}),children:e.jsx("i",{className:"fas fa-edit"})})]}),e.jsx("div",{className:"display-6 text-success",children:"80"}),e.jsx("small",{className:"text-muted",children:""}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"badge bg-info",children:" : 15/01/2024"})})]})})}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"card bg-light",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("h5",{className:"text-primary",children:"  "}),e.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>J({date:"15/01/2024",weight:"80",waist:"95",hip:"105",fatPercentage:"22"}),children:e.jsx("i",{className:"fas fa-edit"})})]}),e.jsx("div",{className:"display-6 text-warning",children:"26.1"}),e.jsx("small",{className:"text-muted",children:"BMI"}),e.jsx("div",{className:"mt-2",children:e.jsx("span",{className:"badge bg-warning",children:" "})})]})})})]}),e.jsxs("div",{className:"row mt-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("h6",{className:"text-primary",children:" "}),e.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>J({date:"15/01/2024",weight:"80",waist:"95",hip:"105",fatPercentage:"22"}),children:e.jsx("i",{className:"fas fa-edit"})})]}),e.jsx("div",{className:"h4 text-success",children:"95"}),e.jsx("small",{className:"text-muted",children:""})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("h6",{className:"text-primary",children:" "}),e.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>J({date:"15/01/2024",weight:"80",waist:"95",hip:"105",fatPercentage:"22"}),children:e.jsx("i",{className:"fas fa-edit"})})]}),e.jsx("div",{className:"h4 text-info",children:"105"}),e.jsx("small",{className:"text-muted",children:""})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[e.jsx("h6",{className:"text-primary",children:" "}),e.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>J({date:"15/01/2024",weight:"80",waist:"95",hip:"105",fatPercentage:"22"}),children:e.jsx("i",{className:"fas fa-edit"})})]}),e.jsx("div",{className:"h4 text-warning",children:"22%"}),e.jsx("small",{className:"text-muted",children:" "})]})})})]})]})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{console.log("Closing modal from footer button"),a(!1),i(null)},children:""})})]})})})})(),d&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:1060},children:e.jsx("div",{className:"modal-dialog modal-lg",onClick:T=>T.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-weight text-primary me-2"}),u?" ":"  "]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>h(!1)})]}),e.jsxs("form",{onSubmit:O,children:[e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" *"}),e.jsx("input",{type:"date",className:"form-control",name:"date",value:x.date,onChange:$,required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" () *"}),e.jsx("input",{type:"number",className:"form-control",name:"weight",value:x.weight,onChange:$,step:"0.1",min:"0",required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",className:"form-control",name:"waist",value:x.waist,onChange:$,step:"0.1",min:"0"})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",className:"form-control",name:"hip",value:x.hip,onChange:$,step:"0.1",min:"0"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"  (%)"}),e.jsx("input",{type:"number",className:"form-control",name:"fatPercentage",value:x.fatPercentage,onChange:$,step:"0.1",min:"0",max:"100"})]})]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",name:"autoUpdateProfile",id:"autoUpdateProfile",checked:x.autoUpdateProfile,onChange:$}),e.jsxs("label",{className:"form-check-label",htmlFor:"autoUpdateProfile",children:[e.jsx("i",{className:"fas fa-sync-alt me-2 text-primary"}),"     "]}),e.jsx("small",{className:"form-text text-muted d-block",children:"           "})]})})})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"":""})]})]})]})})})]})},ly=({patientProfile:t,onNutritionCalculated:s})=>{const[n,r]=E.useState({bmr:0,tdee:0,targetCalories:0,protein:0,carbs:0,fat:0,fiber:0,water:0}),a=(j,x,y,_)=>{if(!j||!x||!y)return 0;let p;return _==="male"?p=10*j+6.25*x-5*y+5:p=10*j+6.25*x-5*y-161,Math.round(p)},l=(j,x)=>{const _={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9}[x]||1.55;return Math.round(j*_)},i=(j,x)=>Math.round(j),o=(j,x)=>{if(!j)return 0;const _={lose_weight:2.2,maintain_weight:1.6,gain_weight:1.8,build_muscle:2,improve_health:1.8}[x]||1.6;return Math.round(j*_)},c=(j,x)=>{if(!j)return 0;const _={lose_weight:.25,maintain_weight:.3,gain_weight:.35,build_muscle:.25,improve_health:.3}[x]||.3,p=j*_;return Math.round(p/9)},d=(j,x,y)=>{if(!j||!x||!y)return 0;const _=x*4,p=y*9,m=j-_-p;return Math.round(m/4)},h=j=>j?Math.round(j/1e3*14):0,u=j=>j?Math.round(j*35):0;return E.useEffect(()=>{var J,O;if(!t)return;const{current_weight:j,height:x,goal:y,activity_level:_}=t,p=((J=t.user)==null?void 0:J.age)||t.age||30,m=t.gender||"male";let f=p;if((O=t.user)!=null&&O.date_of_birth){const $=new Date(t.user.date_of_birth);f=new Date().getFullYear()-$.getFullYear()}const g=a(j,x,f,m),v=l(g,_),b=i(v),k=o(j,y),C=c(b,y),M=d(b,k,C),U=h(b),Q=u(j),K={bmr:g,tdee:v,targetCalories:b,protein:k,carbs:M,fat:C,fiber:U,water:Q};r(K),s&&s(K)},[t]),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-calculator text-primary me-2"}),"  "]})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"   (BMR)"}),e.jsxs("div",{className:"form-control-plaintext bg-light p-2 rounded",children:[n.bmr,"  /"]}),e.jsx("small",{className:"text-muted",children:"   "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:"   (TDEE)"}),e.jsxs("div",{className:"form-control-plaintext bg-light p-2 rounded",children:[n.tdee,"  /"]}),e.jsx("small",{className:"text-muted",children:"    "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-success",children:"  "}),e.jsxs("div",{className:"form-control-plaintext bg-success bg-opacity-10 p-2 rounded border border-success",children:[n.targetCalories,"  /"]}),e.jsx("small",{className:"text-muted",children:"      "})]})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-primary",children:""}),e.jsxs("div",{className:"form-control-plaintext bg-primary bg-opacity-10 p-2 rounded border border-primary",children:[n.protein," /"]}),e.jsx("small",{className:"text-muted",children:" "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-warning",children:""}),e.jsxs("div",{className:"form-control-plaintext bg-warning bg-opacity-10 p-2 rounded border border-warning",children:[n.carbs," /"]}),e.jsx("small",{className:"text-muted",children:" "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-danger",children:""}),e.jsxs("div",{className:"form-control-plaintext bg-danger bg-opacity-10 p-2 rounded border border-danger",children:[n.fat," /"]}),e.jsx("small",{className:"text-muted",children:" "})]})]})]}),e.jsxs("div",{className:"row mt-3",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-info",children:""}),e.jsxs("div",{className:"form-control-plaintext bg-info bg-opacity-10 p-2 rounded border border-info",children:[n.fiber," /"]}),e.jsx("small",{className:"text-muted",children:"  "})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label fw-bold text-info",children:""}),e.jsxs("div",{className:"form-control-plaintext bg-info bg-opacity-10 p-2 rounded border border-info",children:[n.water," /"]}),e.jsx("small",{className:"text-muted",children:"  "})]})})]}),e.jsxs("div",{className:"alert alert-info mt-3",children:[e.jsxs("h6",{className:"alert-heading",children:[e.jsx("i",{className:"fas fa-info-circle me-2"})," :"]}),e.jsxs("ul",{className:"mb-0",children:[e.jsx("li",{children:"      "}),e.jsx("li",{children:"       "}),e.jsx("li",{children:"      "}),e.jsx("li",{children:"    3-5  "})]})]})]})]})},iy=({patientProfile:t,nutritionData:s,onDietPlanSelected:n})=>{const[r,a]=E.useState(null),[l,i]=E.useState(null),[o,c]=E.useState(!1),[d,h]=E.useState(!1),[u,j]=E.useState(null),x={keto:{id:"keto",name:"  ",description:"       ",icon:"",color:"success",macroDistribution:{carbs:5,protein:20,fat:75},dailyMeals:{breakfast:["   (2 )"," ( )","  (2 )"," "],lunch:["    ","   (150 )","  ","  (30 )"],dinner:["   (200 )"," "," "," "],snacks:[" (15 )","   (30 )"," (10 )"]},allowedFoods:["  "," ","",""," "," "," ","  "],restrictedFoods:[" ","  ",""," "," "],benefits:["  ","  ","  "," "],considerations:["   2-4 ","    ","   ","  "]},balanced:{id:"balanced",name:" ",description:"       ",icon:"",color:"primary",macroDistribution:{carbs:50,protein:25,fat:25},dailyMeals:{breakfast:["   ()"," ( )"," (10 )"," ( )"],lunch:["  ()","  (150 )"," "," "],dinner:["  (150 )","  "," "," "],snacks:[" ()","   ()","   (30 )"]},allowedFoods:["   "," ","   "," ","   "," "],restrictedFoods:[" "," "," "," "],benefits:["  "," ","  ","  "],considerations:["  ","  "," ","   "]},integrated:{id:"integrated",name:"  ",description:"        ",icon:"",color:"info",macroDistribution:{carbs:45,protein:30,fat:25},dailyMeals:{breakfast:["   ()"," ( )"," (10 )"," ( )"],lunch:["  ()","  (150 )"," "," "],dinner:["  (150 )","  "," "," "],snacks:[" ()","   ()","   (30 )"]},allowedFoods:["   "," ","   "," ","   "," "],restrictedFoods:[" "," "," "," "],benefits:["   ","  "," "," "],considerations:["  ","  ","  "," "]},weightGain:{id:"weightGain",name:"  ",description:"       ",icon:"",color:"warning",macroDistribution:{carbs:45,protein:25,fat:30},dailyMeals:{breakfast:["  (3 )","  (2 )"," ( )","   ()"],lunch:["  ( )","  (200 )"," ","   "],dinner:["  ( )","  (200 )"," "," "],snacks:["  ()","    "," ","  "]},allowedFoods:["  ","  "," "," "," ","   "],restrictedFoods:["  "," ","  ","  "],benefits:["  "," ","  "," "],considerations:["   ","  ","  ","   "]},pregnancy:{id:"pregnancy",name:" ",description:"         ",icon:"",color:"info",macroDistribution:{carbs:50,protein:20,fat:30},dailyMeals:{breakfast:["   ()"," ()"," (10 )","  "],lunch:["  ()","  (150 )"," "," "],dinner:["  (150 )","  "," "," "],snacks:[" ()","   (30 )","   ()"," ()"]},allowedFoods:["   "," "," "," "," "," "],restrictedFoods:["  "," "," "," ",""],benefits:["  ","  "," ","  "],considerations:["  ","  ","  ","  "]},breastfeeding:{id:"breastfeeding",name:" ",description:"        ",icon:"",color:"info",macroDistribution:{carbs:50,protein:20,fat:30},dailyMeals:{breakfast:["   ( )"," ()"," (15 )"," ( )"],lunch:["  ( )","  (200 )"," "," "],dinner:["  (200 )","  "," "," "],snacks:[" ()","   (40 )","   ( )"," ( )"]},allowedFoods:["  "," "," "," "," "," "],restrictedFoods:[" ","  ","  ",""],benefits:["  "," ","  "," "],considerations:["  500-600 ","  ","   ","  "]},diabetes:{id:"diabetes",name:" ",description:"        ",icon:"",color:"danger",macroDistribution:{carbs:40,protein:30,fat:30},dailyMeals:{breakfast:["    "," ( )"," (10 )","  "],lunch:["  ( )","  (150 )"," "," "],dinner:["  (150 )"," "," "," "],snacks:[" ( )","   (30 )"," ( )"]},allowedFoods:["  ","   "," ","  "," ","   "],restrictedFoods:[" "," ","  "," "," "],benefits:["   ","  "," ","  "],considerations:["  "," ","  ","  "]},weightMaintenance:{id:"weightMaintenance",name:"  ",description:"        ",icon:"",color:"secondary",macroDistribution:{carbs:45,protein:25,fat:30},dailyMeals:{breakfast:["   ()"," ( )"," (10 )"," ( )"],lunch:["  ()","  (150 )"," "," "],dinner:["  (150 )","  "," "," "],snacks:[" ()","   (30 )","   ()"]},allowedFoods:["   "," ","   "," ","   "," "],restrictedFoods:["  "," "," "," "],benefits:["  "," ","  "," "],considerations:["  ","   "," ","   "]},high_protein:{id:"high_protein",name:"   ",description:"        ",icon:"",color:"primary",macroDistribution:{carbs:30,protein:40,fat:30},dailyMeals:{breakfast:["  (3 )","   (100 )","  ( )","   (30 )"],lunch:["   (150 )","  (100 )"," "," "],dinner:["   (120 )","  "," ","   (20 )"],snacks:["  (150 )"," (15 )"," ","   (30 )"]},allowedFoods:["   "," ","  "," "," "," "],restrictedFoods:["  "," "," "," "],benefits:[" "," ","  "," "],considerations:["  ","   ","  ","  "]}},y=p=>{if(!s||!p)return null;let m=u||s.targetCalories;const{macroDistribution:f}=p;m=Math.max(m,1200);const g=Math.round(m*f.carbs/100/4),v=Math.round(m*f.protein/100/4),b=Math.round(m*f.fat/100/9);return{carbs:g,protein:v,fat:b,calories:m,originalCalories:s.targetCalories,calorieReduction:0}};E.useEffect(()=>{j(null),a(null),i(null)},[s]),E.useEffect(()=>{if(r){const p=y(x[r]);i(p),n&&n({plan:x[r],customizedMacros:p})}},[r,s,u]);const _=p=>{if(c(!0),a(p),h(!1),s){let m=s.targetCalories;m=Math.max(m,1200),j(m)}setTimeout(()=>{c(!1)},300)};return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header",children:[e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-utensils text-primary me-2"}),"  "]}),e.jsx("p",{className:"text-muted mb-0",children:"    "})]}),e.jsxs("div",{className:"card-body",children:[!s&&e.jsxs("div",{className:"alert alert-warning mb-4",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),e.jsx("strong",{children:":"}),"       .            ."]}),e.jsx("div",{className:"row mb-4",children:Object.values(x).map(p=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:e.jsx("div",{className:`card h-100 cursor-pointer border-${r===p.id?p.color:"light"}`,onClick:()=>_(p.id),style:{cursor:"pointer",borderWidth:r===p.id?"2px":"1px"},children:e.jsxs("div",{className:"card-body text-center",children:[e.jsx("div",{className:"fs-1 mb-2",children:p.icon}),e.jsx("h6",{className:`text-${p.color} mb-2`,children:p.name}),e.jsx("p",{className:"text-muted small mb-3",children:p.description}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsxs("span",{className:`badge bg-${p.color} bg-opacity-10 text-${p.color}`,children:[p.macroDistribution.carbs,"% "]})})]})})},p.id))}),o&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mt-2",children:"    ..."})]}),r&&l&&!o&&e.jsx("div",{className:"border rounded p-4 bg-light",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("h6",{className:"text-primary mb-0",children:[x[r].icon," ",x[r].name]}),e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>h(!d),children:d?" ":"  "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-success",children:"   :"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"text-center p-2 bg-primary bg-opacity-10 rounded",children:[e.jsxs("div",{className:"fw-bold text-primary",children:[l.carbs," "]}),e.jsx("small",{className:"text-muted",children:""})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"text-center p-2 bg-warning bg-opacity-10 rounded",children:[e.jsxs("div",{className:"fw-bold text-warning",children:[l.protein," "]}),e.jsx("small",{className:"text-muted",children:""})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"text-center p-2 bg-danger bg-opacity-10 rounded",children:[e.jsxs("div",{className:"fw-bold text-danger",children:[l.fat," "]}),e.jsx("small",{className:"text-muted",children:""})]})})]}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsxs("span",{className:"badge bg-success",children:[" : ",l.calories," "]}),e.jsx("div",{className:"mt-2",children:e.jsxs("small",{className:"text-info",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"      "]})})]})]}),d&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"text-info",children:"  :"}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-primary",children:":"}),e.jsx("ul",{className:"small mb-0",children:x[r].dailyMeals.breakfast.map((p,m)=>e.jsx("li",{children:p},m))})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-success",children:":"}),e.jsx("ul",{className:"small mb-0",children:x[r].dailyMeals.lunch.map((p,m)=>e.jsx("li",{children:p},m))})]})]}),e.jsxs("div",{className:"col-6",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-warning",children:":"}),e.jsx("ul",{className:"small mb-0",children:x[r].dailyMeals.dinner.map((p,m)=>e.jsx("li",{children:p},m))})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"text-info",children:" :"}),e.jsx("ul",{className:"small mb-0",children:x[r].dailyMeals.snacks.map((p,m)=>e.jsx("li",{children:p},m))})]})]})]})]})]}),e.jsxs("div",{className:"col-md-6",children:[d&&e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("h6",{className:"text-success",children:" :"}),e.jsx("ul",{className:"small",children:x[r].allowedFoods.map((p,m)=>e.jsx("li",{className:"text-success",children:p},m))})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("h6",{className:"text-danger",children:" :"}),e.jsx("ul",{className:"small",children:x[r].restrictedFoods.map((p,m)=>e.jsx("li",{className:"text-danger",children:p},m))})]})]}),d&&e.jsxs("div",{className:"row mt-3",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("h6",{className:"text-primary",children:":"}),e.jsx("ul",{className:"small",children:x[r].benefits.map((p,m)=>e.jsx("li",{className:"text-primary",children:p},m))})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("h6",{className:"text-warning",children:" :"}),e.jsx("ul",{className:"small",children:x[r].considerations.map((p,m)=>e.jsx("li",{className:"text-warning",children:p},m))})]})]})]})]})})]})]})},oy=({patientId:t})=>{const[s,n]=E.useState(new Date().toISOString().split("T")[0]),{data:r,isLoading:a,error:l}=xe(["patient-meal-selections",t,s],()=>ee.get(`/api/meals/patients/${t}/selected-meals/?date=${s}`).then(o=>{console.log("Patient meal selections API response:",o.data);const c=o.data,d=(c==null?void 0:c.selections)||c||[],h=c==null?void 0:c.required_calories;return console.log(" Doctor - Extracted data:",{selectionsCount:Array.isArray(d)?d.length:0,requiredCalories:h}),{selections:d,required_calories:h}}),{enabled:!!t,refetchInterval:3e4}),i=(r==null?void 0:r.selections)||[];return a?e.jsx(ve,{}):l?e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"    "]}):e.jsxs("div",{className:"patient-meal-selections",children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-shopping-cart me-2"}),"  "]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:" :"}),e.jsx("input",{type:"date",className:"form-control",value:s,onChange:o=>n(o.target.value)})]}),e.jsx("div",{className:"col-md-6",children:e.jsx("div",{className:"d-flex align-items-end h-100",children:e.jsx("div",{className:"alert alert-info mb-0 w-100",children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-info-circle me-1"})," : ",new Date().toLocaleTimeString("ar-SA")]})})})})]})})]})})}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"alert alert-info",children:[e.jsxs("h6",{className:"mb-2",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"  -  "]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:" :"})," ",t]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:" :"})," ",s]}),e.jsxs("p",{className:"mb-1",children:[e.jsx("strong",{children:" :"})," ",i?i.length:" "]}),e.jsxs("p",{className:"mb-0",children:[e.jsx("strong",{children:" :"})," ",a?" ...":""]})]})})}),i&&i.length>0?e.jsx("div",{className:"row",children:i.map((o,c)=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-4",children:e.jsxs("div",{className:"card h-100 border-success",children:[e.jsxs("div",{className:"card-body",children:[e.jsx("h5",{className:"card-title text-primary",children:o.meal_name}),e.jsxs("p",{className:"card-text text-muted small",children:[" : ",new Date(o.selected_at).toLocaleTimeString("ar-SA")]}),(()=>{var d;return console.log(" Doctor - PatientMealSelections - Selection data:",o),console.log(" Doctor - PatientMealSelections - Ingredients:",o.ingredients),console.log(" Doctor - PatientMealSelections - Ingredients length:",((d=o.ingredients)==null?void 0:d.length)||0),console.log(" Doctor - PatientMealSelections - Ingredients type:",typeof o.ingredients),console.log(" Doctor - PatientMealSelections - Ingredients is array:",Array.isArray(o.ingredients)),o.ingredients&&o.ingredients.length>0&&console.log(" Doctor - PatientMealSelections - First ingredient:",o.ingredients[0]),null})(),o.ingredients&&o.ingredients.length>0&&e.jsxs("div",{className:"ingredients-section mb-3",children:[e.jsxs("h6",{className:"text-primary mb-2",children:[e.jsx("i",{className:"fas fa-shopping-basket me-1"}),":"]}),e.jsx("div",{className:"ingredients-list",children:o.ingredients.map((d,h)=>{var u,j;return e.jsxs("div",{className:"ingredient-item d-flex justify-content-between align-items-center mb-1 p-2 bg-light rounded",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("i",{className:"fas fa-circle text-success me-2",style:{fontSize:"0.5rem"}}),e.jsx("span",{className:"fw-bold",children:d.food_name_ar||d.food_name||((u=d.food)==null?void 0:u.name_ar)||((j=d.food)==null?void 0:j.name)||d.name||"  "})]}),e.jsxs("div",{className:"text-muted",children:[e.jsxs("span",{className:"badge bg-primary",children:[d.amount||d.quantity||0,"g"]}),e.jsxs("small",{className:"text-info ms-1",children:[": ",Math.round(d.calories||d.calories_per_100g||0)," | : ",Math.round(d.protein||d.protein_per_100g||0),"g"]}),d.notes&&e.jsxs("small",{className:"text-info ms-1",children:["- ",d.notes]})]})]},h)})})]}),o.nutrition_info&&e.jsxs("div",{className:"nutrition-summary",children:[e.jsxs("h6",{className:"text-success mb-2",children:[e.jsx("i",{className:"fas fa-chart-pie me-1"})," :"]}),e.jsxs("div",{className:"row text-center",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"p-2 bg-primary text-white rounded",children:[e.jsx("div",{className:"fw-bold",children:o.nutrition_info.calories||0}),e.jsx("small",{children:""})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"p-2 bg-success text-white rounded",children:[e.jsxs("div",{className:"fw-bold",children:[o.nutrition_info.protein||0,"g"]}),e.jsx("small",{children:""})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"p-2 bg-info text-white rounded",children:[e.jsxs("div",{className:"fw-bold",children:[o.nutrition_info.carbs||0,"g"]}),e.jsx("small",{children:""})]})})]})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-clock me-1"}),new Date(o.selected_at).toLocaleTimeString("ar-SA")]}),e.jsxs("span",{className:"badge bg-success",children:[e.jsx("i",{className:"fas fa-check me-1"}),""]})]})})]})},c))}):e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-shopping-cart text-muted",style:{fontSize:"4rem"}}),e.jsx("h5",{className:"text-muted mt-3",children:"   "}),e.jsx("p",{className:"text-muted",children:"      "})]})})}),i&&i.length>0&&e.jsx("div",{className:"row mt-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card border-info",children:[e.jsx("div",{className:"card-header bg-info text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-chart-bar me-2"})," "]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row text-center",children:[e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-primary fs-4",children:i.length}),e.jsx("small",{className:"text-muted",children:"  "})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-success fs-4",children:i.filter(o=>o.meal_type==="breakfast").length}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-info fs-4",children:i.filter(o=>o.meal_type==="lunch").length}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-md-3",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"fw-bold text-warning fs-4",children:i.filter(o=>o.meal_type==="dinner").length}),e.jsx("small",{className:"text-muted",children:" "})]})})]})})]})})})]})},cy=({onCalorieSelect:t,selectedGoal:s=null})=>{const n=[{id:"moderate_loss",label:"  ",calories:2250,note:" 500      0.5   ",goalValue:"lose_weight",color:"success"},{id:"fast_loss",label:" ",calories:2e3,note:"   ",goalValue:"lose_weight",color:"warning"},{id:"maintain",label:" ",calories:2750,note:"   ",goalValue:"maintain_weight",color:"info"},{id:"gain",label:"   ",calories:3100,note:"  ",goalValue:"build_muscle",color:"primary"}],r=a=>{t&&t({calories:a.calories,goal:a.goalValue,label:a.label})};return e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-bullseye me-2"}),"  -  "]})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"30%"},children:""}),e.jsx("th",{style:{width:"25%"},className:"text-center",children:" "}),e.jsx("th",{style:{width:"45%"},children:""})]})}),e.jsx("tbody",{children:n.map(a=>{const l=s===a.goalValue;return e.jsxs("tr",{onClick:()=>r(a),className:`${l?"table-active":""} ${t?"cursor-pointer":""}`,style:{cursor:t?"pointer":"default"},children:[e.jsx("td",{children:e.jsx("strong",{className:`text-${a.color}`,children:a.label})}),e.jsx("td",{className:"text-center",children:e.jsxs("span",{className:"badge bg-primary fs-6",children:[a.calories.toLocaleString()," "]})}),e.jsx("td",{children:e.jsx("small",{className:"text-muted",children:a.note})})]},a.id)})})]})}),t&&e.jsx("div",{className:"mt-3",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"      "]})})]})]})},dy=()=>{var Pt,Ws,at,Hs,vs,He,$t,ns,bt,rs,ke,P,A;const{t}=ze(),{user:s}=Qe(),{patientId:n}=Xg(),r=ss(),[a,l]=E.useState("profile"),[i,o]=E.useState(!1),[c,d]=E.useState(null),[h,u]=E.useState(null),[j,x]=E.useState(null),[y,_]=E.useState({gender:"",height:"",current_weight:"",target_weight:"",activity_level:"",goal:"",medical_conditions:"",dietary_restrictions:"",medications:"",daily_calories:""}),[p,m]=E.useState({weight:"",body_fat_percentage:"",muscle_mass:"",waist_circumference:"",hip_circumference:"",chest_circumference:"",arm_circumference:"",blood_pressure_systolic:"",blood_pressure_diastolic:"",blood_sugar:"",activity_level:"",notes:"",auto_update_profile:!0}),[f,g]=E.useState(null),{data:v,isLoading:b}=xe(["patient-profile",n],()=>ee.get(`/api/auth/doctor-patient-profile/?patient_id=${n}`).then(w=>w.data),{enabled:!!n});E.useEffect(()=>{v&&_({gender:v.gender||"",height:v.height||"",current_weight:v.current_weight||"",target_weight:v.target_weight||"",activity_level:v.activity_level||"",goal:v.goal||"",medical_conditions:v.medical_conditions||"",dietary_restrictions:v.dietary_restrictions||"",medications:v.medications||"",daily_calories:v.daily_calories||""})},[v]);const{data:k,isLoading:C}=xe(["patient-measurements",n],()=>ee.get(`/api/auth/measurements/?patient_id=${n}`).then(w=>w.data.results),{enabled:!!n}),{data:M,isLoading:U}=xe(["medical-documents",n],()=>ee.get(`/api/auth/medical-documents/?patient_id=${n}`).then(w=>w.data.results),{enabled:!!n}),Q=ct(w=>ee.put(`/api/auth/doctor-patient-profile/?patient_id=${n}`,w),{onSuccess:()=>{q.success("    "),r.invalidateQueries(["patient-profile",n]),o(!1)},onError:w=>{q.error("    "),console.error("Update profile error:",w)}}),K=ct(w=>(console.log("API call data:",{...w,patient_id:n}),console.log("User token:",localStorage.getItem("token")),console.log("User info:",s),ee.post("/api/auth/measurements/",{...w,patient_id:parseInt(n)})),{onSuccess:(w,I)=>{if(q.success("   "),r.invalidateQueries(["patient-measurements",n]),r.invalidateQueries(["patient-profile",n]),I.weight&&v){const W={...v,current_weight:parseFloat(I.weight)};I.activity_level&&(W.activity_level=I.activity_level),r.setQueryData(["patient-profile",n],W),_(oe=>({...oe,current_weight:parseFloat(I.weight),activity_level:I.activity_level||oe.activity_level}));const re=X(I);re&&u(re)}m({weight:"",body_fat_percentage:"",muscle_mass:"",waist_circumference:"",hip_circumference:"",chest_circumference:"",arm_circumference:"",blood_pressure_systolic:"",blood_pressure_diastolic:"",blood_sugar:"",activity_level:"",notes:""}),u(null)},onError:w=>{var I,W,re,oe,he,ye,_e;console.error("Measurement error:",w),console.error("Error response:",w.response),console.error("Error message:",w.message),console.error("Error status:",(I=w.response)==null?void 0:I.status),console.error("Error data:",(W=w.response)==null?void 0:W.data),((re=w.response)==null?void 0:re.status)===400?q.error("  : "+(((oe=w.response.data)==null?void 0:oe.detail)||"   ")):((he=w.response)==null?void 0:he.status)===401?q.error("    "):((ye=w.response)==null?void 0:ye.status)===500?q.error("  : "+(((_e=w.response.data)==null?void 0:_e.detail)||"   ")):q.error("   : "+(w.message||"  "))}}),J=w=>{if(w.preventDefault(),!p.weight||p.weight===""){q.error(" ");return}if(!n||isNaN(parseInt(n))){q.error("   ");return}const I={...p};Object.keys(I).forEach(W=>{I[W]===""?delete I[W]:["weight","body_fat_percentage","muscle_mass","waist_circumference","hip_circumference","chest_circumference","arm_circumference","blood_pressure_systolic","blood_pressure_diastolic","blood_sugar"].includes(W)&&(I[W]=parseFloat(I[W]),isNaN(I[W])&&delete I[W])}),console.log("Submitting measurement data:",I),console.log("Patient ID:",n),console.log("Final data to send:",{...I,patient_id:n}),console.log("Data types:",{weight:typeof I.weight,patient_id:typeof n,weight_value:I.weight}),K.mutate(I)},O=(w,I,W)=>{if(!w||!I||!W)return null;const re=I/2.54;let oe;W==="male"?oe=50+2.3*(re-60):oe=45.5+2.3*(re-60);const he=oe+.4*(w-oe);return Math.round(he*10)/10},$=w=>{const I={...p,[w.target.name]:w.target.value};if(m(I),w.target.name==="weight"||w.target.name==="activity_level"){const W=X(I);u(W)}if(w.target.name==="weight"&&v){const W=O(parseFloat(w.target.value),v.height,v.gender);g(W)}},N=w=>{_({...y,[w.target.name]:w.target.value})},H=w=>{_({...y,daily_calories:w.calories.toString(),goal:w.goal}),q.info(` : ${w.label} - ${w.calories}  `)},L=w=>{w.preventDefault();const I={...y};I.height=parseFloat(I.height)||0,I.current_weight=parseFloat(I.current_weight)||0,I.target_weight=I.target_weight?parseFloat(I.target_weight):null,I.daily_calories=I.daily_calories?parseInt(I.daily_calories):null,Q.mutate(I)},R=()=>{o(!1),v&&_({gender:v.gender||"",height:v.height||"",current_weight:v.current_weight||"",target_weight:v.target_weight||"",activity_level:v.activity_level||"",goal:v.goal||"",medical_conditions:v.medical_conditions||"",dietary_restrictions:v.dietary_restrictions||"",medications:v.medications||"",daily_calories:v.daily_calories||""})},T=E.useCallback(w=>{d(w),console.log("Nutrition data calculated:",w)},[]),V=E.useCallback(w=>{x(w),console.log("Diet plan selected:",w),q.success(`  ${w.plan.name} `)},[]),z=w=>{var ys,Gt;if(!w)return null;const{current_weight:I,height:W,goal:re,activity_level:oe,gender:he}=w;let _e=((ys=w.user)==null?void 0:ys.age)||30;if((Gt=w.user)!=null&&Gt.date_of_birth){const as=new Date(w.user.date_of_birth);_e=new Date().getFullYear()-as.getFullYear()}let be;he==="male"?be=10*I+6.25*W-5*_e+5:be=10*I+6.25*W-5*_e-161,be=Math.round(be);const F={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9}[oe]||1.55,se=Math.round(be*F),ne=Math.round(se),Y={lose_weight:2.2,maintain_weight:1.6,gain_weight:1.8,build_muscle:2,improve_health:1.8}[re]||1.6,de=Math.round(I*Y),we={lose_weight:.25,maintain_weight:.3,gain_weight:.35,build_muscle:.25,improve_health:.3}[re]||.3,lt=ne*we,it=Math.round(lt/9),Vt=de*4,Vs=it*9,Ks=ne-Vt-Vs,vn=Math.round(Ks/4),js=Math.round(ne/1e3*14),Kt=Math.round(I*35);return{bmr:be,tdee:se,targetCalories:ne,protein:de,carbs:vn,fat:it,fiber:js,water:Kt}};E.useEffect(()=>{if(v&&!c){const w=z(v);d(w)}},[v,c]),E.useEffect(()=>{if(a==="diet-plans"&&v){const w=z(v);d(w)}},[a,v]);const Z=w=>{if(!w)return null;const I=new Date(w),W=new Date;let re=W.getFullYear()-I.getFullYear();const oe=W.getMonth()-I.getMonth();return(oe<0||oe===0&&W.getDate()<I.getDate())&&re--,re},D=(w,I)=>{if(!w)return null;let W;return I==="male"?W=50+2.3*(w/2.54-60):W=45.5+2.3*(w/2.54-60),Math.round(W*10)/10},X=w=>{var Gt,as;if(!v||!w.weight)return null;const{weight:I,activity_level:W}=w,{height:re,goal:oe,gender:he}=v;let _e=((Gt=v.user)==null?void 0:Gt.age)||30;if((as=v.user)!=null&&as.date_of_birth){const na=new Date(v.user.date_of_birth);_e=new Date().getFullYear()-na.getFullYear()}const be=W||v.activity_level||"moderate";let S;he==="male"?S=10*I+6.25*re-5*_e+5:S=10*I+6.25*re-5*_e-161,S=Math.round(S);const se={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9}[be]||1.55,ne=Math.round(S*se),ae=Math.round(ne),de={lose_weight:2.2,maintain_weight:1.6,gain_weight:1.8,build_muscle:2,improve_health:1.8}[oe]||1.6,ge=Math.round(I*de),lt={lose_weight:.25,maintain_weight:.3,gain_weight:.35,build_muscle:.25,improve_health:.3}[oe]||.3,it=ae*lt,Vt=Math.round(it/9),Vs=ge*4,Ks=Vt*9,vn=ae-Vs-Ks,js=Math.round(vn/4),Kt=Math.round(ae/1e3*14),ys=Math.round(I*35);return{bmr:S,tdee:ne,targetCalories:ae,protein:ge,carbs:js,fat:Vt,fiber:Kt,water:ys,weight:I,activityLevel:be}},te=w=>{if(!w)return"--";try{const I=new Date(w),W=I.getDate().toString().padStart(2,"0"),re=(I.getMonth()+1).toString().padStart(2,"0"),oe=I.getFullYear();return`${W}/${re}/${oe}`}catch{return w||"--"}},ie=(w,I)=>{if(!w||!I)return null;const W=I/100;return(w/(W*W)).toFixed(1)},ue=w=>w?w<18.5?{text:"  ",class:"text-info"}:w<25?{text:" ",class:"text-success"}:w<30?{text:"  ",class:"text-warning"}:{text:"",class:"text-danger"}:{text:"--",class:"text-muted"},$e=(w,I,W,re,oe,he=null)=>{if(!w||!I||!W||!re)return null;const ye=he||30;let _e;W==="male"?_e=10*w+6.25*I-5*ye+5:_e=10*w+6.25*I-5*ye-161;const S={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9}[re]||1.55;let F=_e*S;return Math.round(F)};return b||C||U?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})}):e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"d-flex justify-content-between align-items-center",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user text-primary me-2"}),"  - ",(Pt=v==null?void 0:v.user)==null?void 0:Pt.first_name," ",(Ws=v==null?void 0:v.user)==null?void 0:Ws.last_name]}),e.jsx("p",{className:"text-muted",children:"     "})]})})})}),e.jsxs("ul",{className:"nav nav-tabs mb-4",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${a==="profile"?"active":""}`,onClick:()=>l("profile"),children:[e.jsx("i",{className:"fas fa-user me-2"}),"  "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${a==="measurements"?"active":""}`,onClick:()=>l("measurements"),children:[e.jsx("i",{className:"fas fa-weight me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${a==="documents"?"active":""}`,onClick:()=>l("documents"),children:[e.jsx("i",{className:"fas fa-file-medical me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${a==="nutrition"?"active":""}`,onClick:()=>l("nutrition"),children:[e.jsx("i",{className:"fas fa-calculator me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${a==="diet-plans"?"active":""}`,onClick:()=>l("diet-plans"),children:[e.jsx("i",{className:"fas fa-utensils me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${a==="meal-selections"?"active":""}`,onClick:()=>l("meal-selections"),children:[e.jsx("i",{className:"fas fa-shopping-cart me-2"})," "]})})]}),a==="profile"&&e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:" "}),e.jsxs("button",{className:"btn btn-sm btn-danger",onClick:()=>o(!0),style:{backgroundColor:"#dc3545",borderColor:"#dc3545",color:"white",fontWeight:"bold",display:i?"none":"block"},children:[e.jsx("i",{className:"fas fa-edit me-1"}),""]})]}),e.jsx("div",{className:"card-body",children:v?i?e.jsxs("form",{onSubmit:L,children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{className:"fw-bold",children:[(at=v.user)==null?void 0:at.first_name," ",(Hs=v.user)==null?void 0:Hs.last_name]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{className:"fw-bold text-primary",children:[Z((vs=v.user)==null?void 0:vs.date_of_birth)||" "," "]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{className:"fw-bold text-info",children:((He=v.user)==null?void 0:He.phone)||" "})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("label",{className:"form-label",children:""}),e.jsxs("select",{name:"gender",className:"form-control",value:y.gender,onChange:N,children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"male",children:""}),e.jsx("option",{value:"female",children:""})]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("label",{className:"form-label",children:" ()"}),e.jsx("input",{type:"number",name:"height",className:"form-control",value:y.height,onChange:N,min:"100",max:"250"})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",step:"0.1",name:"current_weight",className:"form-control",value:y.current_weight,onChange:N,min:"20",max:"300"})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{className:"fw-bold text-success",children:[D(y.height,y.gender)||"--"," "]}),e.jsx("small",{className:"text-muted",children:"   "})]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12 mb-3",children:e.jsx(cy,{onCalorieSelect:H,selectedGoal:y.goal})})}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("label",{className:"form-label",children:""}),e.jsxs("select",{name:"goal",className:"form-control",value:y.goal,onChange:N,children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"lose_weight",children:" "}),e.jsx("option",{value:"gain_weight",children:" "}),e.jsx("option",{value:"maintain_weight",children:" "}),e.jsx("option",{value:"build_muscle",children:" "}),e.jsx("option",{value:"improve_health",children:" "})]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsxs("select",{name:"activity_level",className:"form-control",value:y.activity_level,onChange:N,children:[e.jsx("option",{value:"",children:"  "}),e.jsx("option",{value:"sedentary",children:" "}),e.jsx("option",{value:"light",children:" "}),e.jsx("option",{value:"moderate",children:" "}),e.jsx("option",{value:"active",children:" "}),e.jsx("option",{value:"very_active",children:"  "})]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"   "}),e.jsx("input",{type:"number",name:"daily_calories",className:"form-control",value:y.daily_calories,onChange:N,min:"800",max:"5000",placeholder:"   "}),e.jsxs("small",{className:"text-muted",children:[" : ",$e(y.current_weight,y.height,y.gender,y.activity_level,y.goal,Z(($t=v.user)==null?void 0:$t.date_of_birth))||"--","  "]})]})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-3",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:R,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:Q.isLoading,children:Q.isLoading?" ...":" "})]})]}):e.jsx("div",{children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{className:"fw-bold",children:[(ns=v.user)==null?void 0:ns.first_name," ",(bt=v.user)==null?void 0:bt.last_name]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{className:"fw-bold text-primary",children:[Z((rs=v.user)==null?void 0:rs.date_of_birth)||" "," "]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{className:"fw-bold text-info",children:((ke=v.user)==null?void 0:ke.phone)||" "})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsx("div",{children:v.gender==="male"?"":""})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{children:[v.height," "]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{className:"fw-bold",children:[v.current_weight," "]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{className:"fw-bold text-success",children:[D(v.height,v.gender)||"--"," "]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:"  :"}),e.jsx("div",{children:(()=>{const w=ie(v.current_weight,v.height),I=ue(w);return e.jsxs("span",{className:I.class,children:[w," - ",I.text]})})()})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{children:[v.activity_level==="sedentary"&&" ",v.activity_level==="light"&&" ",v.activity_level==="moderate"&&" ",v.activity_level==="active"&&"",v.activity_level==="very_active"&&" "]})]}),e.jsxs("div",{className:"col-6 mb-3",children:[e.jsx("small",{className:"text-muted",children:"  :"}),e.jsx("div",{className:"fw-bold text-warning",children:v.daily_calories?`${v.daily_calories}   ()`:`${$e(v.current_weight,v.height,v.gender,v.activity_level,v.goal,Z((P=v.user)==null?void 0:P.date_of_birth))||"--"}   ()`}),!v.daily_calories&&e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-calculator me-1"}),"      "]})]})]})}):e.jsx("p",{className:"text-muted",children:"    "})})]})}),e.jsx("div",{className:"col-md-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:v?i?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"medical_conditions",className:"form-control",rows:"3",value:y.medical_conditions,onChange:N,placeholder:"     ..."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"dietary_restrictions",className:"form-control",rows:"3",value:y.dietary_restrictions,onChange:N,placeholder:"      ..."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"medications",className:"form-control",rows:"3",value:y.medications,onChange:N,placeholder:"     ..."})]}),e.jsx("div",{className:"row"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{className:"fw-bold",children:[v.goal==="lose_weight"&&" ",v.goal==="gain_weight"&&" ",v.goal==="maintain_weight"&&" ",v.goal==="build_muscle"&&" ",v.goal==="improve_health"&&" "]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{children:v.medical_conditions||" "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{children:v.dietary_restrictions||" "})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsx("div",{children:v.medications||" "})]})]}):e.jsx("p",{className:"text-muted",children:"    "})})]})})]}),a==="measurements"&&e.jsxs("div",{children:[e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:"   "})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:J,children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:" () *"}),e.jsx("input",{type:"number",step:"0.1",name:"weight",className:"form-control",value:p.weight,onChange:$,required:!0})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",step:"0.1",className:"form-control",value:f||"",readOnly:!0,placeholder:"  "}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-calculator me-1"}),"ABW = IBW + 0.4  (  - IBW)"]})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  (%)"}),e.jsx("input",{type:"number",step:"0.1",name:"body_fat_percentage",className:"form-control",value:p.body_fat_percentage,onChange:$})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",step:"0.1",name:"muscle_mass",className:"form-control",value:p.muscle_mass,onChange:$})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",step:"0.1",name:"waist_circumference",className:"form-control",value:p.waist_circumference,onChange:$})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",step:"0.1",name:"hip_circumference",className:"form-control",value:p.hip_circumference,onChange:$})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",step:"0.1",name:"chest_circumference",className:"form-control",value:p.chest_circumference,onChange:$})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",step:"0.1",name:"arm_circumference",className:"form-control",value:p.arm_circumference,onChange:$})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",name:"blood_pressure_systolic",className:"form-control",value:p.blood_pressure_systolic,onChange:$})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  ()"}),e.jsx("input",{type:"number",name:"blood_pressure_diastolic",className:"form-control",value:p.blood_pressure_diastolic,onChange:$})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("input",{type:"number",step:"0.1",name:"blood_sugar",className:"form-control",value:p.blood_sugar,onChange:$})]}),e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label",children:"  "}),e.jsxs("select",{name:"activity_level",className:"form-control",value:p.activity_level,onChange:$,children:[e.jsx("option",{value:"",children:"  "}),e.jsx("option",{value:"sedentary",children:" "}),e.jsx("option",{value:"light",children:" "}),e.jsx("option",{value:"moderate",children:" "}),e.jsx("option",{value:"active",children:" "}),e.jsx("option",{value:"very_active",children:"  "})]})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"notes",className:"form-control",rows:"3",value:p.notes,onChange:$,placeholder:"   ..."})]})]}),h&&e.jsxs("div",{className:"mt-4 p-3 bg-light rounded border",children:[e.jsxs("h6",{className:"text-primary mb-3",children:[e.jsx("i",{className:"fas fa-calculator me-2"}),"      "]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mb-2",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{className:"fw-bold text-success",children:[h.weight," "]})]}),e.jsxs("div",{className:"col-md-3 mb-2",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{className:"fw-bold text-info",children:[h.activityLevel==="sedentary"&&" ",h.activityLevel==="light"&&" ",h.activityLevel==="moderate"&&" ",h.activityLevel==="active"&&" ",h.activityLevel==="very_active"&&"  "]})]}),e.jsxs("div",{className:"col-md-3 mb-2",children:[e.jsx("small",{className:"text-muted",children:" :"}),e.jsxs("div",{className:"fw-bold text-primary",children:[h.targetCalories," /"]})]}),e.jsxs("div",{className:"col-md-3 mb-2",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{className:"fw-bold text-warning",children:[h.protein," /"]})]})]}),e.jsxs("div",{className:"row mt-2",children:[e.jsxs("div",{className:"col-md-3 mb-2",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{className:"fw-bold text-info",children:[h.carbs," /"]})]}),e.jsxs("div",{className:"col-md-3 mb-2",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{className:"fw-bold text-danger",children:[h.fat," /"]})]}),e.jsxs("div",{className:"col-md-3 mb-2",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{className:"fw-bold text-secondary",children:[h.fiber," /"]})]}),e.jsxs("div",{className:"col-md-3 mb-2",children:[e.jsx("small",{className:"text-muted",children:":"}),e.jsxs("div",{className:"fw-bold text-primary",children:[h.water," /"]})]})]}),e.jsx("div",{className:"alert alert-info mt-3 mb-0",children:e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"       .      ."]})})]}),e.jsx("div",{className:"text-end mt-3",children:e.jsx("button",{type:"submit",className:"btn btn-success",disabled:K.isLoading,children:K.isLoading?e.jsx(ve,{size:"sm",color:"light"}):" "})})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:(k==null?void 0:k.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:" ()"}),e.jsx("th",{children:"  ()"}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "})]})}),e.jsx("tbody",{children:k.map(w=>e.jsxs("tr",{children:[e.jsx("td",{children:te(w.measured_at)}),e.jsx("td",{className:"fw-bold",children:w.weight}),e.jsx("td",{className:"text-info fw-bold",children:w.adjusted_body_weight||"--"}),e.jsx("td",{children:w.body_fat_percentage||"--"}),e.jsx("td",{children:w.waist_circumference||"--"}),e.jsx("td",{children:w.blood_pressure_systolic&&w.blood_pressure_diastolic?`${w.blood_pressure_systolic}/${w.blood_pressure_diastolic}`:"--"}),e.jsx("td",{children:w.blood_sugar||"--"}),e.jsxs("td",{children:[w.activity_level==="sedentary"&&" ",w.activity_level==="light"&&" ",w.activity_level==="moderate"&&" ",w.activity_level==="active"&&" ",w.activity_level==="very_active"&&"  ",!w.activity_level&&"--"]}),e.jsx("td",{children:w.notes||"--"})]},w.id))})]})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-weight text-muted fs-2 mb-3"}),e.jsx("p",{className:"text-muted",children:"     "})]})})]})]}),a==="documents"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:(M==null?void 0:M.length)>0?e.jsx("div",{className:"row",children:M.map(w=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:e.jsx("div",{className:"card h-100",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start mb-2",children:[e.jsx("i",{className:"fas fa-file-medical text-primary fs-4 me-2"}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h6",{className:"card-title mb-1",children:w.title}),e.jsxs("small",{className:"text-muted",children:[w.document_type," - ",te(w.uploaded_at)]})]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("small",{className:"text-muted",children:[" : ",w.uploaded_by_name]}),e.jsx("a",{href:w.document,target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:""})]})]})})},w.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-file-medical text-muted fs-2 mb-3"}),e.jsx("p",{className:"text-muted",children:"   "})]})})]}),a==="nutrition"&&e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(ly,{patientProfile:v,onNutritionCalculated:T})})}),a==="diet-plans"&&e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(iy,{patientProfile:v,nutritionData:c,onDietPlanSelected:V})})}),a==="meal-selections"&&e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(oy,{patientId:(A=v==null?void 0:v.user)==null?void 0:A.id})})})]})},uy=()=>{var _e,be;const{t}=ze(),{user:s}=Qe(),n=ss(),r=[{value:"",label:"  "},{value:"weight_loss",label:" "},{value:"weight_maintenance",label:" "},{value:"weight_gain",label:" "},{value:"health_maintenance",label:"  "},{value:"pregnant",label:""},{value:"breastfeeding",label:""},{value:"muscle_building",label:" "}],a=[{value:"",label:"  "},{value:"keto",label:"  ",calories:1500,protein:100,carbs:20,fat:120},{value:"balanced",label:" ",calories:2e3,protein:120,carbs:250,fat:70},{value:"weight_gain",label:"  ",calories:2500,protein:150,carbs:300,fat:90},{value:"pregnant",label:" ",calories:2200,protein:140,carbs:280,fat:80},{value:"breastfeeding",label:" ",calories:2400,protein:160,carbs:300,fat:85},{value:"diabetes",label:" ",calories:1800,protein:110,carbs:180,fat:75},{value:"weight_maintenance",label:"  ",calories:2e3,protein:120,carbs:250,fat:70}],[l,i]=E.useState("plans"),[o,c]=E.useState(!1),[d,h]=E.useState(""),[u,j]=E.useState({title:"",description:"",start_date:"",end_date:"",diet_plan:"",target_calories:"",target_protein:"",target_carbs:"",target_fat:"",notes:""}),[x,y]=E.useState(null),[_,p]=E.useState(!1),[m,f]=E.useState([]),[g,v]=E.useState([]),[b,k]=E.useState(!1),[C,M]=E.useState(!1),[U,Q]=E.useState(null),[K,J]=E.useState("all"),O=S=>{y(S),p(!0)},$=S=>{console.log("Editing meal plan:",S),console.log("Plan dates:",{start_date:S.start_date,end_date:S.end_date}),Q(S);const F={title:S.title||"",description:S.description||"",start_date:S.start_date||"",end_date:S.end_date||"",diet_plan:S.diet_plan||"",target_calories:S.target_calories||"",target_protein:S.target_protein||"",target_carbs:S.target_carbs||"",target_fat:S.target_fat||"",notes:S.notes||""};console.log("Form data to be set:",F),j(F),h(S.patient||""),M(!0),p(!1)},N=S=>{console.log("Copying meal plan:",S),q.info("   -  ")},H=ct(({mealPlanId:S,status:F})=>ee.post(`/api/meals/meal-plans/${S}/update-status/`,{status:F}),{onSuccess:()=>{q.success("     "),n.invalidateQueries("doctor-meal-plans")},onError:S=>{q.error("     "),console.error("Error updating meal plan status:",S)}}),L=(S,F)=>{H.mutate({mealPlanId:S,status:F})},{data:R,isLoading:T}=xe("doctor-meal-plans",()=>ee.get("/api/meals/meal-plans/").then(S=>(console.log(" Fetched meal plans:",S.data.results),S.data.results.forEach((F,se)=>{console.log(`Plan ${se+1} (ID: ${F.id}): Start: ${F.start_date}, End: ${F.end_date}`),F.meals&&F.meals.length>0&&(console.log(` Doctor - Plan ${se+1} meals breakdown:`),F.meals.forEach((ne,ae)=>{var Y;console.log(`   Meal ${ae+1}: ${ne.name} - Ingredients: ${((Y=ne.ingredients)==null?void 0:Y.length)||0}`),ne.ingredients&&ne.ingredients.length>0&&ne.ingredients.forEach((de,ge)=>{var we;console.log(`     Ingredient ${ge+1}: ${((we=de.food)==null?void 0:we.name_ar)||de.food_name_ar} (${de.amount}g)`)})}))}),S.data.results)),{enabled:!!s,staleTime:0,cacheTime:0,refetchOnWindowFocus:!0}),{data:V,isLoading:z,refetch:Z}=xe("doctor-patients-list",async()=>{try{const S=await ee.get("/api/auth/patients/");if(S.data&&S.data.length>0){const Y=S.data.map(de=>{const ge=`${de.first_name||""} ${de.last_name||""}`.trim();return{id:de.id,name:ge||de.username||` ${de.id}`}});return console.log("Patients loaded:",Y.length),Y}const se=(await ee.get("/api/bookings/appointments/")).data.results||[],ne=[],ae=new Set;for(const Y of se)ae.has(Y.patient)||(ae.add(Y.patient),ne.push({id:Y.patient,name:Y.patient_name||` ${Y.patient}`}));return ne.length===0?[]:ne}catch(S){return console.error("Error fetching patients:",S),[]}},{enabled:!!s,staleTime:5*60*1e3,cacheTime:10*60*1e3,refetchOnWindowFocus:!0}),{data:D,isLoading:X}=xe("foods-list",()=>ee.get("/api/meals/foods/").then(S=>S.data.results),{enabled:!!s}),{data:te,isLoading:ie}=xe("meal-types",()=>ee.get("/api/meals/meal-types/").then(S=>S.data),{enabled:!!s}),{data:ue,isLoading:$e,refetch:Pt,error:Ws}=xe(["meal-plan-meals",x==null?void 0:x.id],()=>{if(!(x!=null&&x.id))throw new Error("No meal plan selected");return ee.get(`/api/meals/meal-plans/${x.id}/meals/`).then(S=>S.data)},{enabled:!!(x!=null&&x.id)&&!!s,staleTime:5*60*1e3,retry:1,onError:S=>{var F,se,ne,ae;console.error("Error fetching meals:",S),console.error("Error details:",(F=S.response)==null?void 0:F.data),((se=S.response)==null?void 0:se.status)===403?q.error("     -     "):((ne=S.response)==null?void 0:ne.status)===404?console.log("No meals found for this plan"):((ae=S.response)==null?void 0:ae.status)===401&&q.error("   -     ")}}),{data:at,isLoading:Hs}=xe("recent-patients",async()=>{try{const S=new Date;S.setDate(S.getDate()-30);const F=S.toISOString().split("T")[0],ne=(await ee.get(`/api/bookings/appointments/?created_after=${F}`)).data.results||[],ae=[],Y=new Set;return ne.forEach(de=>{!Y.has(de.patient)&&de.patient_name&&(Y.add(de.patient),ae.push({id:de.patient,name:de.patient_name,first_appointment:de.scheduled_date,registration_date:de.created_at,appointment_type:de.appointment_type,status:de.status}))}),ae.sort((de,ge)=>new Date(ge.registration_date)-new Date(de.registration_date))}catch(S){return console.error("Error fetching recent patients:",S),[]}},{enabled:!!s}),vs=ct(S=>ee.post("/api/meals/meal-plans/",S),{onSuccess:S=>{q.success("    "),n.invalidateQueries("doctor-meal-plans"),n.invalidateQueries("doctor-patients-list"),c(!1),bt(),u.diet_plan&&u.diet_plan!==""&&$t(S.data.id,u.diet_plan)},onError:S=>{q.error("    ")}}),He=ct(({mealPlanId:S,dietPlan:F})=>{const se=new AbortController,ne=setTimeout(()=>se.abort(),3e4);return ee.post(`/api/meals/meal-plans/${S}/generate-meals/`,{diet_plan:F},{signal:se.signal}).finally(()=>clearTimeout(ne))},{onSuccess:S=>{var F;console.log("Suggested meals generated successfully:",S.data),f(S.data.suggested_meals||[]),v([]),k(!0),q.success(`  ${((F=S.data.suggested_meals)==null?void 0:F.length)||0}  `),C&&(M(!1),Q(null),bt())},onError:S=>{var se,ne,ae,Y,de,ge;console.error("Error generating meals:",S),console.error("Error response:",(se=S.response)==null?void 0:se.data),console.error("Error status:",(ne=S.response)==null?void 0:ne.status);let F="    ";S.name==="AbortError"?F="  .    .":(Y=(ae=S.response)==null?void 0:ae.data)!=null&&Y.error?F=S.response.data.error:(ge=(de=S.response)==null?void 0:de.data)!=null&&ge.detail?F=S.response.data.detail:S.message&&(F=S.message),q.error(F)}}),$t=(S,F)=>{if(console.log("Generating meals for plan:",S,"with diet:",F),console.log("User token:",localStorage.getItem("token")),console.log("User:",s),!s||!localStorage.getItem("token")){q.error("   ");return}if(!F||F===""){q.error("    ");return}if(!S){q.error("    ");return}He.mutate({mealPlanId:S,dietPlan:F})};ct(({mealPlanId:S,selectedMeals:F})=>ee.post(`/api/meals/meal-plans/${S}/save-selected-meals/`,{selected_meals:F}),{onSuccess:S=>{console.log("Meals saved successfully:",S.data),q.success(`  ${S.data.meals.length}  `),k(!1),f([]),v([]);const F=x==null?void 0:x.id;y(null),F&&n.invalidateQueries(["meal-plan-meals",F]),n.invalidateQueries("doctor-meal-plans"),F&&setTimeout(()=>{n.refetchQueries(["meal-plan-meals",F])},1e3)},onError:S=>{console.error("Error saving meals:",S),q.error("    ")}});const ns=ct(S=>(console.log(" Sending update request to:",`/api/meals/meal-plans/${U==null?void 0:U.id}/`),console.log(" Data being sent:",S),ee.put(`/api/meals/meal-plans/${U==null?void 0:U.id}/`,S)),{onSuccess:(S,F,se)=>{if(console.log(" Update successful, response:",S.data),console.log(" Updated meal plan dates:",{start_date:S.data.start_date,end_date:S.data.end_date}),se!=null&&se.onSuccess){se.onSuccess();return}q.success("    "),n.invalidateQueries("doctor-meal-plans"),n.invalidateQueries("doctor-patients-list"),setTimeout(()=>{console.log(" Refetching meal plans after update..."),n.refetchQueries("doctor-meal-plans"),n.invalidateQueries("patient-meal-plans"),n.invalidateQueries("patient-meal-selections")},100),M(!1),Q(null),bt()},onError:S=>{var F,se,ne;console.error(" Error updating meal plan:",S),console.error(" Error response:",(F=S.response)==null?void 0:F.data),q.error("    : "+(((ne=(se=S.response)==null?void 0:se.data)==null?void 0:ne.error)||S.message))}}),bt=()=>{console.log("Resetting form..."),j({title:"",description:"",start_date:"",end_date:"",diet_plan:"",target_calories:"",target_protein:"",target_carbs:"",target_fat:"",notes:""}),h(""),console.log("Form reset complete.")},rs=(S,F)=>{var Bc;if(!F||!F.patient_profile)return{calories:S.calories,protein:S.protein,carbs:S.carbs,fat:S.fat};const se=F.patient_profile,{current_weight:ne,height:ae,goal:Y,activity_level:de,gender:ge}=se;let lt=F.age||((Bc=F.user)==null?void 0:Bc.age)||30;if(F.date_of_birth){const Yf=new Date(F.date_of_birth);lt=new Date().getFullYear()-Yf.getFullYear()}let it;ge==="male"?it=10*ne+6.25*ae-5*lt+5:it=10*ne+6.25*ae-5*lt-161,it=Math.round(it);const Vs={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9}[de]||1.55,Ks=Math.round(it*Vs),js={lose_weight:.8,maintain_weight:1,gain_weight:1.1,build_muscle:1.15,improve_health:.9}[Y]||1,Kt=Math.round(Ks*js),Gt={lose_weight:2.2,maintain_weight:1.6,gain_weight:1.8,build_muscle:2,improve_health:1.8}[Y]||1.6,as=Math.round(ne*Gt),zc={lose_weight:.25,maintain_weight:.3,gain_weight:.35,build_muscle:.25,improve_health:.3}[Y]||.3,Wf=Kt*zc,Uc=Math.round(Wf/9),Hf=as*4,Vf=Uc*9,Kf=Kt-Hf-Vf,Gf=Math.round(Kf/4);return{calories:Kt,protein:as,carbs:Gf,fat:Uc}},ke=S=>{const{name:F,value:se}=S.target;if(F==="diet_plan"&&se){const ne=a.find(ae=>ae.value===se);if(ne){const ae=V==null?void 0:V.find(de=>de.id.toString()===d.toString()),Y=rs(ne,ae);j({...u,[F]:se,target_calories:Y.calories,target_protein:Y.protein,target_carbs:Y.carbs,target_fat:Y.fat});return}}if(F==="patient"&&se&&u.diet_plan){const ne=a.find(ae=>ae.value===u.diet_plan);if(ne){const ae=V==null?void 0:V.find(de=>de.id.toString()===se.toString()),Y=rs(ne,ae);j({...u,[F]:se,target_calories:Y.calories,target_protein:Y.protein,target_carbs:Y.carbs,target_fat:Y.fat});return}}if(F==="title"&&se&&u.diet_plan){const ne=a.find(ae=>ae.value===u.diet_plan);if(ne){const ae=V==null?void 0:V.find(de=>de.id.toString()===d.toString()),Y=rs(ne,ae);j({...u,[F]:se,target_calories:Y.calories,target_protein:Y.protein,target_carbs:Y.carbs,target_fat:Y.fat});return}}j({...u,[F]:se})},P=S=>{if(S.preventDefault(),!d){q.error("  ");return}const F={...u,patient:d};console.log("Creating meal plan with data:",F),vs.mutate(F)},A=S=>{if(S.preventDefault(),!d){q.error("  ");return}if(!U){q.error(":      ");return}console.log("Submitting edit for meal plan:",U.id),console.log("Form data:",u),console.log("Current meal plan dates:",{start_date:U.start_date,end_date:U.end_date});const F={...u,patient:d};console.log("Data to be sent:",F),F.diet_plan?ns.mutate(F,{onSuccess:()=>{console.log("Meal plan updated successfully, now generating meals..."),q.info("     ..."),He.mutate({mealPlanId:U.id,dietPlan:F.diet_plan})}}):ns.mutate(F)},w=S=>{const F=new Date,se=new Date(S),ne=Math.abs(F-se);return Math.ceil(ne/(1e3*60*60*24))},I=()=>{const S=new Date;return S.setDate(S.getDate()+1),S.toISOString().split("T")[0]},W=()=>{const S=new Date;return S.setDate(S.getDate()+7),S.toISOString().split("T")[0]},re=S=>{if(!S)return{};const F={},se=["","","","","","",""];return S.forEach(ne=>{var de,ge;const ae=se[ne.day_of_week]||` ${ne.day_of_week+1}`;F[ae]||(F[ae]={});const Y=((de=ne.meal_type)==null?void 0:de.name_ar)||((ge=ne.meal_type)==null?void 0:ge.name)||"";F[ae][Y]||(F[ae][Y]=[]),F[ae][Y].push(ne)}),F},oe=S=>{if(!S)return{};const F={},se=["","","","","","",""];return S.forEach(ne=>{const ae=se[ne.day_of_week]||` ${ne.day_of_week+1}`;F[ae]||(F[ae]={});const Y=ne.meal_type_name_ar||ne.meal_type_name||"";F[ae][Y]||(F[ae][Y]=[]),F[ae][Y].push(ne)}),F},he=S=>!S.ingredients||S.ingredients.length===0?{calories:0,protein:0,carbs:0,fat:0,fiber:0}:S.ingredients.reduce((F,se)=>{const ne=se.amount||0,ae=se.food;if(!ae)return F;const Y=ne/100;return{calories:F.calories+ae.calories_per_100g*Y,protein:F.protein+ae.protein_per_100g*Y,carbs:F.carbs+ae.carbs_per_100g*Y,fat:F.fat+ae.fat_per_100g*Y,fiber:F.fiber+ae.fiber_per_100g*Y}},{calories:0,protein:0,carbs:0,fat:0,fiber:0}),ye=S=>!S.ingredients||S.ingredients.length===0?{calories:0,protein:0,carbs:0,fat:0,fiber:0}:S.ingredients.reduce((F,se)=>{const ne=se.amount||0;if(!se)return F;const ae=ne/100,Y=parseFloat(se.calories_per_100g)||0,de=parseFloat(se.protein_per_100g)||0,ge=parseFloat(se.carbs_per_100g)||0,we=parseFloat(se.fat_per_100g)||0,lt=parseFloat(se.fiber_per_100g)||0;return{calories:Math.round((F.calories+Y*ae)*100)/100,protein:Math.round((F.protein+de*ae)*100)/100,carbs:Math.round((F.carbs+ge*ae)*100)/100,fat:Math.round((F.fat+we*ae)*100)/100,fiber:Math.round((F.fiber+lt*ae)*100)/100}},{calories:0,protein:0,carbs:0,fat:0,fiber:0});return E.useEffect(()=>{const S=F=>{F.key==="Escape"&&b&&(k(!1),f([]),v([]))};return b&&(document.addEventListener("keydown",S),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",S),document.body.style.overflow="unset"}},[b]),console.log("=== COMPONENT RENDER ==="),T||z?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})}):e.jsxs("div",{className:"fade-in",children:[e.jsx("style",{children:`
          .avatar-sm {
            width: 40px;
            height: 40px;
            font-size: 16px;
          }
          
          .meal-selection-modal {
            z-index: 9999 !important;
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
          }
          
          .meal-selection-modal .modal-dialog {
            z-index: 10000 !important;
          }
          
          .meal-selection-modal .modal-content {
            z-index: 10001 !important;
          }
          
          /* Ensure modal appears above everything */
          .meal-selection-modal {
            backdrop-filter: blur(2px);
          }
          
          /* Prevent any other elements from appearing above modal */
          .meal-selection-modal * {
            position: relative;
            z-index: inherit;
          }
          
          /* Ensure modal is always on top */
          .meal-selection-modal {
            pointer-events: auto;
          }
          
          /* Smooth animation */
          .meal-selection-modal {
            animation: fadeIn 0.3s ease-in-out;
          }
          
          @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
          }
          
          /* Custom checkbox styling */
          .meal-selection-modal .form-check-input {
            width: 20px !important;
            height: 20px !important;
            background-color: #c0c0c0 !important;
            border: 2px solid #a0a0a0 !important;
            border-radius: 4px !important;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
            transition: all 0.3s ease !important;
          }
          
          .meal-selection-modal .form-check-input:checked {
            background-color: #28a745 !important;
            border-color: #28a745 !important;
            box-shadow: 0 2px 6px rgba(40, 167, 69, 0.4) !important;
          }
          
          .meal-selection-modal .form-check-input:focus {
            box-shadow: 0 0 0 0.2rem rgba(192, 192, 192, 0.5) !important;
            border-color: #a0a0a0 !important;
          }
          
          .meal-selection-modal .form-check-input:hover {
            background-color: #d0d0d0 !important;
            border-color: #909090 !important;
            box-shadow: 0 3px 6px rgba(0,0,0,0.3) !important;
            transform: translateY(-1px) !important;
          }
          
          .meal-selection-modal .form-check-input:checked:hover {
            background-color: #218838 !important;
            border-color: #218838 !important;
            box-shadow: 0 3px 8px rgba(40, 167, 69, 0.5) !important;
          }
          
          /* Checkbox label styling */
          .meal-selection-modal .form-check-label {
            cursor: pointer !important;
            transition: all 0.2s ease !important;
          }
          
          .meal-selection-modal .form-check-label:hover {
            color: #007bff !important;
          }
          
          /* Meal item hover effect */
          .meal-selection-modal .meal-item:hover {
            background-color: rgba(0, 123, 255, 0.05) !important;
            border-radius: 8px !important;
            padding: 8px !important;
            margin: -8px !important;
            transition: all 0.3s ease !important;
          }
          
          /* Selected meal item styling */
          .meal-selection-modal .meal-item.selected {
            background-color: rgba(40, 167, 69, 0.1) !important;
            border: 2px solid #28a745 !important;
            border-radius: 8px !important;
          }
          
          /* Checkbox animation */
          .meal-selection-modal .form-check-input {
            position: relative !important;
          }
          
          .meal-selection-modal .form-check-input::after {
            content: '' !important;
            position: absolute !important;
            top: 50% !important;
            left: 50% !important;
            transform: translate(-50%, -50%) !important;
            color: white !important;
            font-size: 12px !important;
            font-weight: bold !important;
            opacity: 0 !important;
            transition: opacity 0.2s ease !important;
          }
          
          .meal-selection-modal .form-check-input:checked::after {
            opacity: 1 !important;
          }
          
          /* Enhanced checkbox styling */
          .meal-selection-modal .form-check-input {
            appearance: none !important;
            -webkit-appearance: none !important;
            -moz-appearance: none !important;
          }
          
          /* Checkbox focus ring */
          .meal-selection-modal .form-check-input:focus {
            outline: none !important;
            box-shadow: 0 0 0 3px rgba(192, 192, 192, 0.3) !important;
          }
          
          /* Checkbox active state */
          .meal-selection-modal .form-check-input:active {
            transform: scale(0.95) !important;
          }
          
          /* Checkbox checked state with animation */
          .meal-selection-modal .form-check-input:checked {
            animation: checkmark 0.3s ease-in-out !important;
          }
          
          @keyframes checkmark {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
          }
        `}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-utensils text-success me-2"})," "]}),e.jsx("p",{className:"text-muted",children:"    "})]}),e.jsxs("button",{className:"btn btn-success",onClick:()=>c(!0),children:[e.jsx("i",{className:"fas fa-plus me-2"}),"  "]})]})})}),e.jsxs("ul",{className:"nav nav-tabs mb-4",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${l==="plans"?"active":""}`,onClick:()=>i("plans"),children:[e.jsx("i",{className:"fas fa-list me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${l==="foods"?"active":""}`,onClick:()=>i("foods"),children:[e.jsx("i",{className:"fas fa-apple-alt me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${l==="recent-patients"?"active":""}`,onClick:()=>i("recent-patients"),children:[e.jsx("i",{className:"fas fa-user-plus me-2"})," "]})})]}),l==="plans"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:(R==null?void 0:R.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:R.map(S=>{var F;return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:((F=r.find(se=>se.value===S.title))==null?void 0:F.label)||(S.title==="weight_loss"?" ":S.title==="muscle_building"?" ":S.title)}),e.jsx("small",{className:"text-muted",children:S.description})]})}),e.jsx("td",{children:S.patient_name}),e.jsxs("td",{children:[Je(S.start_date),e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["Raw: ",S.start_date]})]}),e.jsxs("td",{children:[Je(S.end_date),e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["Raw: ",S.end_date]})]}),e.jsx("td",{children:e.jsx("span",{className:`badge ${S.is_active?"bg-success":"bg-secondary"}`,children:S.is_active?"":" "})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${S.status==="waiting"?"bg-warning":S.status==="delivered"?"bg-info":S.status==="acknowledged"?"bg-success":S.status==="in_progress"?"bg-primary":S.status==="completed"?"bg-success":S.status==="cancelled"?"bg-danger":"bg-secondary"}`,children:S.status==="waiting"?" ":S.status==="delivered"?" ":S.status==="acknowledged"?" ":S.status==="in_progress"?" ":S.status==="completed"?"":S.status==="cancelled"?"":S.status})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>O(S),title:" ",children:e.jsx("i",{className:"fas fa-eye"})}),e.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>$(S),title:" ",children:e.jsx("i",{className:"fas fa-edit"})}),e.jsx("button",{className:"btn btn-sm btn-outline-warning",onClick:()=>{window.location.href=`/iraqi-nutrition/meal-planner?patient=${S.patient}&plan=${S.id}`},title:"    ",children:e.jsx("i",{className:"fas fa-utensils"})}),e.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>N(S),title:" ",children:e.jsx("i",{className:"fas fa-copy"})}),S.status==="delivered"&&e.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>L(S.id,"acknowledged"),title:"  ",children:e.jsx("i",{className:"fas fa-check"})}),S.status==="acknowledged"&&e.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>L(S.id,"in_progress"),title:" ",children:e.jsx("i",{className:"fas fa-play"})}),S.status==="in_progress"&&e.jsx("button",{className:"btn btn-sm btn-outline-success",onClick:()=>L(S.id,"completed"),title:" ",children:e.jsx("i",{className:"fas fa-flag-checkered"})})]})})]},S.id)})})]})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-utensils text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:"   "}),e.jsx("p",{className:"text-muted",children:"     "}),e.jsx("button",{className:"btn btn-success",onClick:()=>c(!0),children:"  "})]})})]}),l==="foods"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:X?e.jsx("div",{className:"text-center py-5",children:e.jsx(ve,{size:"lg"})}):(D==null?void 0:D.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" (100)"}),e.jsx("th",{children:" (100)"}),e.jsx("th",{children:" (100)"}),e.jsx("th",{children:" (100)"})]})}),e.jsx("tbody",{children:D.slice(0,20).map(S=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:S.name}),S.name_ar&&e.jsx("small",{className:"text-muted",children:S.name_ar})]})}),e.jsx("td",{children:S.category_name}),e.jsx("td",{children:S.calories_per_100g}),e.jsxs("td",{children:[S.protein_per_100g,"g"]}),e.jsxs("td",{children:[S.carbs_per_100g,"g"]}),e.jsxs("td",{children:[S.fat_per_100g,"g"]})]},S.id))})]})}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-apple-alt text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:"  "}),e.jsx("p",{className:"text-muted",children:"      "})]})})]}),l==="recent-patients"&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user-plus text-success me-2"})," "]}),e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsxs("select",{className:"form-select form-select-sm",value:K,onChange:S=>J(S.target.value),style:{width:"auto"},children:[e.jsx("option",{value:"all",children:" "}),e.jsx("option",{value:"confirmed",children:" "}),e.jsx("option",{value:"pending",children:" "}),e.jsx("option",{value:"completed",children:""})]}),e.jsx("div",{className:"text-muted",children:e.jsx("small",{children:" 30 "})})]})]})}),e.jsx("div",{className:"card-body",children:Hs?e.jsx("div",{className:"text-center py-5",children:e.jsx(ve,{size:"lg"})}):(at==null?void 0:at.length)>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:":"}),'          30 .          "  ".']}),(()=>{const S=at.filter(F=>K==="all"?!0:F.status===K);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:S.map(F=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"avatar-sm bg-success text-white rounded-circle d-flex align-items-center justify-content-center me-3",children:e.jsx("i",{className:"fas fa-user"})}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:F.name}),e.jsxs("small",{className:"text-muted",children:["ID: ",F.id]})]})]})}),e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:Je(F.registration_date)}),e.jsxs("small",{className:"text-muted",children:[" ",w(F.registration_date)," "]})]})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:Je(F.first_appointment)})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${F.appointment_type==="consultation"?"bg-info":F.appointment_type==="follow_up"?"bg-success":F.appointment_type==="emergency"?"bg-danger":"bg-secondary"}`,children:F.appointment_type==="consultation"?"":F.appointment_type==="follow_up"?"":F.appointment_type==="emergency"?"":F.appointment_type})}),e.jsx("td",{children:e.jsx("span",{className:`badge ${F.status==="confirmed"?"bg-success":F.status==="pending"?"bg-warning":F.status==="completed"?"bg-info":F.status==="cancelled"?"bg-danger":"bg-secondary"}`,children:F.status==="confirmed"?"":F.status==="pending"?" ":F.status==="completed"?"":F.status==="cancelled"?"":F.status})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-info",children:F.has_meal_plan?"  ":"  "})}),e.jsx("td",{children:e.jsxs("div",{className:"btn-group",children:[e.jsxs("button",{className:"btn btn-sm btn-outline-success",onClick:()=>{h(F.id),c(!0)},title:"  ",children:[e.jsx("i",{className:"fas fa-utensils me-1"})," "]}),e.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{q.info("   -  ")},title:"  ",children:[e.jsx("i",{className:"fas fa-user me-1"}),""]})]})})]},F.id))})]})}),S.length===0&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-filter text-muted fs-2 mb-3"}),e.jsx("h6",{className:"text-muted",children:"  "}),e.jsx("p",{className:"text-muted",children:"       30 "})]}),e.jsxs("div",{className:"mt-4 p-3 bg-light rounded",children:[e.jsxs("h6",{className:"mb-2",children:[e.jsx("i",{className:"fas fa-chart-bar text-primary me-2"}),"  "]}),e.jsxs("div",{className:"row text-center",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("div",{className:"fw-bold text-primary fs-4",children:at.length}),e.jsx("small",{className:"text-muted",children:"  "})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("div",{className:"fw-bold text-success fs-4",children:at.filter(F=>F.status==="confirmed").length}),e.jsx("small",{className:"text-muted",children:" "})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("div",{className:"fw-bold text-warning fs-4",children:at.filter(F=>F.status==="pending").length}),e.jsx("small",{className:"text-muted",children:" "})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("div",{className:"fw-bold text-info fs-4",children:at.filter(F=>F.status==="completed").length}),e.jsx("small",{className:"text-muted",children:""})]})]})]})]})})()]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"fas fa-user-plus text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:"   "}),e.jsx("p",{className:"text-muted",children:"       30 "}),e.jsxs("div",{className:"alert alert-info mt-3",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:":"}),"         ."]})]})})]}),o&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9998},children:e.jsx("div",{className:"modal-dialog modal-xl",style:{zIndex:9999},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h5",{className:"modal-title",children:"   "}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{c(!1)}})]}),e.jsxs("form",{onSubmit:P,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:[" *",e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>Z(),disabled:z,title:"  ",children:e.jsx("i",{className:`fas fa-sync-alt ${z?"fa-spin":""}`})})]}),e.jsxs("select",{className:"form-select",value:d,onChange:S=>h(S.target.value),required:!0,disabled:z,children:[e.jsx("option",{value:"",children:z?" ...":" "}),V==null?void 0:V.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]}),V&&V.length>0?e.jsx("div",{className:"form-text",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),V.length,"  "]})}):!z&&e.jsxs("div",{className:"form-text",children:[e.jsxs("small",{className:"text-warning",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-1"}),"   .        ."]}),e.jsx("div",{className:"mt-2",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Z(),children:[e.jsx("i",{className:"fas fa-sync-alt me-1"})," "]})})]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("select",{name:"title",className:"form-select",value:u.title,onChange:ke,required:!0,children:r.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"description",className:"form-control",rows:"3",value:u.description,onChange:ke,placeholder:"      ..."})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"date",name:"start_date",className:"form-control",value:u.start_date,onChange:ke,min:I(),required:!0})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"date",name:"end_date",className:"form-control",value:u.end_date,onChange:ke,min:W(),required:!0})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"  "}),e.jsx("select",{name:"diet_plan",className:"form-control",value:u.diet_plan,onChange:ke,children:a.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"   *"}),e.jsx("input",{type:"number",name:"target_calories",className:"form-control",value:u.target_calories,onChange:ke,required:!0,placeholder:"1800"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-magic me-1"}),"         "]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  () *"}),e.jsx("input",{type:"number",name:"target_protein",className:"form-control",value:u.target_protein,onChange:ke,required:!0,placeholder:"120"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-magic me-1"}),"      "]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  () *"}),e.jsx("input",{type:"number",name:"target_carbs",className:"form-control",value:u.target_carbs,onChange:ke,required:!0,placeholder:"200"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-magic me-1"}),"         "]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  () *"}),e.jsx("input",{type:"number",name:"target_fat",className:"form-control",value:u.target_fat,onChange:ke,required:!0,placeholder:"60"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-magic me-1"}),"         "]})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"notes",className:"form-control",rows:"2",value:u.notes,onChange:ke,placeholder:"     ..."})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-outline-danger me-2",onClick:()=>{window.confirm("      ")&&bt()},children:[e.jsx("i",{className:"fas fa-trash me-1"})," "]}),e.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{c(!1)},children:""}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:vs.isLoading,children:vs.isLoading?e.jsx(ve,{size:"sm",color:"light"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save me-2"}),"  "]})})]})]})]})})}),_&&x&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9996},children:e.jsx("div",{className:"modal-dialog modal-xl",style:{zIndex:9997},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-eye text-primary me-2"}),"  : ",x.title]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{p(!1),b||y(null)}})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:" :"}),e.jsx("p",{className:"form-control-plaintext",children:((_e=r.find(S=>S.value===x.title))==null?void 0:_e.label)||x.title})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:":"}),e.jsx("p",{className:"form-control-plaintext",children:x.patient_name})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:" :"}),e.jsx("p",{className:"form-control-plaintext",children:Je(x.start_date)})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:" :"}),e.jsx("p",{className:"form-control-plaintext",children:Je(x.end_date)})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:":"}),e.jsx("p",{className:"form-control-plaintext",children:e.jsx("span",{className:`badge ${x.is_active?"bg-success":"bg-secondary"}`,children:x.is_active?"":" "})})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:" :"}),e.jsx("p",{className:"form-control-plaintext",children:x.diet_plan?((be=a.find(S=>S.value===x.diet_plan))==null?void 0:be.label)||x.diet_plan:"    "})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:" :"}),e.jsx("p",{className:"form-control-plaintext",children:x.description||"  "})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label fw-bold",children:":"}),e.jsx("p",{className:"form-control-plaintext",children:x.notes||"  "})]})]}),e.jsxs("div",{className:"border-top pt-4 mt-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-utensils text-success me-2"})," "]}),e.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{console.log("Retry button clicked"),x!=null&&x.id&&n.refetchQueries(["meal-plan-meals",x.id])},disabled:$e,children:[e.jsx("i",{className:`fas fa-sync-alt ${$e?"fa-spin":""}`}),""]})]}),$e?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(ve,{size:"lg"}),e.jsx("p",{className:"text-muted mt-2",children:"  ..."})]}):ue&&ue.length>0?e.jsx("div",{className:"meals-container",children:(()=>{const S=re(ue);return Object.keys(S).map(se=>e.jsxs("div",{className:"day-meals mb-4",children:[e.jsxs("h6",{className:"day-header bg-light p-2 rounded mb-3",children:[e.jsx("i",{className:"fas fa-calendar-day text-primary me-2"}),se]}),e.jsx("div",{className:"row",children:Object.entries(S[se]).map(([ne,ae])=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header bg-success text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-utensils me-2"}),ne]})}),e.jsx("div",{className:"card-body",children:ae.map((Y,de)=>{const ge=he(Y);return e.jsxs("div",{className:"meal-item mb-3",children:[e.jsx("h6",{className:"meal-name text-primary",children:Y.name}),Y.description&&e.jsx("p",{className:"meal-description text-muted small mb-2",children:Y.description}),Y.instructions&&e.jsxs("div",{className:"meal-instructions mb-2",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-list-ul me-1"}),e.jsx("strong",{children:" :"})]}),e.jsx("p",{className:"small text-muted mb-1",children:Y.instructions})]}),Y.prep_time&&e.jsx("div",{className:"prep-time mb-2",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-clock me-1"})," : ",Y.prep_time," "]})}),(console.log(" Doctor - Meal ingredients debug:",Y.name,Y.ingredients),null),Y.ingredients&&Y.ingredients.length>0&&e.jsxs("div",{className:"ingredients mb-2",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-shopping-basket me-1"}),e.jsx("strong",{children:":"})]}),e.jsx("ul",{className:"list-unstyled small mb-1",children:Y.ingredients.map((we,lt)=>{var it,Vt;return e.jsxs("li",{className:"text-muted",children:[" ",((it=we.food)==null?void 0:it.name_ar)||((Vt=we.food)==null?void 0:Vt.name),"(",we.amount,"g)",we.notes&&e.jsxs("span",{className:"text-info",children:[" - ",we.notes]})]},lt)})})]}),e.jsxs("div",{className:"nutrition-info",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-chart-pie me-1"}),e.jsx("strong",{children:" :"})]}),e.jsxs("div",{className:"row small text-muted",children:[e.jsxs("div",{className:"col-6",children:[e.jsxs("div",{children:[": ",Math.round(ge.calories)]}),e.jsxs("div",{children:[": ",Math.round(ge.protein),"g"]})]}),e.jsxs("div",{className:"col-6",children:[e.jsxs("div",{children:[": ",Math.round(ge.carbs),"g"]}),e.jsxs("div",{children:[": ",Math.round(ge.fat),"g"]})]})]})]})]},Y.id||de)})})]})},ne))})]},se))})()}):e.jsxs("div",{className:"alert alert-warning text-center py-4",children:[e.jsx("div",{className:"mb-3",children:e.jsx("i",{className:"fas fa-utensils text-warning",style:{fontSize:"3rem"}})}),e.jsxs("h6",{className:"alert-heading mb-2",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"   "]}),e.jsx("p",{className:"mb-3",children:"      "}),Ws&&e.jsxs("div",{className:"alert alert-danger",children:[e.jsxs("small",{children:[e.jsx("i",{className:"fas fa-exclamation-circle me-1"}),"   : ",Ws.message]}),e.jsx("div",{className:"mt-2",children:e.jsxs("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>{console.log("Manual refresh triggered"),x!=null&&x.id&&n.refetchQueries(["meal-plan-meals",x.id])},children:[e.jsx("i",{className:"fas fa-retry"})," "]})})]}),x.diet_plan&&x.diet_plan!==""?e.jsxs("div",{children:[e.jsx("p",{className:"mb-3",children:"        "}),e.jsxs("button",{className:"btn btn-success me-2",onClick:()=>{x!=null&&x.id&&(x!=null&&x.diet_plan)?$t(x.id,x.diet_plan):q.error(":        ")},disabled:He.isLoading,children:[e.jsx("i",{className:`fas fa-magic ${He.isLoading?"fa-spin":""}`}),He.isLoading?" ...":"  "]}),He.isLoading&&e.jsxs("button",{className:"btn btn-outline-danger btn-sm",onClick:()=>{He.reset(),q.info("  ")},children:[e.jsx("i",{className:"fas fa-times"}),""]}),e.jsxs("button",{className:"btn btn-outline-primary me-2",onClick:()=>{console.log("Manual edit triggered for plan:",x),Q(x),j({title:x.title||"",description:x.description||"",start_date:x.start_date||"",end_date:x.end_date||"",diet_plan:x.diet_plan||"",target_calories:x.target_calories||"",target_protein:x.target_protein||"",target_carbs:x.target_carbs||"",target_fat:x.target_fat||"",notes:x.notes||""}),h(x.patient||""),M(!0)},children:[e.jsx("i",{className:"fas fa-edit"}),"  "]}),e.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{console.log("Manual refresh triggered"),x!=null&&x.id&&n.refetchQueries(["meal-plan-meals",x.id])},disabled:$e,children:[e.jsx("i",{className:`fas fa-sync-alt ${$e?"fa-spin":""}`})," "]})]}):e.jsxs("div",{children:[e.jsx("p",{className:"mb-3",children:"       "}),e.jsxs("button",{className:"btn btn-outline-primary me-2",onClick:()=>{console.log("Manual edit triggered for plan:",x),Q(x),j({title:x.title||"",description:x.description||"",start_date:x.start_date||"",end_date:x.end_date||"",diet_plan:x.diet_plan||"",target_calories:x.target_calories||"",target_protein:x.target_protein||"",target_carbs:x.target_carbs||"",target_fat:x.target_fat||"",notes:x.notes||""}),h(x.patient||""),M(!0)},children:[e.jsx("i",{className:"fas fa-edit"}),"    "]}),e.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{console.log("Manual refresh triggered"),x!=null&&x.id&&n.refetchQueries(["meal-plan-meals",x.id])},disabled:$e,children:[e.jsx("i",{className:`fas fa-sync-alt ${$e?"fa-spin":""}`})," "]})]})]})]})]}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-outline-danger me-2",onClick:()=>{window.confirm("      ")&&bt()},children:[e.jsx("i",{className:"fas fa-trash me-1"})," "]}),e.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{p(!1),b||y(null)},children:""}),e.jsxs("button",{type:"button",className:"btn btn-success",onClick:()=>$(x),children:[e.jsx("i",{className:"fas fa-edit me-2"})," "]})]})]})})}),C&&U&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)",position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:9997},children:e.jsx("div",{className:"modal-dialog modal-xl",style:{zIndex:9998},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-edit text-success me-2"}),"  : ",U.title]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{M(!1),Q(null),bt()}})]}),e.jsxs("form",{onSubmit:A,children:[e.jsx("div",{className:"modal-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsxs("label",{className:"form-label",children:[" *",e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>Z(),disabled:z,title:"  ",children:e.jsx("i",{className:`fas fa-sync-alt ${z?"fa-spin":""}`})})]}),e.jsxs("select",{className:"form-select",value:d,onChange:S=>h(S.target.value),required:!0,disabled:z,children:[e.jsx("option",{value:"",children:z?" ...":" "}),V==null?void 0:V.map(S=>e.jsx("option",{value:S.id,children:S.name},S.id))]}),V&&V.length>0?e.jsx("div",{className:"form-text",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),V.length,"  "]})}):!z&&e.jsxs("div",{className:"form-text",children:[e.jsxs("small",{className:"text-warning",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-1"}),"   .        ."]}),e.jsx("div",{className:"mt-2",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>Z(),children:[e.jsx("i",{className:"fas fa-sync-alt me-1"})," "]})})]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("select",{name:"title",className:"form-select",value:u.title,onChange:ke,required:!0,children:r.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"description",className:"form-control",rows:"3",value:u.description,onChange:ke,placeholder:"      ..."})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"date",name:"start_date",className:"form-control",value:u.start_date,onChange:ke,required:!0})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  *"}),e.jsx("input",{type:"date",name:"end_date",className:"form-control",value:u.end_date,onChange:ke,required:!0})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label",children:"  "}),e.jsx("select",{name:"diet_plan",className:"form-control",value:u.diet_plan,onChange:ke,children:a.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"   *"}),e.jsx("input",{type:"number",name:"target_calories",className:"form-control",value:u.target_calories,onChange:ke,required:!0,placeholder:"1800"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-magic me-1"}),"         "]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  () *"}),e.jsx("input",{type:"number",name:"target_protein",className:"form-control",value:u.target_protein,onChange:ke,required:!0,placeholder:"120"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-magic me-1"}),"      "]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  () *"}),e.jsx("input",{type:"number",name:"target_carbs",className:"form-control",value:u.target_carbs,onChange:ke,required:!0,placeholder:"200"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-magic me-1"}),"         "]})]}),e.jsxs("div",{className:"col-md-6 mb-3",children:[e.jsx("label",{className:"form-label",children:"  () *"}),e.jsx("input",{type:"number",name:"target_fat",className:"form-control",value:u.target_fat,onChange:ke,required:!0,placeholder:"60"}),e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-magic me-1"}),"         "]})]}),e.jsxs("div",{className:"col-12 mb-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("textarea",{name:"notes",className:"form-control",rows:"2",value:u.notes,onChange:ke,placeholder:"     ..."})]})]})}),e.jsxs("div",{className:"modal-footer",children:[e.jsxs("button",{type:"button",className:"btn btn-outline-danger me-2",onClick:()=>{window.confirm("      ")&&bt()},children:[e.jsx("i",{className:"fas fa-trash me-1"})," "]}),e.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{M(!1),Q(null)},children:""}),u.diet_plan&&u.diet_plan!==""&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",className:"btn btn-primary me-2",onClick:()=>{U!=null&&U.id&&$t(U.id,u.diet_plan)},disabled:He.isLoading,children:[e.jsx("i",{className:`fas fa-magic ${He.isLoading?"fa-spin":""}`}),He.isLoading?" ...":"  "]}),He.isLoading&&e.jsxs("button",{type:"button",className:"btn btn-outline-danger btn-sm me-2",onClick:()=>{He.reset(),q.info("  ")},children:[e.jsx("i",{className:"fas fa-times"}),""]})]}),e.jsx("button",{type:"submit",className:"btn btn-success",disabled:ns.isLoading,children:ns.isLoading?e.jsx(ve,{size:"sm",color:"light"}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-save me-2"})," "]})})]})]})]})})}),b&&e.jsx("div",{className:"modal show d-block meal-selection-modal",style:{backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999,position:"fixed",top:0,left:0,width:"100%",height:"100%"},onClick:S=>{S.target===S.currentTarget&&(k(!1),f([]),v([]))},children:e.jsx("div",{className:"modal-dialog modal-xl",style:{zIndex:1e4,marginTop:"2rem"},children:e.jsxs("div",{className:"modal-content",style:{zIndex:10001,maxHeight:"90vh",overflowY:"auto"},children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("i",{className:"fas fa-utensils text-primary me-2"}),"  "]}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(!1),f([]),v([])}})]}),e.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),"   .       ."]}),m.length>0?e.jsx("div",{className:"meals-selection-container",children:(()=>{const S=oe(m);return Object.keys(S).map(se=>e.jsxs("div",{className:"day-meals mb-4",children:[e.jsxs("h6",{className:"day-header bg-light p-2 rounded mb-3",children:[e.jsx("i",{className:"fas fa-calendar-day text-primary me-2"}),se]}),e.jsx("div",{className:"row",children:Object.entries(S[se]).map(([ne,ae])=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header bg-success text-white",children:e.jsxs("h6",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-utensils me-2"}),ne]})}),e.jsx("div",{className:"card-body",children:ae.map((Y,de)=>{g.some(we=>we.day_of_week===Y.day_of_week&&we.meal_type_id===Y.meal_type_id);const ge=ye(Y);return console.log("Meal nutrition:",Y.name,ge),console.log("Meal ingredients:",Y.ingredients),e.jsx("div",{className:"meal-item mb-3 p-2",style:{border:"2px solid #e9ecef",borderRadius:"8px",backgroundColor:"#f8f9fa",transition:"all 0.3s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:e.jsx("div",{className:"meal-display",children:e.jsx("div",{className:"meal-info",children:e.jsxs("div",{className:"meal-details",children:[e.jsx("h6",{className:"meal-name",children:Y.name}),e.jsx("p",{className:"meal-description small text-muted mb-2",children:Y.description}),(console.log(" Doctor - Suggested meal ingredients debug:",Y.name,Y.ingredients),null),Y.ingredients&&Y.ingredients.length>0&&e.jsxs("div",{className:"ingredients mb-2",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-list me-1"}),e.jsx("strong",{children:":"})]}),e.jsx("div",{className:"ingredients-list",children:Y.ingredients.map((we,lt)=>e.jsxs("div",{className:"ingredient-item small",children:[" ",we.food_name_ar||we.food_name," (",we.amount,"g)",e.jsx("br",{}),e.jsxs("small",{className:"text-info",children:[": ",Math.round((parseFloat(we.calories_per_100g)||0)*(we.amount/100))," | : ",Math.round((parseFloat(we.protein_per_100g)||0)*(we.amount/100)),"g"]})]},lt))})]}),e.jsxs("div",{className:"nutrition-info",children:[e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-chart-pie me-1"}),e.jsx("strong",{children:"  :"})]}),e.jsxs("div",{className:"row small text-muted",children:[e.jsxs("div",{className:"col-6",children:[e.jsxs("div",{children:[": ",Math.round(ge.calories||0)]}),e.jsxs("div",{children:[": ",Math.round(ge.protein||0),"g"]})]}),e.jsxs("div",{className:"col-6",children:[e.jsxs("div",{children:[": ",Math.round(ge.carbs||0),"g"]}),e.jsxs("div",{children:[": ",Math.round(ge.fat||0),"g"]})]})]}),ge.calories===0&&e.jsxs("div",{className:"text-warning small",children:[e.jsx("i",{className:"fas fa-exclamation-triangle me-1"}),"    "]})]})]})})})},de)})})]})},ne))})]},se))})()}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-utensils text-muted",style:{fontSize:"3rem"}}),e.jsx("p",{className:"text-muted mt-2",children:"   "})]})]}),e.jsxs("div",{className:"modal-footer",style:{position:"sticky",bottom:0,backgroundColor:"white",borderTop:"1px solid #dee2e6"},children:[e.jsx("div",{className:"text-center w-100",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("i",{className:"fas fa-info-circle me-1"}),"    -   "]})}),e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{k(!1),f([]),v([])},children:""})]})]})})})]})},Ru=()=>{var h,u,j,x,y,_,p,m,f,g,v,b,k,C,M,U,Q,K,J,O;const{t}=ze(),{user:s}=Qe(),[n,r]=E.useState("month"),{data:a,isLoading:l}=xe(["financial-dashboard",n],()=>{const $=new URLSearchParams,N=new Date;if(n==="month")$.append("start_date",new Date(N.getFullYear(),N.getMonth(),1).toISOString().split("T")[0]),$.append("end_date",N.toISOString().split("T")[0]);else if(n==="week"){const H=new Date(N.getTime()-6048e5);$.append("start_date",H.toISOString().split("T")[0]),$.append("end_date",N.toISOString().split("T")[0])}return ee.get(`/api/reports/financial-dashboard/?${$}`).then(H=>H.data)},{enabled:!!s}),{data:i,isLoading:o}=xe("system-overview",()=>ee.get("/api/reports/system-overview/").then($=>$.data),{enabled:!!s}),c=$=>new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0}).format($),d=$=>new Intl.NumberFormat("ar-SA").format($);return l||o?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsx(ve,{size:"lg"})}):e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"bg-gradient-primary text-white rounded-4 p-4",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsxs("h2",{className:"mb-2",children:[" ",s==null?void 0:s.first_name,"     "]}),e.jsx("p",{className:"mb-0 opacity-75",children:"      "})]}),e.jsx("div",{className:"col-md-4 text-end",children:e.jsx("div",{className:"bg-white bg-opacity-25 rounded-circle p-3 d-inline-block",children:e.jsx("i",{className:"fas fa-chart-line fs-1"})})})]})})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0",children:" "}),e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{className:`btn btn-sm ${n==="week"?"btn-primary":"btn-outline-primary"}`,onClick:()=>r("week"),children:""}),e.jsx("button",{className:`btn btn-sm ${n==="month"?"btn-primary":"btn-outline-primary"}`,onClick:()=>r("month"),children:""})]})]})})})})}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-success mb-2",children:e.jsx("i",{className:"fas fa-dollar-sign fs-2"})}),e.jsx("h4",{className:"text-success mb-1",children:c(((h=a==null?void 0:a.revenue_metrics)==null?void 0:h.total_revenue)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-primary mb-2",children:e.jsx("i",{className:"fas fa-chart-line fs-2"})}),e.jsx("h4",{className:"text-primary mb-1",children:c(((u=a==null?void 0:a.revenue_metrics)==null?void 0:u.net_revenue)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-warning mb-2",children:e.jsx("i",{className:"fas fa-percentage fs-2"})}),e.jsx("h4",{className:"text-warning mb-1",children:c(((j=a==null?void 0:a.revenue_metrics)==null?void 0:j.total_discounts)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-info mb-2",children:e.jsx("i",{className:"fas fa-credit-card fs-2"})}),e.jsx("h4",{className:"text-info mb-1",children:c(((x=a==null?void 0:a.revenue_metrics)==null?void 0:x.total_fees)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-primary mb-2",children:e.jsx("i",{className:"fas fa-users fs-2"})}),e.jsx("h4",{className:"text-primary mb-1",children:d(((_=(y=i==null?void 0:i.user_counts)==null?void 0:y.find($=>$.role==="patient"))==null?void 0:_.count)||0)}),e.jsx("p",{className:"text-muted mb-0",children:""})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-success mb-2",children:e.jsx("i",{className:"fas fa-user-md fs-2"})}),e.jsx("h4",{className:"text-success mb-1",children:d(((m=(p=i==null?void 0:i.user_counts)==null?void 0:p.find($=>$.role==="doctor"))==null?void 0:m.count)||0)}),e.jsx("p",{className:"text-muted mb-0",children:""})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-warning mb-2",children:e.jsx("i",{className:"fas fa-calendar-check fs-2"})}),e.jsx("h4",{className:"text-warning mb-1",children:d(((f=i==null?void 0:i.health_metrics)==null?void 0:f.pending_appointments)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-info mb-2",children:e.jsx("i",{className:"fas fa-utensils fs-2"})}),e.jsx("h4",{className:"text-info mb-1",children:d(((g=i==null?void 0:i.health_metrics)==null?void 0:g.active_meal_plans)||0)}),e.jsx("p",{className:"text-muted mb-0",children:"  "})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-credit-card text-primary me-2"}),"   "]})}),e.jsx("div",{className:"card-body",children:((v=a==null?void 0:a.revenue_by_provider)==null?void 0:v.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:a.revenue_by_provider.map(($,N)=>e.jsxs("tr",{children:[e.jsx("td",{children:$.provider__display_name}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:$.count})}),e.jsx("td",{className:"fw-bold",children:c($.amount)}),e.jsx("td",{className:"text-muted",children:c($.fees)})]},N))})]})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-credit-card text-muted fs-2 mb-3"}),e.jsx("p",{className:"text-muted",children:"     "})]})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-chart-pie text-success me-2"}),"   "]})}),e.jsx("div",{className:"card-body",children:((b=a==null?void 0:a.revenue_by_service)==null?void 0:b.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:a.revenue_by_service.map(($,N)=>{const H=a.revenue_by_service.reduce((R,T)=>R+T.amount,0),L=($.amount/H*100).toFixed(1);return e.jsxs("tr",{children:[e.jsxs("td",{children:[$.service_type==="consultation"&&"",$.service_type==="meal_plan"&&" ",$.service_type==="subscription"&&""]}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-info",children:$.count})}),e.jsx("td",{className:"fw-bold",children:c($.amount)}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"progress flex-grow-1 me-2",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar bg-success",style:{width:`${L}%`}})}),e.jsxs("small",{children:[L,"%"]})]})})]},N)})})]})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-chart-pie text-muted fs-2 mb-3"}),e.jsx("p",{className:"text-muted",children:"     "})]})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-star text-warning me-2"})," "]})}),e.jsx("div",{className:"card-body",children:((k=i==null?void 0:i.top_doctors)==null?void 0:k.length)>0?e.jsx("div",{className:"list-group list-group-flush",children:i.top_doctors.map(($,N)=>e.jsx("div",{className:"list-group-item px-0 border-0",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"bg-warning bg-opacity-10 rounded-circle p-2 me-3",children:e.jsx("i",{className:"fas fa-user-md text-warning"})}),e.jsxs("div",{children:[e.jsx("h6",{className:"mb-0",children:$.name}),e.jsx("small",{className:"text-muted",children:$.specialization})]})]}),e.jsxs("div",{className:"text-end",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"text-warning me-1",children:$.rating}),e.jsx("i",{className:"fas fa-star text-warning"})]}),e.jsxs("small",{className:"text-muted",children:[$.total_reviews," "]})]})]})},N))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-user-md text-muted fs-2 mb-3"}),e.jsx("p",{className:"text-muted",children:"   "})]})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-clock text-info me-2"}),"  (7 )"]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row text-center",children:[e.jsx("div",{className:"col-6 mb-3",children:e.jsxs("div",{className:"bg-primary bg-opacity-10 rounded-3 p-3",children:[e.jsx("h4",{className:"text-primary mb-1",children:((C=i==null?void 0:i.recent_activity)==null?void 0:C.new_users)||0}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-6 mb-3",children:e.jsxs("div",{className:"bg-success bg-opacity-10 rounded-3 p-3",children:[e.jsx("h4",{className:"text-success mb-1",children:((M=i==null?void 0:i.recent_activity)==null?void 0:M.new_appointments)||0}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"bg-warning bg-opacity-10 rounded-3 p-3",children:[e.jsx("h4",{className:"text-warning mb-1",children:((U=i==null?void 0:i.recent_activity)==null?void 0:U.completed_payments)||0}),e.jsx("small",{className:"text-muted",children:" "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:"bg-info bg-opacity-10 rounded-3 p-3",children:[e.jsx("h4",{className:"text-info mb-1",children:((Q=i==null?void 0:i.recent_activity)==null?void 0:Q.new_meal_plans)||0}),e.jsx("small",{className:"text-muted",children:"  "})]})})]})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-tags text-success me-2"}),"  "]})}),e.jsx("div",{className:"card-body",children:((K=a==null?void 0:a.coupon_usage)==null?void 0:K.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "})]})}),e.jsx("tbody",{children:a.coupon_usage.map(($,N)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs("div",{children:[e.jsx("div",{className:"fw-bold",children:$.coupon__code}),e.jsx("small",{className:"text-muted",children:$.coupon__name})]})}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:$.usage_count})}),e.jsx("td",{className:"fw-bold text-success",children:c($.total_discount)})]},N))})]})}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("i",{className:"fas fa-tags text-muted fs-2 mb-3"}),e.jsx("p",{className:"text-muted",children:"      "})]})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h5",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-exclamation-triangle text-danger me-2"})," "]})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-danger bg-opacity-10 rounded-3 p-4 mb-3",children:[e.jsx("h3",{className:"text-danger mb-2",children:d(((J=a==null?void 0:a.outstanding_invoices)==null?void 0:J.count)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]}),e.jsxs("div",{className:"bg-warning bg-opacity-10 rounded-3 p-3",children:[e.jsx("h4",{className:"text-warning mb-1",children:c(((O=a==null?void 0:a.outstanding_invoices)==null?void 0:O.amount)||0)}),e.jsx("p",{className:"text-muted mb-0",children:"  "})]})]})})]})})]})]})},my=()=>{const{t}=ze();return e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-users text-primary me-2"})," "]}),e.jsx("p",{className:"text-muted",children:"   "})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center py-5",children:[e.jsx("i",{className:"fas fa-users text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:" "}),e.jsx("p",{className:"text-muted",children:"   "})]})})]})},hy=()=>{const{t}=ze();return e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-user-md text-success me-2"})," "]}),e.jsx("p",{className:"text-muted",children:"   "})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center py-5",children:[e.jsx("i",{className:"fas fa-user-md text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:" "}),e.jsx("p",{className:"text-muted",children:"   "})]})})]})},Mu=()=>{const{t}=ze();return e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-credit-card text-warning me-2"})," "]}),e.jsx("p",{className:"text-muted",children:"   "})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center py-5",children:[e.jsx("i",{className:"fas fa-credit-card text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:" "}),e.jsx("p",{className:"text-muted",children:"   "})]})})]})},Tu=()=>{var p,m,f,g,v,b,k,C,M,U,Q,K,J;const{t}=ze(),{user:s}=Qe(),[n,r]=E.useState("financial"),[a,l]=E.useState({start_date:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}),{data:i,isLoading:o}=xe(["financial-dashboard",a],()=>ee.get(`/api/reports/financial-dashboard/?start_date=${a.start_date}&end_date=${a.end_date}`).then(O=>O.data),{enabled:!!s&&n==="financial"}),{data:c,isLoading:d}=xe(["appointments-dashboard",a],()=>ee.get(`/api/reports/appointments-dashboard/?start_date=${a.start_date}&end_date=${a.end_date}`).then(O=>O.data),{enabled:!!s&&n==="appointments"}),{data:h,isLoading:u}=xe("patients-dashboard",()=>ee.get("/api/reports/patients-dashboard/").then(O=>O.data),{enabled:!!s&&n==="patients"}),j=O=>new Intl.NumberFormat("ar-IQ",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0}).format(O),x=O=>new Intl.NumberFormat("ar-SA").format(O),y=(O,$)=>{l(N=>({...N,[O]:$}))},_=O=>{alert(`    ${O}`)};return e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-chart-bar text-info me-2"})," "]}),e.jsx("p",{className:"text-muted",children:"    "})]}),e.jsxs("div",{className:"dropdown",children:[e.jsxs("button",{className:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown",children:[e.jsx("i",{className:"fas fa-download me-2"})," "]}),e.jsxs("ul",{className:"dropdown-menu",children:[e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>_("PDF"),children:"PDF"})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>_("Excel"),children:"Excel"})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",onClick:()=>_("CSV"),children:"CSV"})})]})]})]})})}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("input",{type:"date",className:"form-control",value:a.start_date,onChange:O=>y("start_date",O.target.value)})]}),e.jsxs("div",{className:"col-md-3",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsx("input",{type:"date",className:"form-control",value:a.end_date,onChange:O=>y("end_date",O.target.value)})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("label",{className:"form-label",children:" "}),e.jsxs("div",{className:"btn-group w-100",children:[e.jsx("button",{className:"btn btn-outline-primary",onClick:()=>{const O=new Date;l({start_date:O.toISOString().split("T")[0],end_date:O.toISOString().split("T")[0]})},children:""}),e.jsx("button",{className:"btn btn-outline-primary",onClick:()=>{const O=new Date,$=new Date(O.getTime()-7*24*60*60*1e3);l({start_date:$.toISOString().split("T")[0],end_date:O.toISOString().split("T")[0]})},children:" 7 "}),e.jsx("button",{className:"btn btn-outline-primary",onClick:()=>{const O=new Date,$=new Date(O.getFullYear(),O.getMonth(),1);l({start_date:$.toISOString().split("T")[0],end_date:O.toISOString().split("T")[0]})},children:" "})]})]})]})})})})}),e.jsxs("ul",{className:"nav nav-tabs mb-4",children:[e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${n==="financial"?"active":""}`,onClick:()=>r("financial"),children:[e.jsx("i",{className:"fas fa-dollar-sign me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${n==="appointments"?"active":""}`,onClick:()=>r("appointments"),children:[e.jsx("i",{className:"fas fa-calendar-check me-2"})," "]})}),e.jsx("li",{className:"nav-item",children:e.jsxs("button",{className:`nav-link ${n==="patients"?"active":""}`,onClick:()=>r("patients"),children:[e.jsx("i",{className:"fas fa-users me-2"})," "]})})]}),n==="financial"&&e.jsx("div",{children:o?e.jsx("div",{className:"d-flex justify-content-center py-5",children:e.jsx(ve,{size:"lg"})}):i?e.jsxs("div",{children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-success mb-2",children:e.jsx("i",{className:"fas fa-money-bill-wave fs-2"})}),e.jsx("h4",{className:"text-success mb-1",children:j(((p=i.revenue_metrics)==null?void 0:p.total_revenue)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-primary mb-2",children:e.jsx("i",{className:"fas fa-chart-line fs-2"})}),e.jsx("h4",{className:"text-primary mb-1",children:j(((m=i.revenue_metrics)==null?void 0:m.net_revenue)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-warning mb-2",children:e.jsx("i",{className:"fas fa-percentage fs-2"})}),e.jsx("h4",{className:"text-warning mb-1",children:j(((f=i.revenue_metrics)==null?void 0:f.total_discounts)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-info mb-2",children:e.jsx("i",{className:"fas fa-credit-card fs-2"})}),e.jsx("h4",{className:"text-info mb-1",children:j(((g=i.revenue_metrics)==null?void 0:g.total_fees)||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:"   "})}),e.jsx("div",{className:"card-body",children:((v=i.revenue_by_provider)==null?void 0:v.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:i.revenue_by_provider.map((O,$)=>e.jsxs("tr",{children:[e.jsx("td",{children:O.provider__display_name}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:O.count})}),e.jsx("td",{className:"fw-bold",children:j(O.amount)}),e.jsx("td",{className:"text-muted",children:j(O.fees)})]},$))})]})}):e.jsx("p",{className:"text-muted text-center py-4",children:"  "})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:"   "})}),e.jsx("div",{className:"card-body",children:((b=i.revenue_by_service)==null?void 0:b.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:i.revenue_by_service.map((O,$)=>{const N=i.revenue_by_service.reduce((L,R)=>L+R.amount,0),H=N>0?(O.amount/N*100).toFixed(1):0;return e.jsxs("tr",{children:[e.jsxs("td",{children:[O.service_type==="consultation"&&"",O.service_type==="meal_plan"&&" ",O.service_type==="subscription"&&""]}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-info",children:O.count})}),e.jsx("td",{className:"fw-bold",children:j(O.amount)}),e.jsxs("td",{children:[H,"%"]})]},$)})})]})}):e.jsx("p",{className:"text-muted text-center py-4",children:"  "})})]})}),e.jsx("div",{className:"col-12 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:((k=i.doctor_performance)==null?void 0:k.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:" "}),e.jsx("th",{children:"   "})]})}),e.jsx("tbody",{children:i.doctor_performance.map((O,$)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[". ",O.appointment__doctor__first_name," ",O.appointment__doctor__last_name]}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:O.appointments_count})}),e.jsx("td",{className:"fw-bold",children:j(O.total_revenue)}),e.jsx("td",{children:j(O.total_revenue/O.appointments_count)})]},$))})]})}):e.jsx("p",{className:"text-muted text-center py-4",children:"  "})})]})})]})]}):null}),n==="appointments"&&e.jsx("div",{children:d?e.jsx("div",{className:"d-flex justify-content-center py-5",children:e.jsx(ve,{size:"lg"})}):c?e.jsxs("div",{children:[e.jsx("div",{className:"row mb-4",children:(C=c.status_breakdown)==null?void 0:C.map((O,$)=>e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:`mb-2 ${O.status==="completed"?"text-success":O.status==="confirmed"?"text-info":O.status==="pending"?"text-warning":"text-danger"}`,children:e.jsx("i",{className:"fas fa-calendar-check fs-2"})}),e.jsx("h4",{className:"mb-1",children:x(O.count)}),e.jsxs("p",{className:"text-muted mb-0",children:[O.status==="completed"&&"",O.status==="confirmed"&&"",O.status==="pending"&&" ",O.status==="cancelled"&&""]})]})},$))}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:((M=c.type_breakdown)==null?void 0:M.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:c.type_breakdown.map((O,$)=>{const N=c.type_breakdown.reduce((L,R)=>L+R.count,0),H=N>0?(O.count/N*100).toFixed(1):0;return e.jsxs("tr",{children:[e.jsx("td",{children:O.appointment_type}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-primary",children:O.count})}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"progress flex-grow-1 me-2",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar bg-info",style:{width:`${H}%`}})}),e.jsxs("small",{children:[H,"%"]})]})})]},$)})})]})}):e.jsx("p",{className:"text-muted text-center py-4",children:"  "})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:((U=c.peak_hours)==null?void 0:U.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:" "})]})}),e.jsx("tbody",{children:c.peak_hours.map((O,$)=>e.jsxs("tr",{children:[e.jsxs("td",{children:[O.hour,":00"]}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"badge bg-warning me-2",children:O.count}),e.jsx("div",{className:"progress flex-grow-1",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar bg-warning",style:{width:`${O.count/Math.max(...c.peak_hours.map(N=>N.count))*100}%`}})})]})})]},$))})]})}):e.jsx("p",{className:"text-muted text-center py-4",children:"  "})})]})})]})]}):null}),n==="patients"&&e.jsx("div",{children:u?e.jsx("div",{className:"d-flex justify-content-center py-5",children:e.jsx(ve,{size:"lg"})}):h?e.jsxs("div",{children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-primary mb-2",children:e.jsx("i",{className:"fas fa-users fs-2"})}),e.jsx("h4",{className:"text-primary mb-1",children:x(h.total_patients||0)}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})}),e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-success mb-2",children:e.jsx("i",{className:"fas fa-user-plus fs-2"})}),e.jsx("h4",{className:"text-success mb-1",children:((Q=h.new_patients_trend)==null?void 0:Q.reduce((O,$)=>O+$.count,0))||0}),e.jsx("p",{className:"text-muted mb-0",children:"  (6 )"})]})}),e.jsx("div",{className:"col-md-4 mb-3",children:e.jsxs("div",{className:"dashboard-card text-center",children:[e.jsx("div",{className:"text-info mb-2",children:e.jsx("i",{className:"fas fa-chart-line fs-2"})}),e.jsx("h4",{className:"text-info mb-1",children:"85%"}),e.jsx("p",{className:"text-muted mb-0",children:" "})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:((K=h.gender_distribution)==null?void 0:K.length)>0?e.jsx("div",{className:"row text-center",children:h.gender_distribution.map((O,$)=>e.jsx("div",{className:"col-6",children:e.jsxs("div",{className:`bg-${O.gender==="male"?"primary":"success"} bg-opacity-10 rounded-3 p-3`,children:[e.jsx("h3",{className:`text-${O.gender==="male"?"primary":"success"} mb-1`,children:x(O.count)}),e.jsx("small",{className:"text-muted",children:O.gender==="male"?"":""})]})},$))}):e.jsx("p",{className:"text-muted text-center py-4",children:"  "})})]})}),e.jsx("div",{className:"col-lg-6 mb-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:((J=h.goal_distribution)==null?void 0:J.length)>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:h.goal_distribution.map((O,$)=>{const N=h.goal_distribution.reduce((L,R)=>L+R.count,0),H=N>0?(O.count/N*100).toFixed(1):0;return e.jsxs("tr",{children:[e.jsxs("td",{children:[O.goal==="lose_weight"&&" ",O.goal==="gain_weight"&&" ",O.goal==="maintain_weight"&&"  ",O.goal==="build_muscle"&&" ",O.goal==="improve_health"&&" "]}),e.jsx("td",{children:e.jsx("span",{className:"badge bg-success",children:O.count})}),e.jsxs("td",{children:[H,"%"]})]},$)})})]})}):e.jsx("p",{className:"text-muted text-center py-4",children:"  "})})]})})]})]}):null})]})},fy=()=>{const{t}=ze();return e.jsxs("div",{className:"fade-in",children:[e.jsx("div",{className:"row mb-4",children:e.jsxs("div",{className:"col-12",children:[e.jsxs("h2",{className:"mb-0",children:[e.jsx("i",{className:"fas fa-cog text-secondary me-2"})," "]}),e.jsx("p",{className:"text-muted",children:"   "})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"card-body text-center py-5",children:[e.jsx("i",{className:"fas fa-cog text-muted fs-1 mb-3"}),e.jsx("h5",{className:"text-muted",children:" "}),e.jsx("p",{className:"text-muted",children:"   "})]})})]})},py=()=>{const{user:t}=Qe(),[s,n]=E.useState([]),[r,a]=E.useState(null),[l,i]=E.useState(!1),[o,c]=E.useState(null),[d,h]=E.useState([]),[u,j]=E.useState(null),[x,y]=E.useState(""),[_,p]=E.useState(null),[m,f]=E.useState([]),[g,v]=E.useState(!1),[b,k]=E.useState(null),[C,M]=E.useState(""),[U,Q]=E.useState(""),[K,J]=E.useState(!1),[O,$]=E.useState(null),[N,H]=E.useState(null),L=(t==null?void 0:t.role)==="patient";E.useEffect(()=>{const P=new URLSearchParams(window.location.search),A=P.get("patient"),w=P.get("plan");console.log("URL Parameters:",{patient:A,plan:w}),console.log("Current URL:",window.location.href),A&&(console.log("Setting patient ID:",A),y(A),j(A)),w?(console.log("Setting meal plan ID:",w),k(w)):console.log("No plan parameter found in URL")},[]),E.useEffect(()=>{console.log("useEffect triggered - selectedMealPlanId:",b,"selectedPatient:",u),b&&u?(console.log("Fetching meal plan with ID:",b),ee.get(`/api/meals/meal-plans/${b}/`).then(P=>{const A=P.data;if(console.log("Selected meal plan:",A),A.diet_plan){const w=s.find(I=>{var W,re;return((W=I.name_ar)==null?void 0:W.toLowerCase().includes(A.diet_plan.toLowerCase()))||((re=I.name)==null?void 0:re.toLowerCase().includes(A.diet_plan.toLowerCase()))});w&&a(w)}if(A.start_date&&A.end_date){const w=new Date(A.start_date).toISOString().split("T")[0],I=new Date(A.end_date).toISOString().split("T")[0];M(w),Q(I),console.log("Dates set:",{startDateFormatted:w,endDateFormatted:I})}}).catch(P=>{console.error("Error fetching meal plan:",P)})):(console.log("Cannot fetch meal plan - missing selectedMealPlanId or selectedPatient"),console.log("selectedMealPlanId:",b),console.log("selectedPatient:",u))},[b,u,s]);const R={container:{maxWidth:"1200px",margin:"0 auto",padding:"20px",fontFamily:"Arial, sans-serif",direction:"rtl"},header:{textAlign:"center",marginBottom:"30px",color:"#2c3e50"},card:{background:"white",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",padding:"20px",marginBottom:"20px"},button:{background:"#3498db",color:"white",border:"none",padding:"12px 24px",borderRadius:"4px",cursor:"pointer",fontSize:"16px",margin:"5px"},buttonSecondary:{background:"#95a5a6",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",margin:"2px"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginTop:"20px"},templateCard:{border:"1px solid #ddd",borderRadius:"8px",padding:"15px",background:"#f9f9f9",cursor:"pointer",transition:"all 0.3s ease"},templateCardSelected:{border:"2px solid #3498db",background:"#f0f8ff"},mealSchedule:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px",marginTop:"20px"},mealCard:{background:"#f8f9fa",padding:"15px",borderRadius:"6px",border:"1px solid #e9ecef"},mealTitle:{fontSize:"18px",fontWeight:"bold",color:"#2c3e50",marginBottom:"10px",textAlign:"center"},foodItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",background:"white",borderRadius:"4px",marginBottom:"5px",border:"1px solid #eee"},nutritionGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px",marginTop:"20px"},nutritionCard:{background:"#e8f5e8",padding:"15px",borderRadius:"6px",textAlign:"center",border:"1px solid #4caf50"},progressContainer:{width:"100%",height:"20px",backgroundColor:"#e0e0e0",borderRadius:"10px",overflow:"hidden",marginTop:"5px"},progressBar:{height:"100%",borderRadius:"10px",transition:"width 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"12px",fontWeight:"bold"},nutritionDetail:{padding:"10px",background:"white",borderRadius:"4px",border:"1px solid #ddd"},nutritionValue:{fontSize:"20px",fontWeight:"bold",color:"#2c3e50",marginBottom:"5px"},nutritionLabel:{fontSize:"12px",color:"#666",textTransform:"uppercase"},loading:{textAlign:"center",padding:"20px",color:"#666"},summary:{background:"#e8f5e8",padding:"20px",borderRadius:"8px",marginTop:"20px",border:"1px solid #4caf50"}},T=[{id:1,name:"   -  1",name_ar:"   -  1",description:"       ",target_calories:2e3,meals:[{type:"",name:" ",foods:[{name:"",amount:50,calories:34},{name:"",amount:200,calories:84}]},{type:"  ",name:"  ",foods:[{name:"",amount:150,calories:78}]},{type:"",name:" ",foods:[{name:" ",amount:150,calories:248},{name:" ",amount:200,calories:50},{name:" ",amount:100,calories:111}]},{type:"  ",name:"  ",foods:[{name:" ",amount:150,calories:89}]},{type:"",name:" ",foods:[{name:" ",amount:250,calories:290},{name:"",amount:100,calories:20}]}]},{id:2,name:"   -  2",name_ar:"   -  2",description:"      ",target_calories:1800,meals:[{type:"",name:" ",foods:[{name:"",amount:100,calories:155},{name:" ",amount:50,calories:124},{name:"",amount:100,calories:16},{name:"",amount:100,calories:18}]},{type:"  ",name:"  ",foods:[{name:"",amount:15,calories:87}]},{type:"",name:" ",foods:[{name:"",amount:150,calories:309},{name:"",amount:150,calories:30},{name:" ",amount:30,calories:74}]},{type:"  ",name:"  ",foods:[{name:"",amount:100,calories:32}]},{type:"",name:" ",foods:[{name:"",amount:100,calories:132},{name:"",amount:150,calories:30}]}]},{id:3,name:"   -  3",name_ar:"   -  3",description:"       ",target_calories:1900,meals:[{type:"",name:" ",foods:[{name:"",amount:100,calories:59},{name:" ",amount:50,calories:124},{name:" ",amount:10,calories:88}]},{type:"  ",name:"  ",foods:[{name:"",amount:150,calories:71}]},{type:"",name:" ",foods:[{name:" ",amount:120,calories:300},{name:" ",amount:200,calories:50},{name:"",amount:100,calories:83}]},{type:"  ",name:"  ",foods:[{name:" ",amount:150,calories:89}]},{type:"",name:" ",foods:[{name:"",amount:100,calories:155},{name:"  ",amount:150,calories:38}]}]}];E.useEffect(()=>{V(),L?(j({id:t.id,name:`${t.first_name} ${t.last_name}`,email:t.email,phone:t.phone}),y(t.id),Z(t.id)):z()},[L,t]),E.useEffect(()=>{r&&N&&Hs(r,N)},[r,N]);const V=async()=>{i(!0);try{const P=await ee.get("/api/meals/meal-templates/");P.data&&P.data.templates?n(P.data.templates):n(T)}catch(P){console.error("    :",P),n(T)}finally{i(!1)}},z=async()=>{try{const P=await ee.get("/api/meals/patients/");P.data&&P.data.patients?h(P.data.patients):h([])}catch(P){console.error("    :",P),p("    ."),h([])}},Z=async P=>{try{let A;if(L?A=await ee.get("/api/auth/patient-profile/"):A=await ee.get(`/api/auth/doctor-patient-profile/?patient_id=${P}`),A.data){const w=A.data;console.log("=== API RESPONSE VERIFICATION ==="),console.log("API Response:",A.data),console.log("Profile keys:",Object.keys(w)),console.log("User data:",w.user);const I=X(w);H(I),console.log("Patient nutrition data calculated:",I)}}catch(A){console.error("     :",A),H({targetCalories:2e3,targetProtein:150,targetCarbs:250,targetFat:67})}},D=P=>({sedentary:"  -    ",light:"  -   1-3 /",moderate:"  -   3-5 /",active:"  -   6-7 /",very_active:"   -      "})[P]||" ",X=P=>{var js,Kt,ys,Gt;if(!P)return null;const{current_weight:A,height:w,goal:I,activity_level:W}=P,re=((js=P.user)==null?void 0:js.age)||P.age||30,oe=P.gender||"male";let he=re;if((Kt=P.user)!=null&&Kt.date_of_birth){const as=new Date(P.user.date_of_birth);he=new Date().getFullYear()-as.getFullYear()}let ye;oe==="male"?ye=10*A+6.25*w-5*he+5:ye=10*A+6.25*w-5*he-161,ye=Math.round(ye);const be={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,very_active:1.9}[W]||1.55,S=Math.round(ye*be);let F;P.daily_calories&&P.daily_calories>0?(F=Math.round(Number(P.daily_calories)),console.log("Using custom daily_calories from profile:",F)):(F=Math.round(S),console.log("Using calculated TDEE:",F)),console.log("=== PATIENT DATA VERIFICATION ==="),console.log("Raw profile data:",P),console.log("Extracted values:",{current_weight:P.current_weight,height:P.height,goal:P.goal,activity_level:P.activity_level,gender:P.gender,user_age:(ys=P.user)==null?void 0:ys.age,user_date_of_birth:(Gt=P.user)==null?void 0:Gt.date_of_birth}),console.log("=== CALCULATION DETAILS ==="),console.log("Step 1 - BMR Calculation:"),console.log(`Formula: (10 * ${A}) + (6.25 * ${w}) - (5 * ${he}) + ${oe==="male"?"5":"-161"}`),console.log(`BMR = ${ye}`),console.log("Step 2 - TDEE Calculation:"),console.log(`Activity multiplier for '${W}': ${be}`),console.log(`TDEE = ${ye} * ${be} = ${S}`),console.log("Step 3 - Daily Calories Required:"),console.log(`Daily Calories Required = TDEE = ${F}`),console.log("=== FINAL RESULT ==="),console.log("Final daily calories required:",F);const ne={lose_weight:2.2,maintain_weight:1.6,gain_weight:1.8,build_muscle:2,improve_health:1.8}[I]||1.6,ae=Math.round(A*ne),de={lose_weight:.25,maintain_weight:.3,gain_weight:.35,build_muscle:.25,improve_health:.3}[I]||.3,ge=F*de,we=Math.round(ge/9),lt=ae*4,it=we*9,Vt=F-lt-it,Vs=Math.round(Vt/4),Ks=Math.round(F/1e3*14),vn=Math.round(A*35);return{targetCalories:Math.round(F),targetProtein:Math.round(ae),targetCarbs:Math.round(Vs),targetFat:Math.round(we),targetFiber:Math.round(Ks),targetWater:Math.round(vn),bmr:Math.round(ye),tdee:Math.round(S),current_weight:A,height:w,age:he,gender:oe,goal:I,activity_level:W,activity_multiplier:be,bmr_formula:oe==="male"?`(10  ${A}) + (6.25  ${w}) - (5  ${he}) + 5`:`(10  ${A}) + (6.25  ${w}) - (5  ${he}) - 161`,tdee_formula:`${Math.round(ye)}  ${be}`,target_calories_formula:`${Math.round(S)} (TDEE )`}},te=P=>{console.log("Selecting patient:",P);try{j(P),y(P.id),console.log("Patient selected successfully:",P.id),ie(P.id),Z(P.id)}catch(A){console.error("Error selecting patient:",A)}},ie=async P=>{i(!0);try{const A=await ee.get(`/api/meals/meal-plans/?patient=${P}`);f(A.data.results||[]),v(!0)}catch(A){console.error("    :",A),p("    ")}finally{i(!1)}},ue=P=>{a(P),Hs(P,N)},$e=(P,A)=>{const w=[];console.log("generateDailyMealVariations called with:",{dietType:P,days:A,startDate:C});const I={:[[{name:"  ",ingredients:[{food_name_ar:" ",amount:80,calories:200,protein:6,carbs:40,fat:2},{food_name_ar:" ",amount:20,calories:180,protein:0,carbs:0,fat:20},{food_name_ar:" ",amount:80,calories:120,protein:12,carbs:2,fat:8},{food_name_ar:"",amount:60,calories:15,protein:1,carbs:3,fat:0},{food_name_ar:"",amount:40,calories:8,protein:0,carbs:2,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:150,calories:300,protein:45,carbs:0,fat:12},{food_name_ar:" ",amount:120,calories:400,protein:8,carbs:80,fat:2},{food_name_ar:" ",amount:150,calories:60,protein:3,carbs:12,fat:1},{food_name_ar:" ",amount:15,calories:135,protein:0,carbs:0,fat:15}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:120,calories:240,protein:36,carbs:0,fat:8},{food_name_ar:" ",amount:120,calories:48,protein:2,carbs:10,fat:1},{food_name_ar:" ",amount:150,calories:90,protein:9,carbs:6,fat:5}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:20,calories:130,protein:3,carbs:2,fat:13},{food_name_ar:" ",amount:100,calories:50,protein:1,carbs:12,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:100,calories:250,protein:25,carbs:5,fat:15},{food_name_ar:" ",amount:80,calories:32,protein:2,carbs:6,fat:1}]}],[{name:"  ",ingredients:[{food_name_ar:" ",amount:70,calories:175,protein:7,carbs:35,fat:2},{food_name_ar:"",amount:50,calories:80,protein:1,carbs:4,fat:7},{food_name_ar:" ",amount:60,calories:90,protein:8,carbs:1,fat:6},{food_name_ar:" ",amount:80,calories:20,protein:1,carbs:4,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:140,calories:280,protein:42,carbs:0,fat:10},{food_name_ar:" ",amount:100,calories:350,protein:7,carbs:70,fat:3},{food_name_ar:" ",amount:130,calories:52,protein:3,carbs:10,fat:1},{food_name_ar:" ",amount:25,calories:40,protein:0,carbs:1,fat:4}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:130,calories:260,protein:39,carbs:0,fat:10},{food_name_ar:" ",amount:110,calories:44,protein:2,carbs:9,fat:1},{food_name_ar:" ",amount:120,calories:72,protein:7,carbs:5,fat:4}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:25,calories:150,protein:6,carbs:3,fat:13},{food_name_ar:" ",amount:15,calories:60,protein:0,carbs:15,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:90,calories:225,protein:22,carbs:8,fat:12},{food_name_ar:" ",amount:100,calories:40,protein:2,carbs:8,fat:1}]}]],:[[{name:"  ",ingredients:[{food_name_ar:" ",amount:100,calories:155,protein:13,carbs:1,fat:11},{food_name_ar:" ",amount:50,calories:150,protein:3,carbs:2,fat:15},{food_name_ar:" ",amount:15,calories:135,protein:0,carbs:0,fat:15},{food_name_ar:" ",amount:20,calories:130,protein:3,carbs:2,fat:13}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:150,calories:375,protein:45,carbs:0,fat:20},{food_name_ar:" ",amount:200,calories:80,protein:4,carbs:16,fat:1},{food_name_ar:" ",amount:20,calories:180,protein:0,carbs:0,fat:20}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:120,calories:240,protein:36,carbs:0,fat:10},{food_name_ar:" ",amount:150,calories:60,protein:3,carbs:12,fat:1},{food_name_ar:" ",amount:60,calories:90,protein:9,carbs:1,fat:6}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:25,calories:163,protein:4,carbs:3,fat:16},{food_name_ar:" ",amount:40,calories:120,protein:2,carbs:2,fat:12}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:100,calories:250,protein:25,carbs:5,fat:15},{food_name_ar:" ",amount:80,calories:32,protein:2,carbs:6,fat:1}]}],[{name:"  ",ingredients:[{food_name_ar:" ",amount:120,calories:200,protein:16,carbs:2,fat:15},{food_name_ar:"",amount:60,calories:96,protein:1,carbs:5,fat:9},{food_name_ar:" ",amount:25,calories:150,protein:6,carbs:3,fat:13}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:140,calories:280,protein:42,carbs:0,fat:10},{food_name_ar:" ",amount:180,calories:72,protein:4,carbs:14,fat:1},{food_name_ar:"  ",amount:15,calories:135,protein:0,carbs:0,fat:15}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:130,calories:260,protein:39,carbs:0,fat:10},{food_name_ar:" ",amount:160,calories:64,protein:3,carbs:13,fat:1},{food_name_ar:" ",amount:50,calories:200,protein:12,carbs:1,fat:16}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:20,calories:120,protein:4,carbs:2,fat:10},{food_name_ar:" ",amount:60,calories:90,protein:9,carbs:3,fat:6}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:90,calories:225,protein:22,carbs:8,fat:12},{food_name_ar:" ",amount:100,calories:40,protein:2,carbs:8,fat:1}]}],[{name:"  ",ingredients:[{food_name_ar:" ",amount:75,calories:188,protein:6,carbs:38,fat:2},{food_name_ar:" ",amount:70,calories:105,protein:10,carbs:1,fat:7},{food_name_ar:" ",amount:18,calories:162,protein:0,carbs:0,fat:18},{food_name_ar:" ",amount:40,calories:20,protein:1,carbs:4,fat:0},{food_name_ar:" ",amount:45,calories:9,protein:0,carbs:2,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:160,calories:320,protein:48,carbs:0,fat:12},{food_name_ar:" ",amount:110,calories:385,protein:7,carbs:77,fat:2},{food_name_ar:" ",amount:140,calories:56,protein:3,carbs:11,fat:1},{food_name_ar:" ",amount:30,calories:50,protein:0,carbs:2,fat:5}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:130,calories:260,protein:39,carbs:0,fat:9},{food_name_ar:" ",amount:130,calories:52,protein:2,carbs:11,fat:1},{food_name_ar:" ",amount:140,calories:84,protein:8,carbs:7,fat:5}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:25,calories:150,protein:5,carbs:3,fat:13},{food_name_ar:" ",amount:20,calories:80,protein:0,carbs:20,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:95,calories:238,protein:24,carbs:6,fat:14},{food_name_ar:" ",amount:90,calories:36,protein:2,carbs:7,fat:1}]}],[{name:"  ",ingredients:[{food_name_ar:" ",amount:120,calories:186,protein:16,carbs:1,fat:13},{food_name_ar:" ",amount:60,calories:240,protein:15,carbs:1,fat:20},{food_name_ar:"  ",amount:12,calories:108,protein:0,carbs:0,fat:12},{food_name_ar:" ",amount:25,calories:163,protein:4,carbs:3,fat:16}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:160,calories:400,protein:48,carbs:0,fat:22},{food_name_ar:" ",amount:200,calories:80,protein:4,carbs:16,fat:1},{food_name_ar:" ",amount:25,calories:225,protein:0,carbs:0,fat:25}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:140,calories:280,protein:42,carbs:0,fat:12},{food_name_ar:" ",amount:170,calories:68,protein:3,carbs:14,fat:1},{food_name_ar:" ",amount:70,calories:105,protein:10,carbs:4,fat:7}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:25,calories:150,protein:5,carbs:3,fat:13},{food_name_ar:" ",amount:45,calories:135,protein:3,carbs:2,fat:14}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:105,calories:263,protein:26,carbs:9,fat:14},{food_name_ar:" ",amount:85,calories:34,protein:2,carbs:7,fat:1}]}]],:[[{name:"  ",ingredients:[{food_name_ar:" ",amount:150,calories:233,protein:20,carbs:2,fat:16},{food_name_ar:" ",amount:100,calories:150,protein:15,carbs:2,fat:10},{food_name_ar:" ",amount:60,calories:150,protein:5,carbs:30,fat:1},{food_name_ar:" ",amount:10,calories:90,protein:0,carbs:0,fat:10}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:180,calories:360,protein:54,carbs:0,fat:12},{food_name_ar:" ",amount:100,calories:350,protein:7,carbs:70,fat:2},{food_name_ar:" ",amount:120,calories:48,protein:2,carbs:10,fat:1},{food_name_ar:" ",amount:150,calories:90,protein:9,carbs:6,fat:5}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:140,calories:350,protein:42,carbs:0,fat:18},{food_name_ar:" ",amount:100,calories:40,protein:2,carbs:8,fat:1},{food_name_ar:" ",amount:80,calories:120,protein:12,carbs:4,fat:8}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:30,calories:195,protein:5,carbs:3,fat:20},{food_name_ar:" ",amount:60,calories:90,protein:9,carbs:1,fat:6}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:120,calories:300,protein:30,carbs:6,fat:18},{food_name_ar:" ",amount:80,calories:32,protein:2,carbs:6,fat:1}]}],[{name:"  ",ingredients:[{food_name_ar:" ",amount:80,calories:160,protein:30,carbs:0,fat:4},{food_name_ar:" ",amount:80,calories:120,protein:12,carbs:4,fat:8},{food_name_ar:" ",amount:50,calories:125,protein:5,carbs:25,fat:1},{food_name_ar:" ",amount:100,calories:60,protein:6,carbs:4,fat:3}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:160,calories:320,protein:48,carbs:0,fat:12},{food_name_ar:" ",amount:80,calories:280,protein:6,carbs:56,fat:2},{food_name_ar:" ",amount:100,calories:40,protein:2,carbs:8,fat:1},{food_name_ar:" ",amount:70,calories:105,protein:10,carbs:1,fat:7}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:130,calories:325,protein:39,carbs:0,fat:17},{food_name_ar:" ",amount:90,calories:36,protein:2,carbs:7,fat:1},{food_name_ar:" ",amount:60,calories:240,protein:15,carbs:1,fat:20}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:30,calories:180,protein:7,carbs:4,fat:16},{food_name_ar:" ",amount:50,calories:150,protein:3,carbs:2,fat:15}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:110,calories:275,protein:27,carbs:10,fat:15},{food_name_ar:" ",amount:100,calories:40,protein:2,carbs:8,fat:1}]}],[{name:"  ",ingredients:[{food_name_ar:" ",amount:140,calories:233,protein:19,carbs:2,fat:18},{food_name_ar:" ",amount:90,calories:135,protein:14,carbs:2,fat:9},{food_name_ar:" ",amount:55,calories:138,protein:4,carbs:28,fat:1},{food_name_ar:" ",amount:8,calories:72,protein:0,carbs:0,fat:8}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:170,calories:425,protein:51,carbs:0,fat:23},{food_name_ar:" ",amount:90,calories:315,protein:6,carbs:63,fat:2},{food_name_ar:" ",amount:110,calories:44,protein:2,carbs:9,fat:1},{food_name_ar:" ",amount:130,calories:78,protein:8,carbs:5,fat:4}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:150,calories:300,protein:45,carbs:0,fat:12},{food_name_ar:" ",amount:95,calories:38,protein:2,carbs:8,fat:1},{food_name_ar:" ",amount:70,calories:280,protein:17,carbs:1,fat:23}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:35,calories:210,protein:8,carbs:4,fat:18},{food_name_ar:" ",amount:70,calories:105,protein:10,carbs:1,fat:7}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:115,calories:288,protein:29,carbs:7,fat:17},{food_name_ar:" ",amount:85,calories:34,protein:2,carbs:7,fat:1}]}]],:[[{name:"  ",ingredients:[{food_name_ar:" ",amount:80,calories:200,protein:6,carbs:40,fat:2},{food_name_ar:" ",amount:80,calories:120,protein:12,carbs:2,fat:8},{food_name_ar:" ",amount:15,calories:135,protein:0,carbs:0,fat:15},{food_name_ar:"",amount:60,calories:15,protein:1,carbs:3,fat:0},{food_name_ar:"",amount:40,calories:8,protein:0,carbs:2,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:150,calories:300,protein:45,carbs:0,fat:10},{food_name_ar:" ",amount:120,calories:400,protein:8,carbs:80,fat:2},{food_name_ar:" ",amount:150,calories:60,protein:3,carbs:12,fat:1},{food_name_ar:" ",amount:120,calories:72,protein:7,carbs:5,fat:4}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:120,calories:240,protein:36,carbs:0,fat:10},{food_name_ar:" ",amount:120,calories:48,protein:2,carbs:10,fat:1},{food_name_ar:" ",amount:40,calories:100,protein:4,carbs:20,fat:1}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:120,calories:60,protein:1,carbs:15,fat:0},{food_name_ar:" ",amount:15,calories:98,protein:2,carbs:1,fat:10}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:100,calories:250,protein:25,carbs:5,fat:15},{food_name_ar:" ",amount:80,calories:32,protein:2,carbs:6,fat:1}]}],[{name:"  ",ingredients:[{food_name_ar:" ",amount:70,calories:175,protein:7,carbs:35,fat:2},{food_name_ar:" ",amount:60,calories:90,protein:8,carbs:1,fat:6},{food_name_ar:" ",amount:12,calories:108,protein:0,carbs:0,fat:12},{food_name_ar:" ",amount:80,calories:20,protein:1,carbs:4,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:140,calories:350,protein:42,carbs:0,fat:18},{food_name_ar:" ",amount:100,calories:350,protein:7,carbs:70,fat:3},{food_name_ar:" ",amount:130,calories:52,protein:3,carbs:10,fat:1},{food_name_ar:" ",amount:100,calories:60,protein:6,carbs:4,fat:3}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:110,calories:220,protein:33,carbs:0,fat:8},{food_name_ar:" ",amount:110,calories:44,protein:2,carbs:9,fat:1},{food_name_ar:" ",amount:30,calories:75,protein:2,carbs:15,fat:1}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:20,calories:120,protein:5,carbs:2,fat:10},{food_name_ar:" ",amount:10,calories:40,protein:0,carbs:10,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:90,calories:225,protein:22,carbs:8,fat:12},{food_name_ar:" ",amount:100,calories:40,protein:2,carbs:8,fat:1}]}],[{name:"  ",ingredients:[{food_name_ar:" ",amount:75,calories:188,protein:6,carbs:38,fat:2},{food_name_ar:" ",amount:70,calories:105,protein:10,carbs:1,fat:7},{food_name_ar:" ",amount:15,calories:135,protein:0,carbs:0,fat:15},{food_name_ar:" ",amount:50,calories:25,protein:1,carbs:5,fat:0},{food_name_ar:" ",amount:45,calories:9,protein:0,carbs:2,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:150,calories:375,protein:45,carbs:0,fat:20},{food_name_ar:" ",amount:110,calories:385,protein:7,carbs:77,fat:2},{food_name_ar:" ",amount:140,calories:56,protein:3,carbs:11,fat:1},{food_name_ar:" ",amount:120,calories:72,protein:7,carbs:6,fat:4}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:120,calories:240,protein:36,carbs:0,fat:8},{food_name_ar:" ",amount:130,calories:52,protein:2,carbs:11,fat:1},{food_name_ar:" ",amount:35,calories:88,protein:3,carbs:18,fat:1}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:20,calories:120,protein:4,carbs:2,fat:10},{food_name_ar:" ",amount:15,calories:60,protein:0,carbs:15,fat:0}]},{name:"  ",ingredients:[{food_name_ar:" ",amount:100,calories:250,protein:25,carbs:5,fat:15},{food_name_ar:" ",amount:90,calories:36,protein:2,carbs:7,fat:1}]}]]},W=P.toLowerCase();let re="";W.includes("")||W.includes("keto")?re="":W.includes("")||W.includes("protein")?re="":W.includes("")||W.includes("mediterranean")?re="":(W.includes("")||W.includes("balanced"))&&(re="");const oe=I[re]||I.;for(let he=1;he<=A;he++){const ye=(he-1)%oe.length,_e=oe[ye],be=new Date(C);be.setDate(be.getDate()+(he-1)),console.log(`Day ${he}:`,{startDate:C,currentDate:be.toISOString().split("T")[0],dateString:be.toLocaleDateString("ar-SA",{calendar:"gregory"})});const S={day:he,date:be,dateString:be.toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"}),template:{name_ar:`${P} -  ${he}`,name:`${P} - Day ${he}`},meals:_e.map((F,se)=>({...F,name:`${F.name}`,day:he,template_name:`${P} -  ${he}`,id:`day-${he}-meal-${se}`}))};w.push(S)}return w},Pt=(P,A)=>{const w=new Date(P),W=new Date(A).getTime()-w.getTime();return Math.ceil(W/(1e3*3600*24))+1},Ws=()=>{if(!C||!U||!r){alert("    ");return}console.log("Generating meal plan with dates:",{startDate:C,endDate:U,selectedTemplate:r.name_ar});const P=Pt(C,U);if(P<=0){alert("       ");return}if(P>30){alert("       30 ");return}console.log("Calculated days:",P);const A=$e(r.name_ar||r.name,P);console.log("Generated meal plan:",A),$(A),J(!0)},at=P=>{const A=(P==null?void 0:P.toLowerCase())||"";return A.includes("")||A.includes("keto")?{title:"    (5 )",meals:[{name:"   ",ingredients:["   (50g)","  (100g)","  (20ml)","  (2 )","  (200ml)"],nutrition:{calories:380,protein:25,carbs:8,fat:28}},{name:"   ",ingredients:["  (150g)","  (120g)","  (15ml)","  (80g)","  (100ml)"],nutrition:{calories:520,protein:45,carbs:12,fat:32}},{name:"   ",ingredients:["  (120g)","  (100g)","  (10ml)","  (60g)","  (150ml)"],nutrition:{calories:350,protein:35,carbs:6,fat:20}},{name:"   ",ingredients:["  (20g)","  (40g)","  (15g)","  (100ml)"],nutrition:{calories:280,protein:12,carbs:4,fat:24}},{name:"   ",ingredients:["  (100g)","  (80g)","  (10ml)","  (80ml)"],nutrition:{calories:320,protein:28,carbs:5,fat:22}}]}:A.includes("")||A.includes("weight_loss")?{title:"     (5 )",meals:[{name:"    ",ingredients:["  (60g)","    (60g)"," (40g)"," (30g)","  (200ml)"],nutrition:{calories:280,protein:15,carbs:35,fat:8}},{name:"    ",ingredients:["  (100g)","  (80g)","  (120g)","  (100g)"],nutrition:{calories:450,protein:35,carbs:45,fat:12}},{name:"    ",ingredients:["  (150ml)","  (40g)","  (80g)","  (100ml)"],nutrition:{calories:250,protein:12,carbs:35,fat:6}},{name:"    ",ingredients:["  (100g)","   (150ml)","  (100ml)"],nutrition:{calories:120,protein:6,carbs:20,fat:2}},{name:"    ",ingredients:["  (80g)","  (100g)","  (60g)","  (150ml)"],nutrition:{calories:200,protein:20,carbs:15,fat:8}}]}:A.includes("")||A.includes("protein")||A.includes("")||A.includes("muscle")||A.includes(" ")||A.includes("high_protein")?{title:"    (5 )",meals:[{name:"   ",ingredients:["  (3 )","  (100g)","  (80g)","  (10ml)"," (50g)","  (200ml)"],nutrition:{calories:450,protein:35,carbs:30,fat:20}},{name:"   ",ingredients:["  (150g)","  (100g)","  (120g)","  (100g)","  (100ml)"],nutrition:{calories:650,protein:55,carbs:50,fat:25}},{name:"   ",ingredients:["  (120g)","  (100g)","  (60g)","  (50g)","  (150ml)"],nutrition:{calories:420,protein:40,carbs:25,fat:18}},{name:"   ",ingredients:["  (25g)","  (50g)","  (150ml)","  (100ml)"],nutrition:{calories:350,protein:20,carbs:15,fat:25}},{name:"   ",ingredients:["  (120g)","  (80g)","  (40g)","  (100ml)"],nutrition:{calories:380,protein:35,carbs:20,fat:22}}]}:A.includes("")||A.includes("weight_gain")?{title:"     (5 )",meals:[{name:"    ",ingredients:["  (120g)","  (100g)","  (20ml)","  (15g)","  (200ml)"],nutrition:{calories:520,protein:22,carbs:55,fat:25}},{name:"    ",ingredients:["  (150g)","  (150g)","  (100g)","  (100ml)","  (80g)"],nutrition:{calories:780,protein:50,carbs:85,fat:28}},{name:"    ",ingredients:["  (120g)","  (100g)","  (80g)","  (150ml)"],nutrition:{calories:580,protein:35,carbs:60,fat:22}},{name:"    ",ingredients:["  (60g)","  (25g)","  (20g)","  (150ml)"],nutrition:{calories:420,protein:10,carbs:55,fat:20}},{name:"    ",ingredients:["  (100g)","  (100g)","  (15ml)","  (120ml)"],nutrition:{calories:450,protein:30,carbs:45,fat:20}}]}:A.includes("")||A.includes("mediterranean")||A.includes("")?{title:"    (5 )",meals:[{name:"   ",ingredients:["  (80g)","  (20ml)","  (80g)"," (60g)"," (40g)","  (15g)","  (200ml)"],nutrition:{calories:450,protein:20,carbs:40,fat:25}},{name:"   ",ingredients:["  (150g)","  (120g)","  (150g)","  (15ml)","  (100g)"," (1 )"],nutrition:{calories:580,protein:45,carbs:60,fat:20}},{name:"   ",ingredients:["  (120g)","  (120g)","  (10ml)","  (150ml)","  (50g)","  (20g)"],nutrition:{calories:420,protein:35,carbs:30,fat:18}},{name:"   ",ingredients:["  (20g)","  (100g)","  (150ml)","  (10g)","  (100ml)"],nutrition:{calories:280,protein:12,carbs:35,fat:12}},{name:"   ",ingredients:["  (100g)","  (80g)","  (10ml)","  (60g)","  (60g)","  (150ml)"],nutrition:{calories:380,protein:30,carbs:25,fat:20}}]}:A.includes("")||A.includes("low_carb")||A.includes("low_carbohydrate")?{title:"     (5 )",meals:[{name:"   ",ingredients:["  (3 )","  (100g)","  (15ml)"," (50g)"," (40g)","  (200ml)"],nutrition:{calories:380,protein:30,carbs:15,fat:25}},{name:"   ",ingredients:["  (150g)","  (200g)","  (15ml)","  (120g)","  (60g)"],nutrition:{calories:520,protein:50,carbs:20,fat:30}},{name:"   ",ingredients:["  (120g)","  (150g)","  (10ml)","  (150ml)","  (50g)"],nutrition:{calories:350,protein:40,carbs:12,fat:18}},{name:"    ",ingredients:["  (25g)","  (50g)","  (20g)","  (100ml)"],nutrition:{calories:320,protein:15,carbs:8,fat:28}},{name:"    ",ingredients:["  (100g)","  (100g)","  (10ml)","  (60g)","  (100ml)"],nutrition:{calories:380,protein:35,carbs:10,fat:25}}]}:A.includes("")||A.includes("diabetic")||A.includes("diabetes")?{title:"     (5 )",meals:[{name:"   ",ingredients:["  (60g)","    (80g)"," (50g)"," (40g)","  (10ml)","  (200ml)"],nutrition:{calories:320,protein:18,carbs:30,fat:12}},{name:"   ",ingredients:["  (120g)","  (80g)","  (150g)","  (100g)","  (10ml)"],nutrition:{calories:480,protein:40,carbs:45,fat:15}},{name:"   ",ingredients:["  (100g)","  (120g)","  (150ml)","  (40g)","  (15g)"],nutrition:{calories:350,protein:30,carbs:25,fat:12}},{name:"    ",ingredients:["  (100g)","   (150ml)","  (10g)","  (100ml)"],nutrition:{calories:180,protein:8,carbs:25,fat:6}},{name:"    ",ingredients:["  (80g)","  (80g)","  (50g)","  (150ml)"],nutrition:{calories:280,protein:25,carbs:15,fat:15}}]}:{title:"    (5 )",meals:[{name:"   ",ingredients:["  (100g)","   (80g)","  (15ml)","  (50g)"," (30g)","  (200ml)"],nutrition:{calories:420,protein:18,carbs:45,fat:18}},{name:"   ",ingredients:["  (150g)","  (120g)","  (100g)","  (100ml)","  (80g)","  (50g)"],nutrition:{calories:680,protein:45,carbs:75,fat:22}},{name:"   ",ingredients:["  (200ml)","  (60g)","  (150ml)","  (60g)","  (20g)","  (3 )"],nutrition:{calories:380,protein:16,carbs:55,fat:12}},{name:"   ",ingredients:["  (40g)","  (15g)","  (150ml)","  (25g)","  (10g)"],nutrition:{calories:320,protein:8,carbs:42,fat:14}},{name:"   ",ingredients:["  (100g)","  (80g)","  (50g)","  (60g)","  (100ml)","  (150ml)"],nutrition:{calories:450,protein:28,carbs:35,fat:20}}]}},Hs=(P,A=null)=>{let w=0,I=0,W=0,re=0,oe=0;console.log("Calculating nutrition for template:",P),P.meals&&P.meals.forEach(ye=>{console.log("Processing meal:",ye),ye.ingredients&&ye.ingredients.forEach(_e=>{console.log("Processing ingredient:",_e),w+=_e.calories||0,I+=_e.protein||0,W+=_e.carbs||0,re+=_e.fat||0,oe+=_e.fiber||0})});const he={total_calories:(A==null?void 0:A.targetCalories)||(A==null?void 0:A.tdee)||P.target_calories||2e3,total_protein:(A==null?void 0:A.targetProtein)||Math.round(I*10)/10,total_carbs:(A==null?void 0:A.targetCarbs)||Math.round(W*10)/10,total_fat:(A==null?void 0:A.targetFat)||Math.round(re*10)/10,total_fiber:(A==null?void 0:A.targetFiber)||Math.round(oe*10)/10,target_calories:(A==null?void 0:A.targetCalories)||(A==null?void 0:A.tdee)||P.target_calories||2e3,actual_calories:Math.round(w),actual_protein:Math.round(I*10)/10,actual_carbs:Math.round(W*10)/10,actual_fat:Math.round(re*10)/10,actual_fiber:Math.round(oe*10)/10};console.log("Nutrition summary:",he),c(he)},vs=P=>({:"","  ":"",:"","  ":"",:""})[P]||"",He=P=>P.includes("")||P.includes("breakfast")?5:P.includes("")||P.includes("lunch")?6:P.includes("")||P.includes("dinner")?7:8,$t=P=>{const A={"  ":174," ":174," ":219," ":218,"  ":14," ":209,"  ":209," ":105," ":108," ":109,:207," ":158," ":210,"  ":78," ":79," MCT":80," ":160," ":9,:9," ":24," ":10,:10," ":169,"   ":21," ":22," ":156," ":214,:203," ":7," ":19,"  ":20," ":168,:168,:8," ":10,:4," ":211,:31,:5," ":4," ":4," ":4," ":4," ":4,:4,:6," ":230," ":1," ":1,"  ":1,:1,"  ":1," ":212," ":226," ":184," ":130," ":131," ":134," ":1," ":1,:1,:66," ":222," ":1," ":1,:1,:2,:1,:3," ":16," ":11," ":16,:13," ":1," ":1,:1,:1,:1," ":216," ":1,:84," ":86," ":87};for(const[w,I]of Object.entries(A))if(P.includes(w)||w.includes(P))return I;return 1},ns=async()=>{if(!r||!u){alert("    ");return}i(!0);try{if(b){console.log("Updating existing meal plan:",b);const A=at((r==null?void 0:r.name_ar)||(r==null?void 0:r.name)).meals.map((I,W)=>({name:I.name,meal_type_id:He(I.name),day_of_week:1,description:I.name,instructions:"    ",prep_time:30,ingredients:I.ingredients.map(re=>{const oe=re.match(/^(.+?)\s*\((\d+)(g|ml)\)$/);return oe?{food_name:oe[1],amount:parseInt(oe[2]),unit:oe[3],food_id:$t(oe[1])}:{food_name:re,amount:100,unit:"g",food_id:$t(re)}})}));console.log("Saving selected meals:",A);const w=await ee.post(`/api/meals/meal-plans/${b}/save-selected-meals/`,{selected_meals:A});if(w.data){const I=L?"     !":`     : ${u.name}!`;alert(I),console.log("   :",w.data)}}else{const P=C||new Date().toISOString().split("T")[0],A=U||P;let w="balanced";const I=((r==null?void 0:r.name_ar)||(r==null?void 0:r.name)||"").toLowerCase();I.includes("")||I.includes("keto")?w="keto":I.includes("")||I.includes("protein")?w="high_protein":I.includes("")||I.includes("mediterranean")?w="mediterranean":I.includes("")||I.includes("vegetarian")?w="vegetarian":(I.includes("")||I.includes("low"))&&(w="low_carb");const W=await ee.post("/api/meals/meal-templates/create-plan/",{template_id:r.id,patient_id:u.id,start_date:P,end_date:A,diet_plan:w});if(W.data){const re=L?"     !":`     : ${u.name}!`;if(alert(re),console.log("   :",W.data),W.data.id&&iraqiMeals&&iraqiMeals.meals){console.log("   ...");try{const oe=iraqiMeals.meals.map((ye,_e)=>({name:ye.name,meal_type_id:He(ye.name),day_of_week:1,description:ye.name,instructions:"    ",prep_time:30,ingredients:ye.ingredients.map(be=>{const S=be.match(/^(.+?)\s*\((\d+)(g|ml)\)$/);return S?{food_name:S[1],amount:parseInt(S[2]),unit:S[3],food_id:$t(S[1])}:{food_name:be,amount:100,unit:"g",food_id:$t(be)}})})),he=await ee.post(`/api/meals/meal-plans/${W.data.id}/save-selected-meals/`,{selected_meals:oe});he.data&&console.log("     :",he.data)}catch(oe){console.error("     :",oe)}}typeof window<"u"&&window.location&&setTimeout(()=>{window.location.reload()},1e3)}}try{bt()}catch(P){console.error("Error in resetSelections:",P)}}catch(P){console.error("    :",P),alert("     ")}finally{i(!1)}},bt=()=>{try{a(null),j(null),y(""),c(null),console.log("Selections reset successfully")}catch(P){console.error("Error resetting selections:",P)}},rs=(P,A)=>!A||A===0?"0%":`${Math.min(P/A*100,100)}%`,ke=(P,A)=>{if(!A||A===0)return{backgroundColor:"#e0e0e0"};const w=P/A*100;return w<50?{backgroundColor:"#ff6b6b"}:w<80?{backgroundColor:"#ffa726"}:w<=100?{backgroundColor:"#66bb6a"}:{backgroundColor:"#ef5350"}};return e.jsxs("div",{style:R.container,children:[e.jsxs("div",{style:R.header,children:[e.jsx("h1",{children:"   "}),e.jsx("p",{children:L?"       ":"         "}),b&&e.jsxs("div",{className:"alert alert-info",style:{marginTop:"20px"},children:[e.jsx("i",{className:"fas fa-info-circle me-2"}),e.jsx("strong",{children:"  :"}),"       .       ."]})]}),!L&&e.jsxs("div",{style:R.card,children:[e.jsx("h3",{children:"  "}),l&&e.jsx("div",{style:R.loading,children:" ..."}),d.length===0&&!l&&e.jsx("div",{style:{padding:"15px",backgroundColor:"#f8d7da",borderRadius:"8px",border:"1px solid #f5c6cb",marginBottom:"20px"},children:e.jsxs("p",{children:[e.jsx("strong",{children:" :"}),"      "]})}),d.length>0&&e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"10px",fontWeight:"bold",color:"#333"},children:" :"}),e.jsxs("select",{value:(u==null?void 0:u.id)||"",onChange:P=>{const A=P.target.value;if(A){const w=d.find(I=>I.id===parseInt(A));if(w)try{te(w)}catch(I){console.error("Error selecting patient:",I)}}else j(null),y(null)},style:{width:"100%",padding:"12px",border:"2px solid #ddd",borderRadius:"8px",fontSize:"16px",backgroundColor:"#fff",cursor:"pointer"},children:[e.jsx("option",{value:"",children:"--   --"}),d.map(P=>e.jsxs("option",{value:P.id,children:[P.name," - ",P.email]},P.id))]})]}),u&&e.jsxs("div",{style:{padding:"15px",backgroundColor:"#e8f5e8",borderRadius:"8px",border:"1px solid #4caf50"},children:[e.jsxs("h4",{children:["  : ",u.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",u.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:":"})," ",u.phone||" "]}),e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",u.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"  :"}),u.daily_calories?`${u.daily_calories}   ()`:"    "]}),(N==null?void 0:N.targetCalories)&&e.jsxs("p",{children:[e.jsx("strong",{children:" :"}),e.jsxs("span",{style:{color:"#e74c3c",fontWeight:"bold"},children:[Math.round(N.targetCalories-500),"  "]}),e.jsxs("small",{style:{color:"#666",marginRight:"10px"},children:["( : ",Math.round(N.targetCalories)," - 500)"]})]}),e.jsx("p",{children:"     "})]})]}),L&&u&&e.jsxs("div",{style:R.card,children:[e.jsx("h3",{children:"  "}),e.jsxs("div",{style:{padding:"15px",backgroundColor:"#d4edda",borderRadius:"8px",border:"1px solid #c3e6cb"},children:[e.jsxs("h4",{children:["  ",u.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",u.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:":"})," ",u.phone||" "]}),(N==null?void 0:N.targetCalories)&&e.jsxs("p",{children:[e.jsx("strong",{children:" :"}),e.jsxs("span",{style:{color:"#e74c3c",fontWeight:"bold"},children:[Math.round(N.targetCalories-500),"  "]}),e.jsxs("small",{style:{color:"#666",marginRight:"10px"},children:["( : ",Math.round(N.targetCalories)," - 500)"]})]}),e.jsx("p",{children:"      "})]})]}),u&&g&&e.jsxs("div",{style:R.card,children:[e.jsxs("h3",{children:["   : ",u.name]}),l&&e.jsx("div",{style:R.loading,children:"   ..."}),m.length===0&&!l?e.jsx("div",{style:{padding:"15px",backgroundColor:"#f8d7da",borderRadius:"8px",border:"1px solid #f5c6cb"},children:e.jsxs("p",{children:[e.jsx("strong",{children:"    :"}),"       "]})}):e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:m.map(P=>e.jsxs("div",{style:{marginBottom:"15px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsxs("h4",{style:{margin:0,color:"#2c3e50"},children:[" ",P.title==="weight_loss"?" ":P.title==="weight_maintenance"?" ":P.title==="weight_gain"?" ":P.title==="health_maintenance"?"  ":P.title==="pregnant"?"":P.title==="breastfeeding"?"":P.title==="diabetic"?" ":P.title==="keto"?"":P.title==="balanced"?"":P.title==="low_carb"?" ":P.title==="muscle_gain"||P.title==="muscle_building"?" ":P.title==="high_protein"?" ":P.title]}),e.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",backgroundColor:P.is_active?"#d4edda":"#f8d7da",color:P.is_active?"#155724":"#721c24"},children:P.is_active?"":" "})]}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsxs("p",{style:{margin:"5px 0",color:"#6c757d"},children:[e.jsx("strong",{children:" :"})," ",new Date(P.start_date).toLocaleDateString("ar-SA",{calendar:"gregory"})]}),e.jsxs("p",{style:{margin:"5px 0",color:"#6c757d"},children:[e.jsx("strong",{children:" :"})," ",new Date(P.end_date).toLocaleDateString("ar-SA",{calendar:"gregory"})]}),e.jsxs("p",{style:{margin:"5px 0",color:"#6c757d"},children:[e.jsx("strong",{children:"  :"})," ",P.target_calories," /"]}),e.jsxs("p",{style:{margin:"5px 0",color:"#6c757d"},children:[e.jsx("strong",{children:" :"})," ",P.target_protein,"g"]}),e.jsxs("p",{style:{margin:"5px 0",color:"#6c757d"},children:[e.jsx("strong",{children:" :"})," ",P.target_carbs,"g"]}),e.jsxs("p",{style:{margin:"5px 0",color:"#6c757d"},children:[e.jsx("strong",{children:" :"})," ",P.target_fat,"g"]})]}),P.description&&e.jsxs("p",{style:{margin:"10px 0",color:"#495057",fontSize:"14px"},children:[e.jsx("strong",{children:" :"})," ",P.description]}),e.jsx("div",{style:{marginTop:"10px",paddingTop:"10px",borderTop:"1px solid #dee2e6"},children:e.jsxs("small",{style:{color:"#6c757d"},children:[e.jsx("strong",{children:"  :"})," ",new Date(P.created_at).toLocaleDateString("ar-SA",{calendar:"gregory"}),"  ",new Date(P.created_at).toLocaleTimeString("ar-SA")]})})]},P.id))})]}),e.jsxs("div",{style:R.card,children:[e.jsx("h3",{children:"   "}),(N==null?void 0:N.targetCalories)&&e.jsxs("div",{style:{padding:"15px",backgroundColor:"#e8f5e8",borderRadius:"8px",border:"1px solid #4caf50",marginBottom:"20px",textAlign:"center"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#2c3e50"},children:"   "}),e.jsxs("div",{style:{fontSize:"1.2em",fontWeight:"bold",color:"#e74c3c"},children:[Math.round(N.targetCalories-500),"  "]}),e.jsxs("small",{style:{color:"#666"},children:["( : ",Math.round(N.targetCalories)," - 500)"]})]}),!u&&!L&&e.jsx("div",{style:{padding:"15px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffeaa7",marginBottom:"20px"},children:e.jsxs("p",{children:[e.jsx("strong",{children:" :"}),"       "]})}),!u&&L&&e.jsx("div",{style:{padding:"15px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffeaa7",marginBottom:"20px"},children:e.jsxs("p",{children:[e.jsx("strong",{children:" :"}),"    ..."]})}),l&&e.jsx("div",{style:R.loading,children:" ..."}),e.jsx("div",{style:R.grid,children:s.map(P=>{const A=P.meals?P.meals.reduce((w,I)=>(I.ingredients&&I.ingredients.forEach(W=>{const oe=(W.amount||0)/100;w.calories+=(W.calories||0)*oe,w.protein+=(W.protein||0)*oe,w.carbs+=(W.carbs||0)*oe,w.fat+=(W.fat||0)*oe,w.fiber+=(W.fiber||0)*oe}),w),{calories:0,protein:0,carbs:0,fat:0,fiber:0}):{calories:0,protein:0,carbs:0,fat:0,fiber:0};return e.jsxs("div",{style:{...R.templateCard,...(r==null?void 0:r.id)===P.id?R.templateCardSelected:{},...u?{}:{opacity:.5,cursor:"not-allowed"}},onClick:()=>{if(u)try{ue(P)}catch(w){console.error("Error selecting template:",w)}},children:[e.jsxs("h4",{children:[" ",P.name_ar||P.name]}),e.jsx("p",{style:{color:"#666",fontSize:"0.9em",marginBottom:"15px"},children:P.description}),e.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"6px",marginBottom:"10px",border:"1px solid #e9ecef"},children:[e.jsx("h5",{style:{margin:"0 0 8px 0",color:"#2c3e50",fontSize:"0.9em"},children:"   :"}),(N==null?void 0:N.targetCalories)&&e.jsxs("div",{style:{backgroundColor:"#fff3cd",padding:"8px",borderRadius:"4px",marginBottom:"8px",border:"1px solid #ffeaa7",fontSize:"0.8em"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"  :"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#e74c3c"},children:[Math.round(N.targetCalories-500)," "]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"4px"},children:[e.jsx("span",{children:"  :"}),e.jsxs("span",{style:{fontWeight:"bold",color:Math.round(A.calories)<=Math.round(N.targetCalories-500)?"#27ae60":"#e74c3c"},children:[Math.round(A.calories)," "]})]}),e.jsx("div",{style:{fontSize:"0.7em",color:"#666",marginTop:"4px",textAlign:"center"},children:Math.round(A.calories)<=Math.round(N.targetCalories-500)?"  ":"   "})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"5px",fontSize:"0.8em"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:" :"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#e74c3c"},children:[Math.round(A.calories)," "]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:" :"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#27ae60"},children:[Math.round(A.protein*10)/10,"g"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:" :"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#f39c12"},children:[Math.round(A.carbs*10)/10,"g"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("span",{children:" :"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#8e44ad"},children:[Math.round(A.fat*10)/10,"g"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gridColumn:"1 / -1"},children:[e.jsx("span",{children:" :"}),e.jsxs("span",{style:{fontWeight:"bold",color:"#16a085"},children:[Math.round(A.fiber*10)/10,"g"]})]})]})]}),e.jsxs("div",{style:{fontSize:"0.8em",color:"#666"},children:[e.jsxs("p",{style:{margin:"5px 0"},children:[e.jsx("strong",{children:"  :"})," ",(N==null?void 0:N.targetCalories)||P.target_calories||" ","  "]}),e.jsxs("p",{style:{margin:"5px 0"},children:[e.jsx("strong",{children:"  :"})," ",(N==null?void 0:N.activity_level)||""," (",(N==null?void 0:N.activity_multiplier)||"1.55",")"]}),e.jsxs("p",{style:{margin:"5px 0"},children:[e.jsx("strong",{children:"  :"})," ",P.meals?P.meals.length:0," "]}),P.meals&&e.jsxs("p",{style:{margin:"5px 0"},children:[e.jsx("strong",{children:"  :"})," ",P.meals.map(w=>w.meal_type).join(" ")]})]}),e.jsx("div",{style:{marginTop:"10px",padding:"8px",backgroundColor:(r==null?void 0:r.id)===P.id?"#28a745":"#007bff",color:"white",borderRadius:"4px",textAlign:"center",fontSize:"0.9em",fontWeight:"bold"},children:(r==null?void 0:r.id)===P.id?" ":"  "})]},P.id)})})]}),r&&e.jsxs("div",{style:R.card,children:[e.jsxs("h3",{children:[" : ",r.name_ar||r.name]}),e.jsx("div",{style:R.mealSchedule,children:r.meals&&r.meals.map((P,A)=>e.jsxs("div",{style:R.mealCard,children:[e.jsxs("div",{style:R.mealTitle,children:[vs(P.meal_type)," ",P.meal_type]}),e.jsx("div",{children:e.jsx("strong",{children:P.name})}),e.jsx("div",{style:{marginTop:"10px"},children:P.ingredients&&P.ingredients.map((w,I)=>e.jsxs("div",{style:R.foodItem,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:w.food_name}),e.jsxs("span",{style:{fontSize:"0.9em",color:"#666"},children:[w.amount," "]})]}),e.jsxs("div",{style:{fontSize:"0.8em",color:"#555",marginTop:"5px"},children:[e.jsxs("span",{style:{marginRight:"10px"},children:[" ",Math.round(w.calories||0)," "]}),e.jsxs("span",{style:{marginRight:"10px"},children:[" ",Math.round((w.protein||0)*10)/10," "]}),e.jsxs("span",{style:{marginRight:"10px"},children:[" ",Math.round((w.carbs||0)*10)/10," "]}),e.jsxs("span",{style:{marginRight:"10px"},children:[" ",Math.round((w.fat||0)*10)/10," "]}),e.jsxs("span",{children:[" ",Math.round((w.fiber||0)*10)/10," "]})]})]},I))})]},A))}),e.jsxs("div",{style:R.card,children:[e.jsx("h3",{children:"    "}),e.jsx("p",{style:{color:"#666",marginBottom:"20px"},children:"          "}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"20px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#333"},children:"  :"}),e.jsx("input",{type:"date",value:C,onChange:P=>M(P.target.value),style:{width:"100%",padding:"10px",border:"2px solid #ddd",borderRadius:"6px",fontSize:"16px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold",color:"#333"},children:"  :"}),e.jsx("input",{type:"date",value:U,onChange:P=>Q(P.target.value),style:{width:"100%",padding:"10px",border:"2px solid #ddd",borderRadius:"6px",fontSize:"16px"}})]})]}),C&&U&&e.jsx("div",{style:{marginBottom:"15px",padding:"10px",backgroundColor:"#e8f5e8",borderRadius:"6px",border:"1px solid #4caf50"},children:e.jsxs("p",{style:{margin:0,color:"#2e7d32"},children:[e.jsx("strong",{children:"  :"})," ",Pt(C,U)," ",e.jsx("br",{}),e.jsx("strong",{children:":"})," ",new Date(C).toLocaleDateString("ar-SA",{calendar:"gregory"}),e.jsx("br",{}),e.jsx("strong",{children:":"})," ",new Date(U).toLocaleDateString("ar-SA",{calendar:"gregory"})]})}),e.jsx("button",{onClick:Ws,style:{...R.button,backgroundColor:"#28a745",width:"100%",padding:"15px",fontSize:"18px",fontWeight:"bold"},children:"     "})]}),K&&O&&e.jsxs("div",{style:R.card,children:[e.jsx("h2",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"#2c3e50",marginBottom:"20px"},children:"     "}),e.jsxs("p",{style:{color:"#666",marginBottom:"20px"},children:["     ",(r==null?void 0:r.name_ar)||(r==null?void 0:r.name)," ",new Date(C).toLocaleDateString("ar-SA",{calendar:"gregory"})," ",new Date(U).toLocaleDateString("ar-SA",{calendar:"gregory"})]}),e.jsx("div",{style:{maxHeight:"600px",overflowY:"auto"},children:O.map((P,A)=>e.jsxs("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6"},children:[e.jsxs("h4",{style:{color:"#2c3e50",marginBottom:"15px",textAlign:"center",backgroundColor:"#e9ecef",padding:"10px",borderRadius:"6px"},children:["  ",P.day," - ",P.dateString||P.date.toLocaleDateString("ar-SA",{calendar:"gregory",weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),P.template&&e.jsxs("div",{style:{marginBottom:"15px",padding:"8px",backgroundColor:"#d4edda",borderRadius:"6px",border:"1px solid #4caf50",textAlign:"center"},children:[e.jsxs("strong",{style:{color:"#2e7d32"},children:["  : ",P.template.name_ar||P.template.name]}),P.template.description&&e.jsx("div",{style:{fontSize:"0.9em",color:"#2e7d32",marginTop:"5px"},children:P.template.description})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"10px"},children:P.meals.map((w,I)=>e.jsxs("div",{style:{backgroundColor:"white",padding:"12px",borderRadius:"6px",border:"1px solid #ddd"},children:[e.jsx("h5",{style:{color:"#d84315",marginBottom:"8px",fontSize:"0.9em"},children:w.name}),e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsx("strong",{style:{fontSize:"0.8em"},children:":"}),e.jsx("ul",{style:{margin:"5px 0",paddingRight:"15px",fontSize:"0.8em"},children:w.ingredients&&w.ingredients.map((W,re)=>e.jsxs("li",{children:[W.food_name_ar||W.food_name," - ",W.amount,"g"]},re))})]}),e.jsx("div",{style:{fontSize:"0.8em",color:"#666"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:[" ",Math.round(w.ingredients?w.ingredients.reduce((W,re)=>W+(re.calories||0),0):0)," "]}),e.jsxs("span",{children:[" ",Math.round((w.ingredients?w.ingredients.reduce((W,re)=>W+(re.protein||0),0):0)*10)/10,"g"]}),e.jsxs("span",{children:[" ",Math.round((w.ingredients?w.ingredients.reduce((W,re)=>W+(re.carbs||0),0):0)*10)/10,"g"]}),e.jsxs("span",{children:[" ",Math.round((w.ingredients?w.ingredients.reduce((W,re)=>W+(re.fat||0),0):0)*10)/10,"g"]})]})})]},I))}),e.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#e8f5e8",borderRadius:"6px",border:"1px solid #4caf50"},children:[e.jsxs("h6",{style:{margin:"0 0 5px 0",color:"#2e7d32"},children:["   ",P.day,":"]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-around",fontSize:"0.9em",color:"#2e7d32"},children:[e.jsxs("span",{children:[" ",N!=null&&N.targetCalories?Math.round(N.targetCalories-500):Math.round((N==null?void 0:N.tdee)||2e3)," "]}),e.jsxs("span",{children:[" ",(N==null?void 0:N.targetProtein)||0,"g "]}),e.jsxs("span",{children:[" ",(N==null?void 0:N.targetCarbs)||0,"g "]}),e.jsxs("span",{children:[" ",(N==null?void 0:N.targetFat)||0,"g "]})]})]})]},A))}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"1px solid #ffc107"},children:[e.jsx("h5",{style:{color:"#856404",marginBottom:"10px"},children:"   :"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px",fontSize:"0.9em",color:"#856404"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"  :"})," ",O.length," "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"  :"})," ",Math.round(O.reduce((P,A)=>P+A.meals.reduce((w,I)=>w+(I.ingredients?I.ingredients.reduce((W,re)=>W+(re.calories||0),0):0),0),0)/O.length)," /"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"  :"})," ",Math.round(O.reduce((P,A)=>P+A.meals.reduce((w,I)=>w+(I.ingredients?I.ingredients.reduce((W,re)=>W+(re.protein||0),0):0),0),0)/O.length*10)/10,"g/"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"  :"})," ",Math.round(O.reduce((P,A)=>P+A.meals.reduce((w,I)=>w+(I.ingredients?I.ingredients.reduce((W,re)=>W+(re.carbs||0),0):0),0),0)/O.length*10)/10,"g/"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"  :"})," ",Math.round(O.reduce((P,A)=>P+A.meals.reduce((w,I)=>w+(I.ingredients?I.ingredients.reduce((W,re)=>W+(re.fat||0),0):0),0),0)/O.length*10)/10,"g/"]})]})]})]}),(()=>{const P=at((r==null?void 0:r.name_ar)||(r==null?void 0:r.name)),A=P.meals.reduce((w,I)=>({calories:w.calories+I.nutrition.calories,protein:w.protein+I.nutrition.protein,carbs:w.carbs+I.nutrition.carbs,fat:w.fat+I.nutrition.fat}),{calories:0,protein:0,carbs:0,fat:0});return e.jsxs("div",{style:{marginTop:"30px",padding:"20px",backgroundColor:"#fff8e1",borderRadius:"10px",border:"2px solid #ffb74d"},children:[e.jsx("h3",{style:{color:"#e65100",marginBottom:"20px",textAlign:"center"},children:P.title}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"15px"},children:P.meals.map((w,I)=>e.jsxs("div",{style:{backgroundColor:"white",padding:"15px",borderRadius:"8px",border:"1px solid #ddd"},children:[e.jsx("h4",{style:{color:"#d84315",marginBottom:"10px"},children:w.name}),e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsx("strong",{children:":"}),e.jsx("ul",{style:{margin:"5px 0",paddingRight:"20px"},children:w.ingredients.map((W,re)=>e.jsx("li",{children:W},re))})]}),e.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs("span",{children:[" : ",w.nutrition.calories]}),e.jsxs("span",{children:[" : ",w.nutrition.protein,"g"]}),e.jsxs("span",{children:[" : ",w.nutrition.carbs,"g"]}),e.jsxs("span",{children:[" : ",w.nutrition.fat,"g"]})]})})]},I))}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#e8f5e8",borderRadius:"8px",border:"1px solid #4caf50"},children:[e.jsx("h4",{style:{color:"#2e7d32",marginBottom:"10px"},children:"     :"}),e.jsxs("div",{style:{marginBottom:"15px",padding:"15px",backgroundColor:"#f0f8f0",borderRadius:"6px",border:"1px solid #4caf50"},children:[e.jsx("h5",{style:{color:"#2e7d32",marginBottom:"15px",textAlign:"center"},children:"    "}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px",fontSize:"0.9em"},children:[e.jsxs("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #ddd"},children:[e.jsx("strong",{style:{color:"#2c3e50"},children:"  :"}),e.jsxs("div",{style:{marginTop:"8px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",(u==null?void 0:u.name)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",(N==null?void 0:N.current_weight)||" "," "]}),e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",(N==null?void 0:N.height)||" "," "]}),e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",(N==null?void 0:N.age)||" "," "]})]})]}),e.jsxs("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #ddd"},children:[e.jsx("strong",{style:{color:"#2c3e50"},children:"  :"}),e.jsxs("div",{style:{marginTop:"8px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",(N==null?void 0:N.activity_level)||""]}),e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",(N==null?void 0:N.activity_multiplier)||"1.55"]}),e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",D(N==null?void 0:N.activity_level)]})]})]}),e.jsxs("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #ddd"},children:[e.jsx("strong",{style:{color:"#2c3e50"},children:"  :"}),e.jsxs("div",{style:{marginTop:"8px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",(r==null?void 0:r.name_ar)||(r==null?void 0:r.name)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:":"})," ",(N==null?void 0:N.goal)||" "]}),e.jsxs("div",{children:[e.jsx("strong",{children:" :"})," ",N!=null&&N.targetCalories?Math.round(N.targetCalories-500):(r==null?void 0:r.target_calories)||" "," /"]})]})]}),e.jsxs("div",{style:{padding:"10px",backgroundColor:"white",borderRadius:"6px",border:"1px solid #ddd"},children:[e.jsx("strong",{style:{color:"#2c3e50"},children:"  :"}),e.jsxs("div",{style:{marginTop:"8px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"BMR:"})," ",(N==null?void 0:N.bmr)||" "," "]}),e.jsxs("div",{children:[e.jsx("strong",{children:"TDEE:"})," ",(N==null?void 0:N.tdee)||" "," "]}),e.jsxs("div",{children:[e.jsx("strong",{children:":"})," 500  "]}),e.jsxs("div",{style:{fontSize:"0.8em",color:"#666",marginTop:"5px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:" BMR:"})," ",N==null?void 0:N.bmr_formula]}),e.jsxs("div",{children:[e.jsx("strong",{children:" TDEE:"})," ",N==null?void 0:N.tdee_formula]}),e.jsxs("div",{children:[e.jsx("strong",{children:" :"})," ",N==null?void 0:N.target_calories_formula]})]})]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"10px",fontSize:"0.9em"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"10px",backgroundColor:"white",borderRadius:"6px"},children:[e.jsx("div",{style:{fontWeight:"bold",color:"#e74c3c",fontSize:"1.2em"},children:(N==null?void 0:N.targetCalories)||(r==null?void 0:r.target_calories)||A.calories}),e.jsx("div",{children:"  "}),e.jsxs("div",{style:{fontSize:"0.8em",color:"#666",marginTop:"5px"},children:["(: ",A.calories,")"]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"10px",backgroundColor:"white",borderRadius:"6px"},children:[e.jsxs("div",{style:{fontWeight:"bold",color:"#27ae60",fontSize:"1.2em"},children:[Math.round(((N==null?void 0:N.targetCalories)||(r==null?void 0:r.target_calories)||2e3)*.25/4),"g"]}),e.jsx("div",{children:"  "}),e.jsxs("div",{style:{fontSize:"0.8em",color:"#666",marginTop:"5px"},children:["(: ",A.protein,"g)"]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"10px",backgroundColor:"white",borderRadius:"6px"},children:[e.jsxs("div",{style:{fontWeight:"bold",color:"#f39c12",fontSize:"1.2em"},children:[Math.round(((N==null?void 0:N.targetCalories)||(r==null?void 0:r.target_calories)||2e3)*.45/4),"g"]}),e.jsx("div",{children:"  "}),e.jsxs("div",{style:{fontSize:"0.8em",color:"#666",marginTop:"5px"},children:["(: ",A.carbs,"g)"]})]}),e.jsxs("div",{style:{textAlign:"center",padding:"10px",backgroundColor:"white",borderRadius:"6px"},children:[e.jsxs("div",{style:{fontWeight:"bold",color:"#8e44ad",fontSize:"1.2em"},children:[Math.round(((N==null?void 0:N.targetCalories)||(r==null?void 0:r.target_calories)||2e3)*.3/9),"g"]}),e.jsx("div",{children:"  "}),e.jsxs("div",{style:{fontSize:"0.8em",color:"#666",marginTop:"5px"},children:["(: ",A.fat,"g)"]})]})]}),e.jsxs("div",{style:{marginTop:"15px",padding:"10px",backgroundColor:"#fff3cd",borderRadius:"6px",border:"1px solid #ffc107"},children:[e.jsx("h5",{style:{color:"#856404",marginBottom:"8px"},children:"     :"}),e.jsxs("div",{style:{fontSize:"0.9em",color:"#856404"},children:[e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:" :"}),A.calories>=(N!=null&&N.targetCalories?Math.round(N.targetCalories-500):(r==null?void 0:r.target_calories)||2e3)*.9?"    ":"    ","(",Math.round(A.calories/(N!=null&&N.targetCalories?Math.round(N.targetCalories-500):(r==null?void 0:r.target_calories)||2e3)*100),"%  )"]}),e.jsxs("div",{style:{marginBottom:"5px"},children:[e.jsx("strong",{children:":"}),A.protein>=Math.round((N!=null&&N.targetCalories?Math.round(N.targetCalories-500):(r==null?void 0:r.target_calories)||2e3)*.25/4)*.9?"  ":"   ","(",Math.round(A.protein/Math.round((N!=null&&N.targetCalories?Math.round(N.targetCalories-500):(r==null?void 0:r.target_calories)||2e3)*.25/4)*100),"%  )"]}),e.jsxs("div",{children:[e.jsx("strong",{children:" :"}),Math.abs(A.calories-(N!=null&&N.targetCalories?Math.round(N.targetCalories-500):(r==null?void 0:r.target_calories)||2e3))<=200?"  ":"   "]})]})]})]})]})})(),r&&(()=>{const A=at((r==null?void 0:r.name_ar)||(r==null?void 0:r.name)).meals.reduce((I,W)=>({calories:I.calories+W.nutrition.calories,protein:I.protein+W.nutrition.protein,carbs:I.carbs+W.nutrition.carbs,fat:I.fat+W.nutrition.fat,fiber:I.fiber+(W.nutrition.fiber||0)}),{calories:0,protein:0,carbs:0,fat:0,fiber:0}),w=o&&o.total_calories>0?o:{total_calories:A.calories,total_protein:A.protein,total_carbs:A.carbs,total_fat:A.fat,total_fiber:A.fiber,target_calories:(N==null?void 0:N.targetCalories)||(r==null?void 0:r.target_calories)||2e3};return e.jsxs("div",{children:[e.jsx("h4",{children:"   "}),e.jsxs("div",{style:R.nutritionGrid,children:[e.jsxs("div",{style:R.nutritionCard,children:[e.jsx("div",{style:R.nutritionValue,children:N!=null&&N.targetCalories?Math.round(N.targetCalories-500):Math.round((N==null?void 0:N.tdee)||w.total_calories)}),e.jsx("div",{style:R.nutritionLabel,children:" "})]}),e.jsxs("div",{style:R.nutritionCard,children:[e.jsxs("div",{style:R.nutritionValue,children:[(N==null?void 0:N.targetProtein)||w.total_protein,""]}),e.jsx("div",{style:R.nutritionLabel,children:""})]}),e.jsxs("div",{style:R.nutritionCard,children:[e.jsxs("div",{style:R.nutritionValue,children:[(N==null?void 0:N.targetCarbs)||w.total_carbs,""]}),e.jsx("div",{style:R.nutritionLabel,children:""})]}),e.jsxs("div",{style:R.nutritionCard,children:[e.jsxs("div",{style:R.nutritionValue,children:[(N==null?void 0:N.targetFat)||w.total_fat,""]}),e.jsx("div",{style:R.nutritionLabel,children:""})]}),e.jsxs("div",{style:R.nutritionCard,children:[e.jsxs("div",{style:R.nutritionValue,children:[(N==null?void 0:N.targetFiber)||w.total_fiber,""]}),e.jsx("div",{style:R.nutritionLabel,children:""})]})]}),e.jsxs("div",{style:R.summary,children:[e.jsx("h4",{children:"   :"}),e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",N!=null&&N.targetCalories?Math.round(N.targetCalories-500):Math.round((N==null?void 0:N.tdee)||w.target_calories),"  "]}),e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",w.actual_calories||w.total_calories,"  "]}),e.jsxs("p",{children:[e.jsx("strong",{children:" :"})," ",Math.round((w.actual_calories||w.total_calories)/(N!=null&&N.targetCalories?Math.round(N.targetCalories-500):(N==null?void 0:N.tdee)||w.target_calories)*100),"%"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"  :"})," ",N!=null&&N.targetCalories?Math.round(N.targetProtein*4/N.targetCalories*100):0,"% |  ",N!=null&&N.targetCalories?Math.round(N.targetCarbs*4/N.targetCalories*100):0,"% |  ",N!=null&&N.targetCalories?Math.round(N.targetFat*9/N.targetCalories*100):0,"%"]})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"8px"},children:[e.jsx("h5",{children:"   :"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",marginTop:"10px"},children:[e.jsxs("div",{style:R.nutritionDetail,children:[e.jsx("strong",{children:" :"})," ",N!=null&&N.targetCalories?Math.round(N.targetCalories-500):w.total_calories," ",e.jsx("div",{style:R.progressContainer,children:e.jsx("div",{style:{...R.progressBar,width:rs(N!=null&&N.targetCalories?Math.round(N.targetCalories-500):w.total_calories,w.target_calories),backgroundColor:ke(N!=null&&N.targetCalories?Math.round(N.targetCalories-500):w.total_calories,w.target_calories).backgroundColor},children:rs(N!=null&&N.targetCalories?Math.round(N.targetCalories-500):w.total_calories,w.target_calories)})})]}),e.jsxs("div",{style:R.nutritionDetail,children:[e.jsx("strong",{children:":"})," ",w.total_protein," ",e.jsxs("div",{style:{fontSize:"0.9em",color:"#666"},children:["(",N!=null&&N.targetCalories?(w.total_protein*4/Math.round(N.targetCalories-500)*100).toFixed(1):w.total_calories>0?(w.total_protein*4/w.total_calories*100).toFixed(1):0,"%  )"]})]}),e.jsxs("div",{style:R.nutritionDetail,children:[e.jsx("strong",{children:":"})," ",w.total_carbs," ",e.jsxs("div",{style:{fontSize:"0.9em",color:"#666"},children:["(",N!=null&&N.targetCalories?(w.total_carbs*4/Math.round(N.targetCalories-500)*100).toFixed(1):w.total_calories>0?(w.total_carbs*4/w.total_calories*100).toFixed(1):0,"%  )"]})]}),e.jsxs("div",{style:R.nutritionDetail,children:[e.jsx("strong",{children:":"})," ",w.total_fat," ",e.jsxs("div",{style:{fontSize:"0.9em",color:"#666"},children:["(",N!=null&&N.targetCalories?(w.total_fat*9/Math.round(N.targetCalories-500)*100).toFixed(1):w.total_calories>0?(w.total_fat*9/w.total_calories*100).toFixed(1):0,"%  )"]})]}),e.jsxs("div",{style:R.nutritionDetail,children:[e.jsx("strong",{children:":"})," ",w.total_fiber," ",e.jsx("div",{style:{fontSize:"0.9em",color:"#666"},children:"( )"})]})]})]})]})})(),e.jsxs("div",{style:{marginTop:"20px",textAlign:"center"},children:[e.jsx("button",{style:R.button,onClick:ns,disabled:l||!u,children:l?" ...":"  "}),e.jsx("button",{style:R.buttonSecondary,onClick:()=>{try{bt()}catch(P){console.error("Error in resetSelections button:",P)}},children:" "})]})]})]})};function xy(){const{user:t,loading:s}=Qe(),{language:n,direction:r}=ze();return ce.useEffect(()=>{document.documentElement.lang=n,document.documentElement.dir=r,document.body.className=r==="rtl"?"rtl":"ltr"},[n,r]),s?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(ve,{size:"lg"})}):t?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(V0,{}),e.jsxs("div",{className:"d-flex",children:[e.jsx(K0,{}),e.jsx("main",{className:"flex-grow-1 p-4",children:e.jsx("div",{className:"container-fluid",children:e.jsxs(nu,{children:[e.jsx(Se,{path:"/dashboard",element:e.jsx(Ue,{allowedRoles:["patient"],children:e.jsx(X0,{})})}),e.jsx(Se,{path:"/profile",element:e.jsx(Ue,{allowedRoles:["patient"],children:e.jsx(Z0,{})})}),e.jsx(Se,{path:"/meal-plans",element:e.jsx(Ue,{allowedRoles:["patient"],children:e.jsx(ey,{})})}),e.jsx(Se,{path:"/appointments",element:e.jsx(Ue,{allowedRoles:["patient"],children:e.jsx(ty,{})})}),e.jsx(Se,{path:"/payments",element:e.jsx(Ue,{allowedRoles:["patient"],children:e.jsx(sy,{})})}),e.jsx(Se,{path:"/doctor/dashboard",element:e.jsx(Ue,{allowedRoles:["doctor"],children:e.jsx(ny,{})})}),e.jsx(Se,{path:"/doctor/profile",element:e.jsx(Ue,{allowedRoles:["doctor"],children:e.jsx(ry,{})})}),e.jsx(Se,{path:"/doctor/patients",element:e.jsx(Ue,{allowedRoles:["doctor"],children:e.jsx(ay,{})})}),e.jsx(Se,{path:"/doctor/patient/:patientId",element:e.jsx(Ue,{allowedRoles:["doctor"],children:e.jsx(dy,{})})}),e.jsx(Se,{path:"/doctor/meal-plans",element:e.jsx(Ue,{allowedRoles:["doctor"],children:e.jsx(uy,{})})}),e.jsx(Se,{path:"/iraqi-nutrition/meal-planner",element:e.jsx(Ue,{allowedRoles:["patient","doctor","admin"],children:e.jsx(py,{})})}),e.jsx(Se,{path:"/admin/dashboard",element:e.jsx(Ue,{allowedRoles:["admin"],children:e.jsx(Ru,{})})}),e.jsx(Se,{path:"/admin/users",element:e.jsx(Ue,{allowedRoles:["admin"],children:e.jsx(my,{})})}),e.jsx(Se,{path:"/admin/doctors",element:e.jsx(Ue,{allowedRoles:["admin"],children:e.jsx(hy,{})})}),e.jsx(Se,{path:"/admin/payments",element:e.jsx(Ue,{allowedRoles:["admin"],children:e.jsx(Mu,{})})}),e.jsx(Se,{path:"/admin/reports",element:e.jsx(Ue,{allowedRoles:["admin"],children:e.jsx(Tu,{})})}),e.jsx(Se,{path:"/admin/settings",element:e.jsx(Ue,{allowedRoles:["admin"],children:e.jsx(fy,{})})}),e.jsx(Se,{path:"/accountant/dashboard",element:e.jsx(Ue,{allowedRoles:["accountant"],children:e.jsx(Ru,{})})}),e.jsx(Se,{path:"/accountant/payments",element:e.jsx(Ue,{allowedRoles:["accountant"],children:e.jsx(Mu,{})})}),e.jsx(Se,{path:"/accountant/reports",element:e.jsx(Ue,{allowedRoles:["accountant"],children:e.jsx(Tu,{})})}),e.jsx(Se,{path:"/",element:t.role==="doctor"?e.jsx(Nt,{to:"/doctor/dashboard",replace:!0}):t.role==="admin"?e.jsx(Nt,{to:"/admin/dashboard",replace:!0}):t.role==="accountant"?e.jsx(Nt,{to:"/accountant/dashboard",replace:!0}):e.jsx(Nt,{to:"/dashboard",replace:!0})}),e.jsx(Se,{path:"*",element:t.role==="doctor"?e.jsx(Nt,{to:"/doctor/dashboard",replace:!0}):t.role==="admin"?e.jsx(Nt,{to:"/admin/dashboard",replace:!0}):t.role==="accountant"?e.jsx(Nt,{to:"/accountant/dashboard",replace:!0}):e.jsx(Nt,{to:"/dashboard",replace:!0})})]})})})]}),e.jsx(yl,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:r==="rtl",pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]}):e.jsxs("div",{className:"min-h-screen",children:[e.jsxs(nu,{children:[e.jsx(Se,{path:"/login",element:e.jsx(G0,{})}),e.jsx(Se,{path:"/register",element:e.jsx(Y0,{})}),e.jsx(Se,{path:"*",element:e.jsx(Nt,{to:"/login"})})]}),e.jsx(yl,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:r==="rtl",pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}const gy=new Hv({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}});Ri.createRoot(document.getElementById("root")).render(e.jsx(ce.StrictMode,{children:e.jsx(Xv,{client:gy,children:e.jsx(bv,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(H0,{children:e.jsx(q0,{children:e.jsx(xy,{})})})})})}));
